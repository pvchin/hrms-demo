{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-myprojects\\\\hrms-demo\\\\src\\\\helpers\\\\ImageUpload.js\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo, useState, useEffect } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { Box, Button, Image, IconButton, HStack, VStack, Grid, GridItem, Modal, ModalOverlay, ModalContent, ModalHeader, ModalFooter, ModalBody, ModalCloseButton, useDisclosure } from \"@chakra-ui/react\";\nimport { FiEye, FiTrash2 } from \"react-icons/fi\";\nimport { useRecoilState } from \"recoil\";\nimport { viewImageState } from \"../components/data/atomdata\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseStyle = {\n  flex: 1,\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  padding: \"20px\",\n  borderWidth: 2,\n  borderRadius: 2,\n  borderColor: \"#eeeeee\",\n  borderStyle: \"dashed\",\n  backgroundColor: \"#fafafa\",\n  color: \"#bdbdbd\",\n  outline: \"none\",\n  transition: \"border .24s ease-in-out\"\n};\nconst activeStyle = {\n  borderColor: \"#2196f3\"\n};\nconst acceptStyle = {\n  borderColor: \"#00e676\"\n};\nconst rejectStyle = {\n  borderColor: \"#ff1744\"\n};\nconst thumbsContainer = {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexWrap: \"wrap\",\n  marginTop: 16\n};\nconst thumb = {\n  display: \"inline-flex\",\n  borderRadius: 2,\n  border: \"1px solid #eaeaea\",\n  marginBottom: 8,\n  marginRight: 8,\n  width: 100,\n  height: 100,\n  padding: 4,\n  boxSizing: \"border-box\"\n};\nconst thumbInner = {\n  display: \"flex\",\n  minWidth: 0,\n  overflow: \"hidden\"\n};\nconst img = {\n  display: \"block\",\n  width: \"auto\",\n  height: \"100%\"\n}; // interface IImageUpload {\n// files: File[],\n// onDrop: (acceptedFiles: File[]) => void\n// }\n\nconst ImageUpload = ({\n  files,\n  setFiles,\n  onDrop\n}) => {\n  _s();\n\n  const [image, setImage] = useRecoilState(viewImageState);\n  const {\n    isOpen: isViewImageOpen,\n    onOpen: onViewImageOpen,\n    onClose: onViewImageClose\n  } = useDisclosure();\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    isDragAccept,\n    isDragReject\n  } = useDropzone({\n    accept: \"image/*\",\n    onDrop: onDrop\n  });\n  const style = useMemo(() => ({ ...baseStyle,\n    ...(isDragActive ? activeStyle : {}),\n    ...(isDragAccept ? acceptStyle : {}),\n    ...(isDragReject ? rejectStyle : {})\n  }), [isDragActive, isDragAccept, isDragReject]);\n\n  const handleDelImage = filename => {\n    const newfiles = files.filter(r => r.name != filename);\n    setFiles(prev => prev = newfiles);\n  };\n\n  const handleViewImage = ({\n    preview,\n    name\n  }) => {\n    const newImage = {\n      url: preview,\n      name: name\n    };\n    setImage(prev => newImage);\n    onViewImageOpen();\n  };\n\n  const thumbs = files.map(file =>\n  /*#__PURE__*/\n  // <div style={thumb} key={file.name}>\n  //   <div style={thumbInner}>\n  //     <img\n  //       alt={file.name}\n  //       src={file.preview}\n  //       style={img}\n  //     />\n  //   </div>\n  // </div>\n  _jsxDEV(Box, {\n    display: \"inline-flex\",\n    w: \"100%\",\n    h: 150,\n    mb: 8,\n    mr: 8,\n    p: 4,\n    border: \"1px solid #eaeaea\",\n    borderRadius: 2,\n    children: /*#__PURE__*/_jsxDEV(HStack, {\n      p: 5,\n      children: [/*#__PURE__*/_jsxDEV(Image, {\n        src: file.preview,\n        alt: file.name,\n        display: \"block\",\n        w: \"auto\",\n        h: \"100%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VStack, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          size: \"sm\",\n          \"aria-label\": \"view image\",\n          icon: /*#__PURE__*/_jsxDEV(FiEye, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 19\n          }, this),\n          onClick: () => handleViewImage({\n            preview: file.preview,\n            name: file.name\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          size: \"sm\",\n          \"aria-label\": \"delete image\",\n          icon: /*#__PURE__*/_jsxDEV(FiTrash2, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 19\n          }, this),\n          onClick: () => handleDelImage(file.name)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)\n  }, file.name, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this));\n  useEffect(() => () => {\n    // Make sure to revoke the data uris to avoid memory leaks\n    files.forEach(file => URL.revokeObjectURL(file.preview));\n  }, [files]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps({\n        style\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Drag 'n' drop some files here, or click to select files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n      style: thumbsContainer,\n      children: thumbs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      closeOnOverlayClick: false,\n      isOpen: isViewImageOpen,\n      onClose: onViewImageClose,\n      children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: \"Create your account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          pb: 6,\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            src: image.preview,\n            alt: image.name,\n            display: \"block\",\n            w: \"auto\",\n            h: \"100%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            colorScheme: \"blue\",\n            mr: 3,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onViewImageClose,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ImageUpload, \"qfAl7345CKj5qT6z7TYfUdTk9VA=\", false, function () {\n  return [useRecoilState, useDisclosure, useDropzone];\n});\n\n_c = ImageUpload;\nexport default ImageUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageUpload\");","map":{"version":3,"sources":["D:/react-myprojects/hrms-demo/src/helpers/ImageUpload.js"],"names":["React","useMemo","useState","useEffect","useDropzone","Box","Button","Image","IconButton","HStack","VStack","Grid","GridItem","Modal","ModalOverlay","ModalContent","ModalHeader","ModalFooter","ModalBody","ModalCloseButton","useDisclosure","FiEye","FiTrash2","useRecoilState","viewImageState","baseStyle","flex","display","flexDirection","alignItems","padding","borderWidth","borderRadius","borderColor","borderStyle","backgroundColor","color","outline","transition","activeStyle","acceptStyle","rejectStyle","thumbsContainer","flexWrap","marginTop","thumb","border","marginBottom","marginRight","width","height","boxSizing","thumbInner","minWidth","overflow","img","ImageUpload","files","setFiles","onDrop","image","setImage","isOpen","isViewImageOpen","onOpen","onViewImageOpen","onClose","onViewImageClose","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","accept","style","handleDelImage","filename","newfiles","filter","r","name","prev","handleViewImage","preview","newImage","url","thumbs","map","file","forEach","URL","revokeObjectURL"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useEffect } from \"react\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Image,\r\n  IconButton,\r\n  HStack,\r\n  VStack,\r\n  Grid,\r\n  GridItem,\r\n  Modal,\r\n  ModalOverlay,\r\n  ModalContent,\r\n  ModalHeader,\r\n  ModalFooter,\r\n  ModalBody,\r\n  ModalCloseButton,\r\n  useDisclosure,\r\n} from \"@chakra-ui/react\";\r\nimport { FiEye, FiTrash2 } from \"react-icons/fi\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { viewImageState } from \"../components/data/atomdata\";\r\n\r\nconst baseStyle = {\r\n  flex: 1,\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  padding: \"20px\",\r\n  borderWidth: 2,\r\n  borderRadius: 2,\r\n  borderColor: \"#eeeeee\",\r\n  borderStyle: \"dashed\",\r\n  backgroundColor: \"#fafafa\",\r\n  color: \"#bdbdbd\",\r\n  outline: \"none\",\r\n  transition: \"border .24s ease-in-out\",\r\n};\r\n\r\nconst activeStyle = {\r\n  borderColor: \"#2196f3\",\r\n};\r\n\r\nconst acceptStyle = {\r\n  borderColor: \"#00e676\",\r\n};\r\n\r\nconst rejectStyle = {\r\n  borderColor: \"#ff1744\",\r\n};\r\n\r\nconst thumbsContainer = {\r\n  display: \"flex\",\r\n  flexDirection: \"row\",\r\n  flexWrap: \"wrap\",\r\n  marginTop: 16,\r\n};\r\n\r\nconst thumb = {\r\n  display: \"inline-flex\",\r\n  borderRadius: 2,\r\n  border: \"1px solid #eaeaea\",\r\n  marginBottom: 8,\r\n  marginRight: 8,\r\n  width: 100,\r\n  height: 100,\r\n  padding: 4,\r\n  boxSizing: \"border-box\",\r\n};\r\n\r\nconst thumbInner = {\r\n  display: \"flex\",\r\n  minWidth: 0,\r\n  overflow: \"hidden\",\r\n};\r\n\r\nconst img = {\r\n  display: \"block\",\r\n  width: \"auto\",\r\n  height: \"100%\",\r\n};\r\n\r\n// interface IImageUpload {\r\n// files: File[],\r\n// onDrop: (acceptedFiles: File[]) => void\r\n// }\r\n\r\nconst ImageUpload = ({ files, setFiles, onDrop }) => {\r\n  const [image, setImage] = useRecoilState(viewImageState);\r\n  const {\r\n    isOpen: isViewImageOpen,\r\n    onOpen: onViewImageOpen,\r\n    onClose: onViewImageClose,\r\n  } = useDisclosure();\r\n  const {\r\n    getRootProps,\r\n    getInputProps,\r\n    isDragActive,\r\n    isDragAccept,\r\n    isDragReject,\r\n  } = useDropzone({\r\n    accept: \"image/*\",\r\n    onDrop: onDrop,\r\n  });\r\n\r\n  const style = useMemo(\r\n    () => ({\r\n      ...baseStyle,\r\n      ...(isDragActive ? activeStyle : {}),\r\n      ...(isDragAccept ? acceptStyle : {}),\r\n      ...(isDragReject ? rejectStyle : {}),\r\n    }),\r\n    [isDragActive, isDragAccept, isDragReject]\r\n  );\r\n\r\n  const handleDelImage = (filename) => {\r\n    const newfiles = files.filter((r) => r.name != filename);\r\n    setFiles((prev) => (prev = newfiles));\r\n  };\r\n\r\n  const handleViewImage = ({ preview, name }) => {\r\n    const newImage = { url: preview, name: name };\r\n    setImage((prev) => newImage);\r\n    onViewImageOpen()\r\n  };\r\n\r\n  const thumbs = files.map((file) => (\r\n    // <div style={thumb} key={file.name}>\r\n    //   <div style={thumbInner}>\r\n    //     <img\r\n    //       alt={file.name}\r\n    //       src={file.preview}\r\n    //       style={img}\r\n    //     />\r\n    //   </div>\r\n    // </div>\r\n\r\n    <Box\r\n      display=\"inline-flex\"\r\n      w=\"100%\"\r\n      h={150}\r\n      mb={8}\r\n      mr={8}\r\n      p={4}\r\n      border=\"1px solid #eaeaea\"\r\n      borderRadius={2}\r\n      key={file.name}\r\n    >\r\n      <HStack p={5}>\r\n        <Image\r\n          src={file.preview}\r\n          alt={file.name}\r\n          display=\"block\"\r\n          w=\"auto\"\r\n          h=\"100%\"\r\n        />\r\n        <VStack>\r\n          <IconButton\r\n            size=\"sm\"\r\n            aria-label=\"view image\"\r\n            icon={<FiEye />}\r\n            onClick={() =>\r\n              handleViewImage({ preview: file.preview, name: file.name })\r\n            }\r\n          />\r\n          <IconButton\r\n            size=\"sm\"\r\n            aria-label=\"delete image\"\r\n            icon={<FiTrash2 />}\r\n            onClick={() => handleDelImage(file.name)}\r\n          />\r\n        </VStack>\r\n      </HStack>\r\n    </Box>\r\n  ));\r\n\r\n  useEffect(\r\n    () => () => {\r\n      // Make sure to revoke the data uris to avoid memory leaks\r\n      files.forEach((file) => URL.revokeObjectURL(file.preview));\r\n    },\r\n    [files]\r\n  );\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div {...getRootProps({ style })}>\r\n        <input {...getInputProps()} />\r\n        <p>Drag 'n' drop some files here, or click to select files</p>\r\n      </div>\r\n      <aside style={thumbsContainer}>{thumbs}</aside>\r\n      <Modal\r\n        closeOnOverlayClick={false}\r\n        isOpen={isViewImageOpen}\r\n        onClose={onViewImageClose}\r\n      >\r\n        <ModalOverlay />\r\n        <ModalContent>\r\n          <ModalHeader>Create your account</ModalHeader>\r\n          <ModalCloseButton />\r\n          <ModalBody pb={6}>\r\n            <Image\r\n              src={image.preview}\r\n              alt={image.name}\r\n              display=\"block\"\r\n              w=\"auto\"\r\n              h=\"100%\"\r\n            />\r\n          </ModalBody>\r\n\r\n          <ModalFooter>\r\n            <Button colorScheme=\"blue\" mr={3}>\r\n              Save\r\n            </Button>\r\n            <Button onClick={onViewImageClose}>Cancel</Button>\r\n          </ModalFooter>\r\n        </ModalContent>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;\r\n"]},"metadata":{},"sourceType":"module"}