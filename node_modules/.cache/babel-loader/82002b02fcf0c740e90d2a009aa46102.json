{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-myprojects\\\\hrms-demo\\\\src\\\\components\\\\DailyAllowsDetlsTableStaff.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as emailjs from \"emailjs-com\";\nimport MaterialTable, { MTableToolbar } from \"material-table\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n//import { useIsFetching } from \"react-query\";\nimport { TextField, Icon, Grid, Button } from \"@material-ui/core\";\n//import { useDisclosure } from \"@chakra-ui/react\";\nimport { useRecoilValue, useRecoilState } from \"recoil\";\nimport { useCustomToast } from \"../helpers/useCustomToast\";\nimport { loginLevelState, allowsDataState,\n//allowsDataDetlsState,\nempidState, allowsPeriodState\n//allowsDataIdState,\n//siteallowsTotalsState,\n} from \"./data/atomdata\";\n//import { useDailyAllowancesContext } from \"../context/dailyallowances_context\";\n//import { useAddDailyAllowsDetls } from \"./dailyallowsdetls/useAddDailyAllowsDetls\";\nimport { useUpdateDailyAllowsDetls } from \"./dailyallowsdetls/useUpdateDailyAllowsDetls\";\nimport { useDeleteDailyAllowsDetls } from \"./dailyallowsdetls/useDeleteDailyAllowsDetls\";\nimport { useDailyAllowsDetlsBatch } from \"./dailyallowsdetls/useDailyAllowsDetlsBatch\";\nimport { useDailyAllows } from \"./dailyallows/useDailyAllows\";\n//import { useDailyAllowsDetls } from \"./dailyallowsdetls/useDailyAllowsDetls\";\nimport { useUpdateDailyAllows } from \"./dailyallows/useUpdateDailyAllows\";\nimport { AlertDialogBox } from \"../helpers/AlertDialogBox\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SERVICE_ID = process.env.REACT_APP_EMAILJS_SERVICEID;\nconst TEMPLATE_ID = \"template_1y8odlq\";\nconst USER_ID = process.env.REACT_APP_EMAILJS_USERID;\nconst initial_totals = [{\n  totalamount: 0,\n  totalbonus: 0,\n  totaldiem: 0,\n  totaldays: 0\n}];\nexport default function DailyAllowsDetlsTableStaff() {\n  _s();\n  let navigate = useNavigate();\n  const toast = useCustomToast();\n  const classes = useStyles();\n  //const isFetching = useIsFetching();\n  //const { dailyallowsdetls } = useDailyAllowsDetls()\n  const {\n    dailyallows,\n    setDailyAllowsId\n  } = useDailyAllows();\n  const {\n    dailyallowsdetls,\n    setDailyAllowsDetlsId,\n    setDailyAllowsDetlsPeriod\n    //isLoading,\n  } = useDailyAllowsDetlsBatch();\n  //const addDailyAllowsDetls = useAddDailyAllowsDetls();\n  const updateDailyAllowsDetls = useUpdateDailyAllowsDetls();\n  const deleteDailyAllowsDetls = useDeleteDailyAllowsDetls();\n  const updateDailyAllows = useUpdateDailyAllows();\n\n  // const [allowsDetlsTable, setAllowsDetlsTable] =\n  // useRecoilState(allowsDataDetlsState);\n  //console.log(\"detlstable\", );\n  //const [allowsDetlsdata, setAllowsDetilsdata] = useRecoilStateLoadable(fetchDailyAllowsDetlsSelector);\n  const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\n  // const [allowsDetlsdata, setAllowsDetlsdata] =\n  //   useRecoilState(allowsDataDetlsState);\n  const allows_period = useRecoilValue(allowsPeriodState);\n  const allows_empid = useRecoilValue(empidState);\n  // const [siteallowsTotals, setSiteAllowsTotals] = useRecoilState(\n  //   siteallowsTotalsState\n  // );\n  const [allowsdata, setAllowsdata] = useRecoilState(allowsDataState);\n  //const [allowsdataId, setAllowsdataId] = useState(allowsDataIdState);\n  //const [tabledeldata, setTableDelData] = useState({});\n  //const [isCalc, setIsCalc] = useState(false);\n  //const [isBuild, setIsBuild] = useState(false);\n  const [totals, setTotals] = useState({\n    initial_totals\n  });\n  const [isSubmitAlertOpen, setIsSubmitAlertOpen] = useState(false);\n  const [isExitAlertOpen, setIsExitAlertOpen] = useState(false);\n  //const [dailyallowsdata, setDailyAllowsData] = useState({});\n  //const totalsValues = Object.values(totals).join(\"\");\n  //const [isRowIndex, setIsRowIndex] = useState(\"\");\n\n  // const {\n  //   //dailyallowances,\n  //   //dailyallowsdetls,\n  //   loadEmpDailyAllowsDetls,\n  //   updateDailyAllowance,\n  //   //updateDailyAllowsDetl,\n  //   //deleteDailyAllowsDetl,\n  //   dailyallowsdetl_loading,\n  //   dailyallowsdetl_error,\n  // } = useDailyAllowancesContext();\n\n  const columns = useMemo(() => [{\n    title: \"Date\",\n    field: \"date\",\n    type: \"date\",\n    dateSetting: {\n      locale: \"en-GB\"\n    },\n    // editable: \"never\",\n    cellStyle: {\n      width: 120,\n      maxWidth: 120\n    },\n    editComponent: props => /*#__PURE__*/_jsxDEV(TextField, {\n      defaultValue: props.value || null,\n      onChange: e => props.onChange(e.target.value),\n      type: \"date\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this)\n  },\n  // { title: \"District\", field: \"district\" },\n  {\n    title: \"Operation Type\",\n    field: \"typeoperation\"\n  }, {\n    title: \"Client\",\n    field: \"client\"\n  }, {\n    title: \"Location/Rig\",\n    field: \"location\"\n  }, {\n    title: \"Ticket No/Job No\",\n    field: \"jobno\"\n  }, {\n    title: \"Operation Role\",\n    field: \"crewoperation\"\n  }, {\n    title: \"Job Bonus\",\n    field: \"jobbonus\",\n    type: \"currency\",\n    cellStyle: {\n      width: 8,\n      maxWidth: 8\n    },\n    headerStyle: {\n      width: 8,\n      maxWidth: 8\n    }\n  }, {\n    title: \"Per Diem\",\n    field: \"perdiem\",\n    type: \"currency\",\n    cellStyle: {\n      width: 8,\n      maxWidth: 8\n    },\n    headerStyle: {\n      width: 8,\n      maxWidth: 8\n    }\n  }\n  // { title: \"Delete\", field: \"isdelete\", type: \"boolean\" },\n  ], []);\n  useEffect(() => {\n    setDailyAllowsId(allows_empid);\n    setDailyAllowsDetlsId(allows_empid);\n    setDailyAllowsDetlsPeriod(allows_period);\n    // setTimeout(() => {\n    //   setTotals((prevState) => ({\n    //     totalamount: dailyallows.amount,\n    //     totalbonus: dailyallows.totaljobbonus,\n    //     totaldiem: dailyallows.totalperdiem,\n    //     totaldays: dailyallows.no_of_days,\n    //   }));\n    // }, 3000);\n  }, [allows_empid, allows_period]);\n\n  // useEffect(() => {\n  //  if (allowsdata) {\n  //     handle_tempcalc();\n  //     setIsCalc(false);\n  //   }\n  // }, [isCalc]);\n\n  const handleSentEmail = data => {\n    const {\n      period\n    } = data;\n    //console.log(\"expense form\", loginLevel);\n    var emaildata = {\n      to_name: loginLevel.loginUser,\n      to_email: loginLevel.loginEmail,\n      message: `Your site allowances for the period ${period} has been successfully submitted for approval`,\n      cc_to: loginLevel.reporting_email\n    };\n    emailjs.send(SERVICE_ID, TEMPLATE_ID, emaildata, USER_ID).then(function (response) {\n      console.log(response.status, response.text);\n      toast({\n        title: `Email has sent successfully to ${emaildata.to_email}!`,\n        status: \"success\"\n      });\n    }, function (err) {\n      console.log(err);\n      toast({\n        title: `Email has fail to send to ${emaildata.to_email}!`,\n        status: \"warning\"\n      });\n    });\n  };\n\n  // const build_dailyallowsdata = () => {\n  //   const { id, jobbonus, perdiem } = dailyallowsdetls;\n  //   const data = dailyallowsdetls\n  //     .filter((r) => r.period === allows_period && r.empid === allows_empid)\n  //     .map((rec) => {\n  //       return rec.id, rec.jobbonus, rec.perdiem;\n  //     });\n  //   setDailyAllowsData(data);\n  //   console.log(\"dailydata\", dailyallowsdata);\n  // };\n\n  const update_AllowsDetls = (data, index) => {\n    const allowsdata = dailyallowsdetls;\n    const {\n      id,\n      rec_id,\n      tableData,\n      ...fields\n    } = data;\n    updateDailyAllowsDetls({\n      id,\n      ...fields\n    });\n\n    //recalc\n    allowsdata[index].jobbonus = data.jobbonus;\n    allowsdata[index].perdiem = data.perdiem;\n    handle_tempcalc(allowsdata);\n    //save_siteallows();\n  };\n\n  // const save_siteallows = () => {\n  //   const { id } = allowsdata;\n\n  //   updateDailyAllows({\n  //     id: id,\n  //     ...allowsdata,\n  //     no_of_days: totals.totaldays,\n  //     amount: totals.totalamount,\n  //     totaljobbonus: totals.totalbonus,\n  //     totalperdiem: totals.totaldiem,\n  //   });\n  // };\n\n  // const save_AllowsDetls = (e) => {\n  //   e.preventDefault();\n  //   // handle calc\n  //   //handle_calc();\n\n  //   //save allows data details\n  //   const { id } = allowsdata;\n\n  //   updateDailyAllows({\n  //     id: id,\n  //     ...allowsdata,\n  //     no_of_days: totals.totaldays,\n  //     amount: totals.totalamount,\n  //     totaljobbonus: totals.totalbonus,\n  //     totalperdiem: totals.totaldiem,\n  //   });\n  //   toast({\n  //     title: \"Site Allowances table being saved!\",\n  //     status: \"success\",\n  //   });\n  // };\n\n  const submit_AllowsDetls = e => {\n    e.preventDefault();\n    handleSubmitAlertOpen();\n  };\n  const exit_AllowsDetls = e => {\n    e.preventDefault();\n    handleExitAlertOpen();\n  };\n  const handleOnSubmitConfirm = () => {\n    //save allows data details\n    const {\n      id\n    } = allowsdata;\n    updateDailyAllows({\n      id: id,\n      ...allowsdata,\n      no_of_days: totals.totaldays,\n      amount: totals.totalamount,\n      totaljobbonus: totals.totalbonus,\n      totalperdiem: totals.totaldiem,\n      status: \"Submitted\"\n    });\n    handleSentEmail(allowsdata);\n    navigate(\"/dailyallowancesstaff\");\n    toast({\n      title: \"Site Allowances table being submitted!\",\n      status: \"success\"\n    });\n  };\n  const handleOnExitConfirm = () => {\n    //save allows data details\n    // const { id } = allowsdata;\n    // updateDailyAllows({\n    //   id: id,\n    //   ...allowsdata,\n    //   no_of_days: totals.totaldays,\n    //   amount: totals.totalamount,\n    //   totaljobbonus: totals.totalbonus,\n    //   totalperdiem: totals.totaldiem,\n    // });\n    navigate(\"/dailyallowancesstaff\");\n    // toast({\n    //   title: \"Site Allowances table being submitted!\",\n    //   status: \"success\",\n    // });\n  };\n\n  const handleSubmitAlertOpen = () => {\n    setIsSubmitAlertOpen(true);\n  };\n  const handleSubmitAlertClose = () => {\n    setIsSubmitAlertOpen(false);\n  };\n  const handleExitAlertOpen = () => {\n    setIsExitAlertOpen(true);\n  };\n  const handleExitAlertClose = () => {\n    setIsExitAlertOpen(false);\n  };\n\n  // const handle_calc = () => {\n  //   if (dailyallowsdetls) {\n  //     const totbonus = dailyallowsdetls\n  //       .filter((r) => r.period === allows_period && r.empid === allows_empid)\n  //       .reduce((acc, item) => {\n  //         if (isNaN(item.jobbonus)) {\n  //           return acc;\n  //         } else {\n  //           return acc + item.jobbonus;\n  //         }\n  //       }, 0);\n  //     const totdiem = dailyallowsdetls\n  //       .filter((r) => r.period === allows_period && r.empid === allows_empid)\n  //       .reduce((acc, item) => {\n  //         if (isNaN(item.perdiem)) {\n  //           return acc;\n  //         } else {\n  //           return acc + item.perdiem;\n  //         }\n  //       }, 0);\n  //     const totdays = dailyallowsdetls\n  //       .filter((r) => r.period === allows_period && r.empid === allows_empid)\n  //       .reduce((acc, item) => {\n  //         let val = 0;\n  //         if (item.jobbonus > 0 || item.perdiem > 0) {\n  //           val = 1;\n  //         } else {\n  //           val = 0;\n  //         }\n  //         return acc + val;\n  //       }, 0);\n  //     const total = totbonus + totdiem;\n\n  //     setTimeout(() => {\n  //       setTotals({\n  //         totalamount: total,\n  //         totalbonus: totbonus,\n  //         totaldiem: totdiem,\n  //         totaldays: totdays,\n  //       });\n  //     }, 3000);\n  //     console.log(\"calc\", totdays, totals);\n  //   }\n  // };\n\n  const handle_tempcalc = allowsdata => {\n    if (allowsdata) {\n      const totbonus = allowsdata.filter(r => r.period === allows_period && r.empid === allows_empid).reduce((acc, item) => {\n        if (isNaN(item.jobbonus)) {\n          return acc;\n        } else {\n          return acc + item.jobbonus;\n        }\n      }, 0);\n      const totdiem = allowsdata.filter(r => r.period === allows_period && r.empid === allows_empid).reduce((acc, item) => {\n        if (isNaN(item.perdiem)) {\n          return acc;\n        } else {\n          return acc + item.perdiem;\n        }\n      }, 0);\n      const totdays = allowsdata.filter(r => r.period === allows_period && r.empid === allows_empid).reduce((acc, item) => {\n        let val = 0;\n        if (item.jobbonus > 0 || item.perdiem > 0) {\n          val = 1;\n        } else {\n          val = 0;\n        }\n        return acc + val;\n      }, 0);\n      const total = totbonus + totdiem;\n      const data = dailyallows.filter(r => r.period === allows_period && r.empid === allows_empid).map(rec => {\n        return {\n          ...rec\n        };\n      });\n      updateDailyAllows({\n        id: data[0].id,\n        no_of_days: totdays,\n        amount: total,\n        totaljobbonus: totbonus,\n        totalperdiem: totdiem\n      });\n      // setTimeout(() => {\n      //   setTotals({\n      //     totalamount: total,\n      //     totalbonus: totbonus,\n      //     totaldiem: totdiem,\n      //     totaldays: totdays,\n      //   });\n      // }, 3000);\n      // console.log(\"tempcalc\", totdays, totals);\n    }\n  };\n\n  // const update_SiteAllowsTotals = () => {\n  //   setSiteAllowsTotals({\n  //     totalamount: totals.totalamount,\n  //     totalbonus: dailyallowsdetls.reduce((acc, item) => {\n  //       if (isNaN(item.jobbonus)) {\n  //         return acc;\n  //       } else {\n  //         return acc + item.jobbonus;\n  //       }\n  //     }, 0),\n  //     totaldiem: totals.totaldiem,\n  //     totaldays: dailyallowsdetls.reduce((acc, item) => {\n  //       let val = 0;\n  //       if (item.jobbonus > 0 || item.perdiem > 0) {\n  //         val = 1;\n  //       } else {\n  //         val = 0;\n  //       }\n  //       return acc + val;\n  //     }, 0),\n  //   });\n  //   console.log(\"update\", siteallowsTotals);\n  // };\n\n  // const add_DailyAllowsDetl = async (data) => {\n  //   console.log(\"add\", data);\n  //   const { description, amount } = data;\n  //   addDailyAllowsDetl({\n  //     description: description,\n  //     amount: amount,\n  //     name: single_dailyallowance.name,\n  //     empid: single_dailyallowance.empid,\n  //     period: dailyallowance_period,\n  //   });\n  // };\n\n  const delete_AllowsDetl = (data, index) => {\n    const allowsdata = dailyallowsdetls;\n    const {\n      id\n    } = data;\n    deleteDailyAllowsDetls(id);\n    // toast({\n    //   title: \"Site Allowances details record being deleted!\",\n    //   status: \"warning\",\n    // });\n    //recalc\n    allowsdata.splice(index, 1);\n    handle_tempcalc(allowsdata);\n  };\n\n  //  setAllowsDetlsdata(dailyallowsdetls);\n\n  // console.log(\"load allows detls\", allowsDetlsdata);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: \"75%\",\n        paddingTop: \"5px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(MaterialTable, {\n        columns: columns,\n        data: dailyallowsdetls,\n        title: \"Daily Allowances Details\",\n        editable: {\n          // onRowAdd: (newData) =>\n          //   new Promise((resolve, reject) => {\n          //     // setTimeout(() => {\n          //     //   setAllowsdata([...allowsdata, newData]);\n          //     //   resolve();\n          //     // }, 1000);\n          //   }),\n          onRowUpdate: (newData, oldData) => new Promise((resolve, reject) => {\n            setTimeout(() => {\n              const dataUpdate = [...dailyallowsdetls];\n              const index = oldData.tableData.id;\n              dataUpdate[index] = newData;\n              //setDailyAllowsData([...dataUpdate]);\n\n              update_AllowsDetls(newData, index);\n              //handle_calc();\n              //setAllowsDetlsTable([...dataUpdate]);\n              //editable = dataUpdate;\n              resolve();\n            }, 1000);\n          }),\n          onRowDelete: oldData => new Promise((resolve, reject) => {\n            setTimeout(() => {\n              //const dataDelete = [...allowsDetlsTable];\n              const index = oldData.tableData.id;\n              delete_AllowsDetl(oldData, index);\n              //dataDelete.splice(index, 1);\n              //setAllowsDetlsTable([...dataDelete]);\n\n              resolve();\n            }, 1000);\n          })\n        },\n        options: {\n          filtering: true,\n          selection: false,\n          pageSize: 10,\n          headerStyle: {\n            backgroundColor: \"orange\",\n            color: \"primary\"\n          },\n          showTitle: true\n        },\n        components: {\n          Toolbar: props => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(MTableToolbar, {\n              ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: \"5px 10px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"contained\",\n                color: \"secondary\",\n                className: classes.button,\n                onClick: e => submit_AllowsDetls(e),\n                children: [\"Submit \", /*#__PURE__*/_jsxDEV(Icon, {\n                  className: classes.rightIcon,\n                  children: \"send\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 580,\n                  columnNumber: 28\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"contained\",\n                color: \"secondary\",\n                className: classes.button,\n                onClick: e => exit_AllowsDetls(e),\n                children: \"Exit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 0,\n                  direction: \"row\",\n                  style: {\n                    border: \"1px solid white\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: \"flex\",\n                      flexDirection: \"row\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(TextField, {\n                      label: \"Total Job Bonus\",\n                      variant: \"filled\",\n                      style: {\n                        width: \"100%\"\n                      },\n                      name: \"totalbonus\",\n                      value: dailyallows && dailyallows.filter(r => r.period === allows_period && r.empid === allows_empid).map(rec => {\n                        return rec.totaljobbonus;\n                      }),\n                      type: \"currency\",\n                      className: classes.textField,\n                      InputLabelProps: {\n                        shrink: true\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 600,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                      label: \"Total Diem\",\n                      variant: \"filled\",\n                      style: {\n                        width: \"100%\"\n                      },\n                      name: \"totaldiem\",\n                      value: dailyallows && dailyallows.filter(r => r.period === allows_period && r.empid === allows_empid).map(rec => {\n                        return rec.totalperdiem;\n                      }),\n                      type: \"currency\",\n                      className: classes.textField,\n                      InputLabelProps: {\n                        shrink: true\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 623,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                      label: \"No of Days\",\n                      variant: \"filled\",\n                      style: {\n                        width: \"100%\"\n                      },\n                      name: \"totaldays\",\n                      value: dailyallows && dailyallows.filter(r => r.period === allows_period && r.empid === allows_empid).map(rec => {\n                        return rec.no_of_days;\n                      }),\n                      type: \"numeric\",\n                      className: classes.textField,\n                      InputLabelProps: {\n                        shrink: true\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 647,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                      label: \"Total Amount\",\n                      variant: \"filled\",\n                      style: {\n                        width: \"100%\"\n                      },\n                      name: \"totalamount\",\n                      value: dailyallows && dailyallows.filter(r => r.period === allows_period && r.empid === allows_empid).map(rec => {\n                        return rec.amount;\n                      }),\n                      type: \"currency\",\n                      className: classes.textField,\n                      InputLabelProps: {\n                        shrink: true\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 670,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 599,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 593,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 15\n          }, this)\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(AlertDialogBox, {\n        onClose: handleSubmitAlertClose,\n        onConfirm: handleOnSubmitConfirm,\n        isOpen: isSubmitAlertOpen,\n        title: \"Site Allowances Batch\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"After submition for approval, no changes can be made.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Are you sure you want to submit ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 702,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(AlertDialogBox, {\n        onClose: handleExitAlertClose,\n        onConfirm: handleOnExitConfirm,\n        isOpen: isExitAlertOpen,\n        title: \"Site Allowances Batch\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Are you sure you want to exit ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 714,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 713,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 477,\n    columnNumber: 5\n  }, this);\n}\n_s(DailyAllowsDetlsTableStaff, \"deN5FE5mZfXacBBkiIwsh1DgSw0=\", false, function () {\n  return [useNavigate, useCustomToast, useStyles, useDailyAllows, useDailyAllowsDetlsBatch, useUpdateDailyAllowsDetls, useDeleteDailyAllowsDetls, useUpdateDailyAllows, useRecoilState, useRecoilValue, useRecoilValue, useRecoilState];\n});\n_c = DailyAllowsDetlsTableStaff;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: 0,\n    width: 1500\n  },\n  button: {\n    margin: theme.spacing(1)\n  }\n}));\nvar _c;\n$RefreshReg$(_c, \"DailyAllowsDetlsTableStaff\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useNavigate","emailjs","MaterialTable","MTableToolbar","makeStyles","TextField","Icon","Grid","Button","useRecoilValue","useRecoilState","useCustomToast","loginLevelState","allowsDataState","empidState","allowsPeriodState","useUpdateDailyAllowsDetls","useDeleteDailyAllowsDetls","useDailyAllowsDetlsBatch","useDailyAllows","useUpdateDailyAllows","AlertDialogBox","SERVICE_ID","process","env","REACT_APP_EMAILJS_SERVICEID","TEMPLATE_ID","USER_ID","REACT_APP_EMAILJS_USERID","initial_totals","totalamount","totalbonus","totaldiem","totaldays","DailyAllowsDetlsTableStaff","navigate","toast","classes","useStyles","dailyallows","setDailyAllowsId","dailyallowsdetls","setDailyAllowsDetlsId","setDailyAllowsDetlsPeriod","updateDailyAllowsDetls","deleteDailyAllowsDetls","updateDailyAllows","loginLevel","setLoginLevel","allows_period","allows_empid","allowsdata","setAllowsdata","totals","setTotals","isSubmitAlertOpen","setIsSubmitAlertOpen","isExitAlertOpen","setIsExitAlertOpen","columns","title","field","type","dateSetting","locale","cellStyle","width","maxWidth","editComponent","props","value","e","onChange","target","headerStyle","handleSentEmail","data","period","emaildata","to_name","loginUser","to_email","loginEmail","message","cc_to","reporting_email","send","then","response","console","log","status","text","err","update_AllowsDetls","index","id","rec_id","tableData","fields","jobbonus","perdiem","handle_tempcalc","submit_AllowsDetls","preventDefault","handleSubmitAlertOpen","exit_AllowsDetls","handleExitAlertOpen","handleOnSubmitConfirm","no_of_days","amount","totaljobbonus","totalperdiem","handleOnExitConfirm","handleSubmitAlertClose","handleExitAlertClose","totbonus","filter","r","empid","reduce","acc","item","isNaN","totdiem","totdays","val","total","map","rec","delete_AllowsDetl","splice","root","paddingTop","onRowUpdate","newData","oldData","Promise","resolve","reject","setTimeout","dataUpdate","onRowDelete","filtering","selection","pageSize","backgroundColor","color","showTitle","Toolbar","padding","button","rightIcon","border","display","flexDirection","textField","shrink","theme","margin","spacing"],"sources":["D:/react-myprojects/hrms-demo/src/components/DailyAllowsDetlsTableStaff.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport * as emailjs from \"emailjs-com\";\r\nimport MaterialTable, { MTableToolbar } from \"material-table\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//import { useIsFetching } from \"react-query\";\r\nimport { TextField, Icon, Grid, Button } from \"@material-ui/core\";\r\n//import { useDisclosure } from \"@chakra-ui/react\";\r\nimport { useRecoilValue, useRecoilState } from \"recoil\";\r\nimport { useCustomToast } from \"../helpers/useCustomToast\";\r\nimport {\r\n  loginLevelState,\r\n  allowsDataState,\r\n  //allowsDataDetlsState,\r\n  empidState,\r\n  allowsPeriodState,\r\n  //allowsDataIdState,\r\n  //siteallowsTotalsState,\r\n} from \"./data/atomdata\";\r\n//import { useDailyAllowancesContext } from \"../context/dailyallowances_context\";\r\n//import { useAddDailyAllowsDetls } from \"./dailyallowsdetls/useAddDailyAllowsDetls\";\r\nimport { useUpdateDailyAllowsDetls } from \"./dailyallowsdetls/useUpdateDailyAllowsDetls\";\r\nimport { useDeleteDailyAllowsDetls } from \"./dailyallowsdetls/useDeleteDailyAllowsDetls\";\r\nimport { useDailyAllowsDetlsBatch } from \"./dailyallowsdetls/useDailyAllowsDetlsBatch\";\r\nimport { useDailyAllows } from \"./dailyallows/useDailyAllows\";\r\n//import { useDailyAllowsDetls } from \"./dailyallowsdetls/useDailyAllowsDetls\";\r\nimport { useUpdateDailyAllows } from \"./dailyallows/useUpdateDailyAllows\";\r\nimport { AlertDialogBox } from \"../helpers/AlertDialogBox\";\r\n\r\nconst SERVICE_ID = process.env.REACT_APP_EMAILJS_SERVICEID;\r\nconst TEMPLATE_ID = \"template_1y8odlq\";\r\nconst USER_ID = process.env.REACT_APP_EMAILJS_USERID;\r\n\r\nconst initial_totals = [\r\n  {\r\n    totalamount: 0,\r\n    totalbonus: 0,\r\n    totaldiem: 0,\r\n    totaldays: 0,\r\n  },\r\n];\r\n\r\nexport default function DailyAllowsDetlsTableStaff() {\r\n  let navigate = useNavigate();\r\n  const toast = useCustomToast();\r\n  const classes = useStyles();\r\n  //const isFetching = useIsFetching();\r\n  //const { dailyallowsdetls } = useDailyAllowsDetls()\r\n  const { dailyallows, setDailyAllowsId } = useDailyAllows();\r\n  const {\r\n    dailyallowsdetls,\r\n    setDailyAllowsDetlsId,\r\n    setDailyAllowsDetlsPeriod,\r\n    //isLoading,\r\n  } = useDailyAllowsDetlsBatch();\r\n  //const addDailyAllowsDetls = useAddDailyAllowsDetls();\r\n  const updateDailyAllowsDetls = useUpdateDailyAllowsDetls();\r\n  const deleteDailyAllowsDetls = useDeleteDailyAllowsDetls();\r\n  const updateDailyAllows = useUpdateDailyAllows();\r\n\r\n  // const [allowsDetlsTable, setAllowsDetlsTable] =\r\n  // useRecoilState(allowsDataDetlsState);\r\n  //console.log(\"detlstable\", );\r\n  //const [allowsDetlsdata, setAllowsDetilsdata] = useRecoilStateLoadable(fetchDailyAllowsDetlsSelector);\r\n  const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\r\n  // const [allowsDetlsdata, setAllowsDetlsdata] =\r\n  //   useRecoilState(allowsDataDetlsState);\r\n  const allows_period = useRecoilValue(allowsPeriodState);\r\n  const allows_empid = useRecoilValue(empidState);\r\n  // const [siteallowsTotals, setSiteAllowsTotals] = useRecoilState(\r\n  //   siteallowsTotalsState\r\n  // );\r\n  const [allowsdata, setAllowsdata] = useRecoilState(allowsDataState);\r\n  //const [allowsdataId, setAllowsdataId] = useState(allowsDataIdState);\r\n  //const [tabledeldata, setTableDelData] = useState({});\r\n  //const [isCalc, setIsCalc] = useState(false);\r\n  //const [isBuild, setIsBuild] = useState(false);\r\n  const [totals, setTotals] = useState({ initial_totals });\r\n  const [isSubmitAlertOpen, setIsSubmitAlertOpen] = useState(false);\r\n  const [isExitAlertOpen, setIsExitAlertOpen] = useState(false);\r\n  //const [dailyallowsdata, setDailyAllowsData] = useState({});\r\n  //const totalsValues = Object.values(totals).join(\"\");\r\n  //const [isRowIndex, setIsRowIndex] = useState(\"\");\r\n\r\n  // const {\r\n  //   //dailyallowances,\r\n  //   //dailyallowsdetls,\r\n  //   loadEmpDailyAllowsDetls,\r\n  //   updateDailyAllowance,\r\n  //   //updateDailyAllowsDetl,\r\n  //   //deleteDailyAllowsDetl,\r\n  //   dailyallowsdetl_loading,\r\n  //   dailyallowsdetl_error,\r\n  // } = useDailyAllowancesContext();\r\n\r\n  const columns = useMemo(() => [\r\n    {\r\n      title: \"Date\",\r\n      field: \"date\",\r\n      type: \"date\",\r\n      dateSetting: { locale: \"en-GB\" },\r\n      // editable: \"never\",\r\n      cellStyle: {\r\n        width: 120,\r\n        maxWidth: 120,\r\n      },\r\n      editComponent: (props) => (\r\n        <TextField\r\n          defaultValue={props.value || null}\r\n          onChange={(e) => props.onChange(e.target.value)}\r\n          type=\"date\"\r\n        />\r\n      ),\r\n    },\r\n    // { title: \"District\", field: \"district\" },\r\n    { title: \"Operation Type\", field: \"typeoperation\" },\r\n    { title: \"Client\", field: \"client\" },\r\n    { title: \"Location/Rig\", field: \"location\" },\r\n    { title: \"Ticket No/Job No\", field: \"jobno\" },\r\n    { title: \"Operation Role\", field: \"crewoperation\" },\r\n    {\r\n      title: \"Job Bonus\",\r\n      field: \"jobbonus\",\r\n      type: \"currency\",\r\n      cellStyle: {\r\n        width: 8,\r\n        maxWidth: 8,\r\n      },\r\n      headerStyle: {\r\n        width: 8,\r\n        maxWidth: 8,\r\n      },\r\n    },\r\n    {\r\n      title: \"Per Diem\",\r\n      field: \"perdiem\",\r\n      type: \"currency\",\r\n      cellStyle: {\r\n        width: 8,\r\n        maxWidth: 8,\r\n      },\r\n      headerStyle: {\r\n        width: 8,\r\n        maxWidth: 8,\r\n      },\r\n    },\r\n    // { title: \"Delete\", field: \"isdelete\", type: \"boolean\" },\r\n  ],[]);\r\n\r\n  useEffect(() => {\r\n    setDailyAllowsId(allows_empid);\r\n    setDailyAllowsDetlsId(allows_empid);\r\n    setDailyAllowsDetlsPeriod(allows_period);\r\n    // setTimeout(() => {\r\n    //   setTotals((prevState) => ({\r\n    //     totalamount: dailyallows.amount,\r\n    //     totalbonus: dailyallows.totaljobbonus,\r\n    //     totaldiem: dailyallows.totalperdiem,\r\n    //     totaldays: dailyallows.no_of_days,\r\n    //   }));\r\n    // }, 3000);\r\n  }, [allows_empid, allows_period]);\r\n\r\n  // useEffect(() => {\r\n  //  if (allowsdata) {\r\n  //     handle_tempcalc();\r\n  //     setIsCalc(false);\r\n  //   }\r\n  // }, [isCalc]);\r\n\r\n  const handleSentEmail = (data) => {\r\n    const { period } = data;\r\n    //console.log(\"expense form\", loginLevel);\r\n    var emaildata = {\r\n      to_name: loginLevel.loginUser,\r\n      to_email: loginLevel.loginEmail,\r\n      message: `Your site allowances for the period ${period} has been successfully submitted for approval`,\r\n      cc_to: loginLevel.reporting_email,\r\n    };\r\n\r\n    emailjs.send(SERVICE_ID, TEMPLATE_ID, emaildata, USER_ID).then(\r\n      function (response) {\r\n        console.log(response.status, response.text);\r\n        toast({\r\n          title: `Email has sent successfully to ${emaildata.to_email}!`,\r\n          status: \"success\",\r\n        });\r\n      },\r\n      function (err) {\r\n        console.log(err);\r\n        toast({\r\n          title: `Email has fail to send to ${emaildata.to_email}!`,\r\n          status: \"warning\",\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  // const build_dailyallowsdata = () => {\r\n  //   const { id, jobbonus, perdiem } = dailyallowsdetls;\r\n  //   const data = dailyallowsdetls\r\n  //     .filter((r) => r.period === allows_period && r.empid === allows_empid)\r\n  //     .map((rec) => {\r\n  //       return rec.id, rec.jobbonus, rec.perdiem;\r\n  //     });\r\n  //   setDailyAllowsData(data);\r\n  //   console.log(\"dailydata\", dailyallowsdata);\r\n  // };\r\n\r\n  const update_AllowsDetls = (data, index) => {\r\n    const allowsdata = dailyallowsdetls;\r\n    const { id, rec_id, tableData, ...fields } = data;\r\n    updateDailyAllowsDetls({ id, ...fields });\r\n\r\n    //recalc\r\n    allowsdata[index].jobbonus = data.jobbonus;\r\n    allowsdata[index].perdiem = data.perdiem;\r\n    handle_tempcalc(allowsdata);\r\n    //save_siteallows();\r\n  };\r\n\r\n  // const save_siteallows = () => {\r\n  //   const { id } = allowsdata;\r\n\r\n  //   updateDailyAllows({\r\n  //     id: id,\r\n  //     ...allowsdata,\r\n  //     no_of_days: totals.totaldays,\r\n  //     amount: totals.totalamount,\r\n  //     totaljobbonus: totals.totalbonus,\r\n  //     totalperdiem: totals.totaldiem,\r\n  //   });\r\n  // };\r\n\r\n  // const save_AllowsDetls = (e) => {\r\n  //   e.preventDefault();\r\n  //   // handle calc\r\n  //   //handle_calc();\r\n\r\n  //   //save allows data details\r\n  //   const { id } = allowsdata;\r\n\r\n  //   updateDailyAllows({\r\n  //     id: id,\r\n  //     ...allowsdata,\r\n  //     no_of_days: totals.totaldays,\r\n  //     amount: totals.totalamount,\r\n  //     totaljobbonus: totals.totalbonus,\r\n  //     totalperdiem: totals.totaldiem,\r\n  //   });\r\n  //   toast({\r\n  //     title: \"Site Allowances table being saved!\",\r\n  //     status: \"success\",\r\n  //   });\r\n  // };\r\n\r\n  const submit_AllowsDetls = (e) => {\r\n    e.preventDefault();\r\n    handleSubmitAlertOpen();\r\n  };\r\n\r\n  const exit_AllowsDetls = (e) => {\r\n    e.preventDefault();\r\n    handleExitAlertOpen();\r\n  };\r\n\r\n  const handleOnSubmitConfirm = () => {\r\n    //save allows data details\r\n    const { id } = allowsdata;\r\n    updateDailyAllows({\r\n      id: id,\r\n      ...allowsdata,\r\n      no_of_days: totals.totaldays,\r\n      amount: totals.totalamount,\r\n      totaljobbonus: totals.totalbonus,\r\n      totalperdiem: totals.totaldiem,\r\n      status: \"Submitted\",\r\n    });\r\n    handleSentEmail(allowsdata);\r\n    navigate(\"/dailyallowancesstaff\");\r\n    toast({\r\n      title: \"Site Allowances table being submitted!\",\r\n      status: \"success\",\r\n    });\r\n  };\r\n\r\n  const handleOnExitConfirm = () => {\r\n    //save allows data details\r\n    // const { id } = allowsdata;\r\n    // updateDailyAllows({\r\n    //   id: id,\r\n    //   ...allowsdata,\r\n    //   no_of_days: totals.totaldays,\r\n    //   amount: totals.totalamount,\r\n    //   totaljobbonus: totals.totalbonus,\r\n    //   totalperdiem: totals.totaldiem,\r\n    // });\r\n    navigate(\"/dailyallowancesstaff\");\r\n    // toast({\r\n    //   title: \"Site Allowances table being submitted!\",\r\n    //   status: \"success\",\r\n    // });\r\n  };\r\n\r\n  const handleSubmitAlertOpen = () => {\r\n    setIsSubmitAlertOpen(true);\r\n  };\r\n\r\n  const handleSubmitAlertClose = () => {\r\n    setIsSubmitAlertOpen(false);\r\n  };\r\n\r\n  const handleExitAlertOpen = () => {\r\n    setIsExitAlertOpen(true);\r\n  };\r\n\r\n  const handleExitAlertClose = () => {\r\n    setIsExitAlertOpen(false);\r\n  };\r\n\r\n  // const handle_calc = () => {\r\n  //   if (dailyallowsdetls) {\r\n  //     const totbonus = dailyallowsdetls\r\n  //       .filter((r) => r.period === allows_period && r.empid === allows_empid)\r\n  //       .reduce((acc, item) => {\r\n  //         if (isNaN(item.jobbonus)) {\r\n  //           return acc;\r\n  //         } else {\r\n  //           return acc + item.jobbonus;\r\n  //         }\r\n  //       }, 0);\r\n  //     const totdiem = dailyallowsdetls\r\n  //       .filter((r) => r.period === allows_period && r.empid === allows_empid)\r\n  //       .reduce((acc, item) => {\r\n  //         if (isNaN(item.perdiem)) {\r\n  //           return acc;\r\n  //         } else {\r\n  //           return acc + item.perdiem;\r\n  //         }\r\n  //       }, 0);\r\n  //     const totdays = dailyallowsdetls\r\n  //       .filter((r) => r.period === allows_period && r.empid === allows_empid)\r\n  //       .reduce((acc, item) => {\r\n  //         let val = 0;\r\n  //         if (item.jobbonus > 0 || item.perdiem > 0) {\r\n  //           val = 1;\r\n  //         } else {\r\n  //           val = 0;\r\n  //         }\r\n  //         return acc + val;\r\n  //       }, 0);\r\n  //     const total = totbonus + totdiem;\r\n\r\n  //     setTimeout(() => {\r\n  //       setTotals({\r\n  //         totalamount: total,\r\n  //         totalbonus: totbonus,\r\n  //         totaldiem: totdiem,\r\n  //         totaldays: totdays,\r\n  //       });\r\n  //     }, 3000);\r\n  //     console.log(\"calc\", totdays, totals);\r\n  //   }\r\n  // };\r\n\r\n  const handle_tempcalc = (allowsdata) => {\r\n    if (allowsdata) {\r\n      const totbonus = allowsdata\r\n        .filter((r) => r.period === allows_period && r.empid === allows_empid)\r\n        .reduce((acc, item) => {\r\n          if (isNaN(item.jobbonus)) {\r\n            return acc;\r\n          } else {\r\n            return acc + item.jobbonus;\r\n          }\r\n        }, 0);\r\n      const totdiem = allowsdata\r\n        .filter((r) => r.period === allows_period && r.empid === allows_empid)\r\n        .reduce((acc, item) => {\r\n          if (isNaN(item.perdiem)) {\r\n            return acc;\r\n          } else {\r\n            return acc + item.perdiem;\r\n          }\r\n        }, 0);\r\n      const totdays = allowsdata\r\n        .filter((r) => r.period === allows_period && r.empid === allows_empid)\r\n        .reduce((acc, item) => {\r\n          let val = 0;\r\n          if (item.jobbonus > 0 || item.perdiem > 0) {\r\n            val = 1;\r\n          } else {\r\n            val = 0;\r\n          }\r\n          return acc + val;\r\n        }, 0);\r\n      const total = totbonus + totdiem;\r\n\r\n      const data = dailyallows\r\n        .filter((r) => r.period === allows_period && r.empid === allows_empid)\r\n        .map((rec) => {\r\n          return { ...rec };\r\n        });\r\n\r\n      updateDailyAllows({\r\n        id: data[0].id,\r\n        no_of_days: totdays,\r\n        amount: total,\r\n        totaljobbonus: totbonus,\r\n        totalperdiem: totdiem,\r\n      });\r\n      // setTimeout(() => {\r\n      //   setTotals({\r\n      //     totalamount: total,\r\n      //     totalbonus: totbonus,\r\n      //     totaldiem: totdiem,\r\n      //     totaldays: totdays,\r\n      //   });\r\n      // }, 3000);\r\n      // console.log(\"tempcalc\", totdays, totals);\r\n    }\r\n  };\r\n\r\n  // const update_SiteAllowsTotals = () => {\r\n  //   setSiteAllowsTotals({\r\n  //     totalamount: totals.totalamount,\r\n  //     totalbonus: dailyallowsdetls.reduce((acc, item) => {\r\n  //       if (isNaN(item.jobbonus)) {\r\n  //         return acc;\r\n  //       } else {\r\n  //         return acc + item.jobbonus;\r\n  //       }\r\n  //     }, 0),\r\n  //     totaldiem: totals.totaldiem,\r\n  //     totaldays: dailyallowsdetls.reduce((acc, item) => {\r\n  //       let val = 0;\r\n  //       if (item.jobbonus > 0 || item.perdiem > 0) {\r\n  //         val = 1;\r\n  //       } else {\r\n  //         val = 0;\r\n  //       }\r\n  //       return acc + val;\r\n  //     }, 0),\r\n  //   });\r\n  //   console.log(\"update\", siteallowsTotals);\r\n  // };\r\n\r\n  // const add_DailyAllowsDetl = async (data) => {\r\n  //   console.log(\"add\", data);\r\n  //   const { description, amount } = data;\r\n  //   addDailyAllowsDetl({\r\n  //     description: description,\r\n  //     amount: amount,\r\n  //     name: single_dailyallowance.name,\r\n  //     empid: single_dailyallowance.empid,\r\n  //     period: dailyallowance_period,\r\n  //   });\r\n  // };\r\n\r\n  const delete_AllowsDetl = (data, index) => {\r\n    const allowsdata = dailyallowsdetls;\r\n    const { id } = data;\r\n    deleteDailyAllowsDetls(id);\r\n    // toast({\r\n    //   title: \"Site Allowances details record being deleted!\",\r\n    //   status: \"warning\",\r\n    // });\r\n    //recalc\r\n    allowsdata.splice(index, 1);\r\n    handle_tempcalc(allowsdata);\r\n  };\r\n\r\n  //  setAllowsDetlsdata(dailyallowsdetls);\r\n\r\n  // console.log(\"load allows detls\", allowsDetlsdata);\r\n  return (\r\n    <div className={classes.root}>\r\n      {/* <h1>Expenses Claims Application</h1> */}\r\n\r\n      <div style={{ maxWidth: \"75%\", paddingTop: \"5px\" }}>\r\n        {/* <h2>Site Allows Detils Table</h2> */}\r\n        <MaterialTable\r\n          columns={columns}\r\n          data={dailyallowsdetls}\r\n          title=\"Daily Allowances Details\"\r\n          editable={{\r\n            // onRowAdd: (newData) =>\r\n            //   new Promise((resolve, reject) => {\r\n            //     // setTimeout(() => {\r\n            //     //   setAllowsdata([...allowsdata, newData]);\r\n            //     //   resolve();\r\n            //     // }, 1000);\r\n            //   }),\r\n            onRowUpdate: (newData, oldData) =>\r\n              new Promise((resolve, reject) => {\r\n                setTimeout(() => {\r\n                  const dataUpdate = [...dailyallowsdetls];\r\n                  const index = oldData.tableData.id;\r\n                  dataUpdate[index] = newData;\r\n                  //setDailyAllowsData([...dataUpdate]);\r\n\r\n                  update_AllowsDetls(newData, index);\r\n                  //handle_calc();\r\n                  //setAllowsDetlsTable([...dataUpdate]);\r\n                  //editable = dataUpdate;\r\n                  resolve();\r\n                }, 1000);\r\n              }),\r\n            onRowDelete: (oldData) =>\r\n              new Promise((resolve, reject) => {\r\n                setTimeout(() => {\r\n                  //const dataDelete = [...allowsDetlsTable];\r\n                  const index = oldData.tableData.id;\r\n                  delete_AllowsDetl(oldData, index);\r\n                  //dataDelete.splice(index, 1);\r\n                  //setAllowsDetlsTable([...dataDelete]);\r\n\r\n                  resolve();\r\n                }, 1000);\r\n              }),\r\n          }}\r\n          options={{\r\n            filtering: true,\r\n            selection: false,\r\n            pageSize: 10,\r\n            headerStyle: {\r\n              backgroundColor: \"orange\",\r\n              color: \"primary\",\r\n            },\r\n            showTitle: true,\r\n          }}\r\n          components={{\r\n            Toolbar: (props) => (\r\n              <div>\r\n                <MTableToolbar {...props} />\r\n                <div style={{ padding: \"5px 10px\" }}>\r\n                  {/* <Button\r\n                      type=\"submit\"\r\n                      variant=\"contained\"\r\n                      color=\"secondary\"\r\n                      className={classes.button}\r\n                      onClick={(e) => delete_AllowsDetls(e)}\r\n                    >\r\n                      delete\r\n                    </Button> */}\r\n                  {/* <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    className={classes.button}\r\n                    onClick={(e) => handle_refresh(e)}\r\n                  >\r\n                    re-fresh\r\n                  </Button> */}\r\n                  {/* <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    className={classes.button}\r\n                    onClick={(e) => handle_calc(e)}\r\n                  >\r\n                    re-calc\r\n                  </Button>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    className={classes.button}\r\n                    onClick={(e) => save_AllowsDetls(e)}\r\n                  >\r\n                    Update all\r\n                  </Button> */}\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    className={classes.button}\r\n                    onClick={(e) => submit_AllowsDetls(e)}\r\n                  >\r\n                    Submit <Icon className={classes.rightIcon}>send</Icon>\r\n                  </Button>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    className={classes.button}\r\n                    onClick={(e) => exit_AllowsDetls(e)}\r\n                  >\r\n                    Exit\r\n                  </Button>\r\n\r\n                  <div>\r\n                    <Grid\r\n                      container\r\n                      spacing={0}\r\n                      direction=\"row\"\r\n                      style={{ border: \"1px solid white\" }}\r\n                    >\r\n                      <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                        <TextField\r\n                          label=\"Total Job Bonus\"\r\n                          variant=\"filled\"\r\n                          style={{ width: \"100%\" }}\r\n                          name=\"totalbonus\"\r\n                          value={\r\n                            dailyallows &&\r\n                            dailyallows\r\n                              .filter(\r\n                                (r) =>\r\n                                  r.period === allows_period &&\r\n                                  r.empid === allows_empid\r\n                              )\r\n                              .map((rec) => {\r\n                                return rec.totaljobbonus;\r\n                              })\r\n                          }\r\n                          type=\"currency\"\r\n                          className={classes.textField}\r\n                          InputLabelProps={{\r\n                            shrink: true,\r\n                          }}\r\n                        ></TextField>\r\n                        <TextField\r\n                          label=\"Total Diem\"\r\n                          variant=\"filled\"\r\n                          style={{ width: \"100%\" }}\r\n                          name=\"totaldiem\"\r\n                          value={\r\n                            dailyallows &&\r\n                            dailyallows\r\n                              .filter(\r\n                                (r) =>\r\n                                  r.period === allows_period &&\r\n                                  r.empid === allows_empid\r\n                              )\r\n                              .map((rec) => {\r\n                                return rec.totalperdiem;\r\n                              })\r\n                          }\r\n                          type=\"currency\"\r\n                          className={classes.textField}\r\n                          InputLabelProps={{\r\n                            shrink: true,\r\n                          }}\r\n                        ></TextField>\r\n\r\n                        <TextField\r\n                          label=\"No of Days\"\r\n                          variant=\"filled\"\r\n                          style={{ width: \"100%\" }}\r\n                          name=\"totaldays\"\r\n                          value={\r\n                            dailyallows &&\r\n                            dailyallows\r\n                              .filter(\r\n                                (r) =>\r\n                                  r.period === allows_period &&\r\n                                  r.empid === allows_empid\r\n                              )\r\n                              .map((rec) => {\r\n                                return rec.no_of_days;\r\n                              })\r\n                          }\r\n                          type=\"numeric\"\r\n                          className={classes.textField}\r\n                          InputLabelProps={{\r\n                            shrink: true,\r\n                          }}\r\n                        ></TextField>\r\n                        <TextField\r\n                          label=\"Total Amount\"\r\n                          variant=\"filled\"\r\n                          style={{ width: \"100%\" }}\r\n                          name=\"totalamount\"\r\n                          value={\r\n                            dailyallows &&\r\n                            dailyallows\r\n                              .filter(\r\n                                (r) =>\r\n                                  r.period === allows_period &&\r\n                                  r.empid === allows_empid\r\n                              )\r\n                              .map((rec) => {\r\n                                return rec.amount;\r\n                              })\r\n                          }\r\n                          type=\"currency\"\r\n                          className={classes.textField}\r\n                          InputLabelProps={{\r\n                            shrink: true,\r\n                          }}\r\n                        ></TextField>\r\n                      </div>\r\n                    </Grid>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ),\r\n          }}\r\n        />\r\n      </div>\r\n      <div>\r\n        <AlertDialogBox\r\n          onClose={handleSubmitAlertClose}\r\n          onConfirm={handleOnSubmitConfirm}\r\n          isOpen={isSubmitAlertOpen}\r\n          title=\"Site Allowances Batch\"\r\n        >\r\n          <h2>After submition for approval, no changes can be made.</h2>\r\n          <h2>Are you sure you want to submit ?</h2>\r\n        </AlertDialogBox>\r\n      </div>\r\n      <div>\r\n        <AlertDialogBox\r\n          onClose={handleExitAlertClose}\r\n          onConfirm={handleOnExitConfirm}\r\n          isOpen={isExitAlertOpen}\r\n          title=\"Site Allowances Batch\"\r\n        >\r\n          <h2>Are you sure you want to exit ?</h2>\r\n        </AlertDialogBox>\r\n      </div>\r\n      {/* <div>\r\n        <AlertDialogBox\r\n          onClose={onAlertDeleteClose}\r\n          onConfirm={handleOnAlertDeleteConfirm}\r\n          isOpen={isAlertDeleteOpen}\r\n          title=\"Site Allowances Batch\"\r\n        >\r\n          <h2>Are you sure you want to delete {isRowIndex} ?</h2>\r\n        </AlertDialogBox>\r\n      </div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n    width: 1500,\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n}));\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}