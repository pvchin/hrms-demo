{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-myprojects\\\\hrms-demo\\\\src\\\\components\\\\EmpJobhistory.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport MaterialTable, { MTableToolbar } from \"material-table\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TextField } from \"@material-ui/core\";\nimport { Heading, Modal, ModalOverlay, ModalContent, ModalBody, ModalCloseButton, useDisclosure } from \"@chakra-ui/react\";\nimport { AiFillEdit, AiFillDelete, AiOutlinePlus } from \"react-icons/ai\";\nimport { useRecoilState } from \"recoil\";\nimport { loginLevelState } from \"./data/atomdata\";\nimport { useEmployeesContext } from \"../context/employees_context\";\nimport { useJobhistory } from \"./jobhistory/useJobhistory\";\nimport { useUpdateJobhistory } from \"./jobhistory/useUpdateJobhistory\";\nimport { useAddJobhistory } from \"./jobhistory/useAddJobhistory\";\nimport { useDeleteJobhistory } from \"./jobhistory/useDeleteJobhistory\";\nimport JobhistoryForm from \"./JobhistoryForm\";\nimport { AlertDialogBox } from \"../helpers/AlertDialogBox\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initial_jobhistory = {\n  empid: \"\",\n  name: \"\",\n  designation: \"\",\n  department: \"\",\n  status: \"\",\n  remark: \"\",\n  basicsalary: 0,\n  siteallows: 0,\n  isresign: false\n};\nexport default function Emp_Jobhistory({\n  empid,\n  staffname,\n  basicsalary,\n  siteallows,\n  department,\n  designation,\n  jobhistorydata,\n  setJobhistorydata,\n  handleDialogClose\n}) {\n  _s();\n\n  const classes = useStyles();\n  const {\n    jobhistory,\n    filter,\n    setFilter,\n    setJobId\n  } = useJobhistory(); //const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\n\n  const updateJobhistory = useUpdateJobhistory();\n  const addJobhistory = useAddJobhistory();\n  const deleteJobhistory = useDeleteJobhistory();\n  const [state, setState] = useState({});\n  const [statustype, setStatusType] = useState(\"\");\n  const {\n    editEmployeeID\n  } = useEmployeesContext();\n  const {\n    isOpen: isJobOpen,\n    onOpen: onJobOpen,\n    onClose: onJobClose\n  } = useDisclosure();\n  const {\n    isOpen: isAlertDeleteOpen,\n    onOpen: onAlertDeleteOpen,\n    onClose: onAlertDeleteClose\n  } = useDisclosure();\n  const columns = [{\n    title: \"Designation\",\n    field: \"designation\"\n  }, {\n    title: \"Department\",\n    field: \"department\"\n  }, {\n    title: \"Effective Date\",\n    field: \"effectdate\",\n    type: \"date\",\n    dateSetting: {\n      locale: \"en-GB\"\n    },\n    editComponent: props => /*#__PURE__*/_jsxDEV(TextField, {\n      defaultValue: props.value || new Date(),\n      onChange: e => props.onChange(e.target.value),\n      type: \"date\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: \"Status\",\n    field: \"status\"\n  }, {\n    title: \"Remark\",\n    field: \"remark\"\n  }];\n  useEffect(() => {\n    setJobId(editEmployeeID);\n  }, []);\n\n  const add_Jobhistory = data => {\n    console.log(\"addjob\", data);\n    addJobhistory({ ...data\n    });\n  };\n\n  const delete_Jobhistory = id => {\n    deleteJobhistory(id);\n  };\n\n  const update_Jobhistory = data => {\n    const {\n      id,\n      rec_id,\n      tableData,\n      ...fields\n    } = data;\n    updateJobhistory({\n      id,\n      ...fields\n    });\n  };\n\n  const handleAddJobhistory = () => {\n    const data = { ...initial_jobhistory,\n      name: staffname,\n      empid: empid,\n      basicsalary: basicsalary,\n      siteallows: siteallows,\n      department: department,\n      designation: designation\n    };\n    setState(data);\n    onJobOpen(true);\n  };\n\n  const handleUpdateJobhistory = data => {\n    setState(data);\n    onJobOpen(true);\n  };\n\n  const handleDeleteJobhistory = rowData => {\n    setState(prev => prev = { ...rowData\n    });\n    onAlertDeleteOpen();\n  };\n\n  const handleOnDeleteConfirm = () => {\n    const {\n      id\n    } = state;\n    delete_Jobhistory(id); // toast({\n    //   title: \"Order being deleted!\",\n    //   status: \"warning\",\n    // });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: \"100%\",\n        paddingTop: \"5px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(MaterialTable, {\n        columns: columns,\n        data: jobhistory,\n        title: \"Employment History\",\n        actions: [{\n          icon: () => /*#__PURE__*/_jsxDEV(AiOutlinePlus, {\n            size: \"30px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 27\n          }, this),\n          tooltip: \"Add Record\",\n          isFreeAction: true,\n          onClick: (event, rowData) => {\n            setStatusType(prev => prev = \"add\");\n            handleAddJobhistory(rowData);\n          }\n        }, rowData => ({\n          //disabled: rowData.status !== \"Pending\",\n          icon: () => /*#__PURE__*/_jsxDEV(AiFillEdit, {\n            size: \"30px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 27\n          }, this),\n          tooltip: \"Edit Record\",\n          onClick: (event, rowData) => {\n            setStatusType(prev => prev = \"edit\");\n            handleUpdateJobhistory(rowData);\n          }\n        }), rowData => ({\n          //disabled: rowData.status !== \"Pending\",\n          icon: () => /*#__PURE__*/_jsxDEV(AiFillDelete, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 27\n          }, this),\n          tooltip: \"Delete Record\",\n          onClick: (event, rowData) => {\n            handleDeleteJobhistory(rowData);\n          }\n        })],\n        options: {\n          filtering: true,\n          headerStyle: {\n            backgroundColor: \"orange\",\n            color: \"primary\"\n          },\n          showTitle: true\n        },\n        components: {\n          Toolbar: props => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(MTableToolbar, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this)\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      closeOnOverlayClick: false,\n      isOpen: isJobOpen,\n      onClose: onJobClose,\n      size: \"lg\",\n      children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: /*#__PURE__*/_jsxDEV(JobhistoryForm, {\n            state: state,\n            setState: setState,\n            statustype: statustype,\n            add_Item: add_Jobhistory,\n            update_Item: update_Jobhistory,\n            onJobClose: onJobClose\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AlertDialogBox, {\n      onClose: onAlertDeleteClose,\n      onConfirm: handleOnDeleteConfirm,\n      isOpen: isAlertDeleteOpen,\n      title: \"Delete Employment History\",\n      children: /*#__PURE__*/_jsxDEV(Heading, {\n        size: \"md\",\n        children: \"Are you sure you want to delete this history record ?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Emp_Jobhistory, \"hWInQuPYcTrNX7jB0l22wOYBRGQ=\", false, function () {\n  return [useStyles, useJobhistory, useUpdateJobhistory, useAddJobhistory, useDeleteJobhistory, useEmployeesContext, useDisclosure, useDisclosure];\n});\n\n_c = Emp_Jobhistory;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: 0\n  }\n}));\n\nvar _c;\n\n$RefreshReg$(_c, \"Emp_Jobhistory\");","map":{"version":3,"sources":["D:/react-myprojects/hrms-demo/src/components/EmpJobhistory.js"],"names":["React","useState","useEffect","MaterialTable","MTableToolbar","makeStyles","TextField","Heading","Modal","ModalOverlay","ModalContent","ModalBody","ModalCloseButton","useDisclosure","AiFillEdit","AiFillDelete","AiOutlinePlus","useRecoilState","loginLevelState","useEmployeesContext","useJobhistory","useUpdateJobhistory","useAddJobhistory","useDeleteJobhistory","JobhistoryForm","AlertDialogBox","initial_jobhistory","empid","name","designation","department","status","remark","basicsalary","siteallows","isresign","Emp_Jobhistory","staffname","jobhistorydata","setJobhistorydata","handleDialogClose","classes","useStyles","jobhistory","filter","setFilter","setJobId","updateJobhistory","addJobhistory","deleteJobhistory","state","setState","statustype","setStatusType","editEmployeeID","isOpen","isJobOpen","onOpen","onJobOpen","onClose","onJobClose","isAlertDeleteOpen","onAlertDeleteOpen","onAlertDeleteClose","columns","title","field","type","dateSetting","locale","editComponent","props","value","Date","e","onChange","target","add_Jobhistory","data","console","log","delete_Jobhistory","id","update_Jobhistory","rec_id","tableData","fields","handleAddJobhistory","handleUpdateJobhistory","handleDeleteJobhistory","rowData","prev","handleOnDeleteConfirm","root","maxWidth","paddingTop","icon","tooltip","isFreeAction","onClick","event","filtering","headerStyle","backgroundColor","color","showTitle","Toolbar","theme","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport MaterialTable, { MTableToolbar } from \"material-table\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport {\r\n  Heading,\r\n  Modal,\r\n  ModalOverlay,\r\n  ModalContent,\r\n  ModalBody,\r\n  ModalCloseButton,\r\n  useDisclosure,\r\n} from \"@chakra-ui/react\";\r\nimport { AiFillEdit, AiFillDelete, AiOutlinePlus } from \"react-icons/ai\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loginLevelState } from \"./data/atomdata\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\nimport { useJobhistory } from \"./jobhistory/useJobhistory\";\r\nimport { useUpdateJobhistory } from \"./jobhistory/useUpdateJobhistory\";\r\nimport { useAddJobhistory } from \"./jobhistory/useAddJobhistory\";\r\nimport { useDeleteJobhistory } from \"./jobhistory/useDeleteJobhistory\";\r\nimport JobhistoryForm from \"./JobhistoryForm\";\r\nimport { AlertDialogBox } from \"../helpers/AlertDialogBox\";\r\n\r\nconst initial_jobhistory = {\r\n  empid: \"\",\r\n  name: \"\",\r\n  designation: \"\",\r\n  department: \"\",\r\n  status: \"\",\r\n  remark: \"\",\r\n  basicsalary: 0,\r\n  siteallows: 0,\r\n  isresign: false,\r\n};\r\n\r\nexport default function Emp_Jobhistory({\r\n  empid,\r\n  staffname,\r\n  basicsalary,\r\n  siteallows,\r\n  department,\r\n  designation,\r\n  jobhistorydata,\r\n  setJobhistorydata,\r\n  handleDialogClose,\r\n}) {\r\n  const classes = useStyles();\r\n  const { jobhistory, filter, setFilter, setJobId } = useJobhistory();\r\n  //const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\r\n  const updateJobhistory = useUpdateJobhistory();\r\n  const addJobhistory = useAddJobhistory();\r\n  const deleteJobhistory = useDeleteJobhistory();\r\n  const [state, setState] = useState({});\r\n  const [statustype, setStatusType] = useState(\"\");\r\n  const { editEmployeeID } = useEmployeesContext();\r\n  const {\r\n    isOpen: isJobOpen,\r\n    onOpen: onJobOpen,\r\n    onClose: onJobClose,\r\n  } = useDisclosure();\r\n  const {\r\n    isOpen: isAlertDeleteOpen,\r\n    onOpen: onAlertDeleteOpen,\r\n    onClose: onAlertDeleteClose,\r\n  } = useDisclosure();\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Designation\",\r\n      field: \"designation\",\r\n    },\r\n    {\r\n      title: \"Department\",\r\n      field: \"department\",\r\n    },\r\n    {\r\n      title: \"Effective Date\",\r\n      field: \"effectdate\",\r\n      type: \"date\",\r\n      dateSetting: { locale: \"en-GB\" },\r\n      editComponent: (props) => (\r\n        <TextField\r\n          defaultValue={props.value || new Date()}\r\n          onChange={(e) => props.onChange(e.target.value)}\r\n          type=\"date\"\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: \"Status\",\r\n      field: \"status\",\r\n    },\r\n    {\r\n      title: \"Remark\",\r\n      field: \"remark\",\r\n    },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    setJobId(editEmployeeID);\r\n  }, []);\r\n\r\n  const add_Jobhistory = (data) => {\r\n    console.log(\"addjob\", data);\r\n    addJobhistory({\r\n      ...data,\r\n    });\r\n  };\r\n\r\n  const delete_Jobhistory = (id) => {\r\n    deleteJobhistory(id);\r\n  };\r\n\r\n  const update_Jobhistory = (data) => {\r\n    const { id, rec_id, tableData, ...fields } = data;\r\n    updateJobhistory({ id, ...fields });\r\n  };\r\n\r\n  const handleAddJobhistory = () => {\r\n    const data = {\r\n      ...initial_jobhistory,\r\n      name: staffname,\r\n      empid: empid,\r\n      basicsalary: basicsalary,\r\n      siteallows: siteallows,\r\n      department: department,\r\n      designation: designation,\r\n    };\r\n    setState(data);\r\n    onJobOpen(true);\r\n  };\r\n\r\n  const handleUpdateJobhistory = (data) => {\r\n    setState(data);\r\n    onJobOpen(true);\r\n  };\r\n\r\n  const handleDeleteJobhistory = (rowData) => {\r\n    setState((prev) => (prev = { ...rowData }));\r\n    onAlertDeleteOpen();\r\n  };\r\n\r\n  const handleOnDeleteConfirm = () => {\r\n    const { id } = state;\r\n    delete_Jobhistory(id);\r\n    // toast({\r\n    //   title: \"Order being deleted!\",\r\n    //   status: \"warning\",\r\n    // });\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div style={{ maxWidth: \"100%\", paddingTop: \"5px\" }}>\r\n        <MaterialTable\r\n          columns={columns}\r\n          data={jobhistory}\r\n          title=\"Employment History\"\r\n          actions={[\r\n            {\r\n              icon: () => <AiOutlinePlus size=\"30px\" />,\r\n              tooltip: \"Add Record\",\r\n              isFreeAction: true,\r\n              onClick: (event, rowData) => {\r\n                setStatusType((prev) => (prev = \"add\"));\r\n                handleAddJobhistory(rowData);\r\n              },\r\n            },\r\n            (rowData) => ({\r\n              //disabled: rowData.status !== \"Pending\",\r\n              icon: () => <AiFillEdit size=\"30px\" />,\r\n              tooltip: \"Edit Record\",\r\n              onClick: (event, rowData) => {\r\n                setStatusType((prev) => (prev = \"edit\"));\r\n                handleUpdateJobhistory(rowData);\r\n              },\r\n            }),\r\n            (rowData) => ({\r\n              //disabled: rowData.status !== \"Pending\",\r\n              icon: () => <AiFillDelete />,\r\n              tooltip: \"Delete Record\",\r\n              onClick: (event, rowData) => {\r\n                handleDeleteJobhistory(rowData);\r\n              },\r\n            }),\r\n          ]}\r\n          options={{\r\n            filtering: true,\r\n            headerStyle: {\r\n              backgroundColor: \"orange\",\r\n              color: \"primary\",\r\n            },\r\n            showTitle: true,\r\n          }}\r\n          components={{\r\n            Toolbar: (props) => (\r\n              <div>\r\n                <MTableToolbar {...props} />\r\n              </div>\r\n            ),\r\n          }}\r\n        />\r\n      </div>\r\n      <Modal\r\n        closeOnOverlayClick={false}\r\n        isOpen={isJobOpen}\r\n        onClose={onJobClose}\r\n        size=\"lg\"\r\n      >\r\n        <ModalOverlay />\r\n        <ModalContent>\r\n          {/* <ModalHeader>Product Form</ModalHeader> */}\r\n          <ModalCloseButton />\r\n          <ModalBody>\r\n            <JobhistoryForm\r\n              state={state}\r\n              setState={setState}\r\n              statustype={statustype}\r\n              add_Item={add_Jobhistory}\r\n              update_Item={update_Jobhistory}\r\n              onJobClose={onJobClose}\r\n            />\r\n          </ModalBody>\r\n\r\n          {/* <ModalFooter>\r\n            <Button colorScheme=\"blue\" mr={3} onClick={onProductClose}>\r\n              Close\r\n            </Button>\r\n          </ModalFooter> */}\r\n        </ModalContent>\r\n      </Modal>\r\n      <AlertDialogBox\r\n        onClose={onAlertDeleteClose}\r\n        onConfirm={handleOnDeleteConfirm}\r\n        isOpen={isAlertDeleteOpen}\r\n        title=\"Delete Employment History\"\r\n      >\r\n        <Heading size=\"md\">\r\n          Are you sure you want to delete this history record ?\r\n        </Heading>\r\n      </AlertDialogBox>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n  },\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}