{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-myprojects\\\\hrms-demo\\\\src\\\\components\\\\DailyAllowancesAddPeriod.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { differenceInDays, addDays } from \"date-fns\";\nimport { Heading } from \"@chakra-ui/react\";\nimport { useCustomToast } from \"../helpers/useCustomToast\";\nimport clsx from \"clsx\";\nimport { Button, Paper, Grid, Icon, TextField } from \"@material-ui/core\";\nimport { useRecoilState } from \"recoil\";\nimport { siteallowsState, loginLevelState } from \"./data/atomdata\";\n//import { useDailyAllowancesContext } from \"../context/dailyallowances_context\";\nimport { useDailyAllows } from \"./dailyallows/useDailyAllows\";\nimport { useAddDailyAllows } from \"./dailyallows/useAddDailyAllows\";\n//import { useDailyAllowsDetls } from \"./dailyallowsdetls/useDailyAllowsDetls\";\nimport { useAddDailyAllowsDetls } from \"./dailyallowsdetls/useAddDailyAllowsDetls\";\n\n//const drawerWidth = 240;\n//const selectYear = [{ name: \"2021\" }, { name: \"2022\" }];\n// const selectMonth = [\n//   { name: \"January\" },\n//   { name: \"February\" },\n//   { name: \"March\" },\n//   { name: \"April\" },\n//   { name: \"May\" },\n//   { name: \"June\" },\n// ];\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DailyAllowancesAddPeriod = _ref => {\n  let {\n    handleDialogClose\n  } = _ref;\n  let date = new Date();\n  //let longMonth = date.toLocaleString(\"en-us\", { month: \"long\" });\n  //console.log(\"date\", date, longMonth);\n  const classes = useStyles();\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\n  const toast = useCustomToast();\n  const {\n    dailyallows,\n    setDailyAllowsId\n  } = useDailyAllows();\n  //const { dailyallowsdetls } = useDailyAllowsDetls();\n  const addDailyAllows = useAddDailyAllows();\n  const addDailyAllowsDetls = useAddDailyAllowsDetls();\n  const [input, setInput] = useRecoilState(siteallowsState);\n  const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\n  //const [allowsPeriod, setAllowsPeriod] = useState(\"\");\n  //const [alert, setAlert] = useState(false);\n  const [error, setError] = useState(false);\n  // const { dailyallowances, addDailyAllowance, addDailyAllowsDetl } =\n  //   useDailyAllowancesContext();\n  // function daysInMonth(month, year) {\n  //   return new Date(year, month, 0).getDate();\n  // }\n\n  useEffect(() => {\n    setInput({\n      ...input,\n      empid: loginLevel.loginUserId,\n      name: loginLevel.loginUser,\n      jobbonus: loginLevel.siteallows_fee,\n      perdiem: loginLevel.perdiem_fee,\n      manager: loginLevel.reporting_to,\n      client: \"\"\n    });\n    setDailyAllowsId(loginLevel.loginUserId);\n  }, []);\n\n  // const periodExists = (data) => {\n  //   console.log('add period', data)\n  //   return dailyallows.some(function (el) {\n  //     return el.period === data && el.empid === loginLevel.loginUserId;\n  //   });\n  // };\n\n  const periodExists = data => {\n    var lExist = false;\n    const startday = parseInt(data.substring(8, 10));\n    const endday = parseInt(data.substring(11, 13));\n    const existdata = dailyallows.filter(rec => rec.period.toLowerCase().match(data.substring(0, 8)));\n    //console.log(\"existdata\", existdata);\n    if (existdata.length > 0) {\n      existdata.forEach(rec => {\n        const fromday = parseInt(rec.period.substring(8, 10));\n        const today = parseInt(rec.period.substring(11, 13));\n        if (startday >= fromday && startday <= today) {\n          lExist = true;\n        }\n        if (endday >= fromday && endday <= today) {\n          lExist = true;\n        }\n      });\n    }\n    return lExist;\n  };\n  const buildSiteAllows = () => {\n    const period = input.fromdate.substring(0, 4) + \"-\" + input.fromdate.substring(5, 7) + \"-\" + input.fromdate.substring(8, 10) + \"/\" + input.todate.substring(8, 10);\n    const isExist = periodExists(period);\n    //console.log(\"isexist\", isExist);\n    if (isExist) {\n      toast({\n        title: \"Site Allowance period is existed!\",\n        status: \"warning\"\n      });\n      // setError(true);\n      return null;\n    }\n\n    // build siteallowsbatch\n\n    const diffInDays = differenceInDays(new Date(input.todate), new Date(input.fromdate));\n    let amount = 0,\n      jobbonus = 0,\n      perdiem = 0;\n    for (let i = 0; i <= diffInDays; i++) {\n      jobbonus = jobbonus + Number(input.jobbonus);\n      perdiem = perdiem + Number(input.perdiem);\n      amount = amount + Number(input.jobbonus) + Number(input.perdiem);\n      const data = addDays(new Date(input.fromdate), i);\n      addDailyAllowsDetls({\n        empid: loginLevel.loginUserId,\n        name: loginLevel.loginUser,\n        period: period,\n        date: data,\n        district: input.district,\n        typeoperation: input.typeoperation,\n        client: input.client,\n        location: input.location,\n        jobno: input.jobno,\n        crewoperation: input.crewoperation,\n        jobbonus: input.jobbonus,\n        perdiem: input.perdiem,\n        status: \"Pending\"\n      });\n    }\n    //add daily allowances batch\n    addDailyAllows({\n      period: period,\n      location: input.location,\n      manager: input.manager,\n      name: loginLevel.loginUser,\n      empid: loginLevel.loginUserId,\n      status: \"Pending\",\n      no_of_days: diffInDays + 1,\n      amount: amount,\n      totaljobbonus: jobbonus,\n      totalperdiem: perdiem,\n      fromdate: input.fromdate,\n      todate: input.todate\n    });\n\n    // dailyallowances.push({\n    //   period: period,\n    //   location: input.location,\n    //   manager: input.manager,\n    //   name: loginLevel.loginUser,\n    //   empid: loginLevel.loginUserId,\n    //   status: \"Pending\",\n    //   no_of_days: diffInDays,\n    //   amount: amount,\n    // });\n    handleDialogClose();\n  };\n  const handleChange = e => {\n    e.preventDefault();\n    const {\n      name,\n      type,\n      value\n    } = e.target;\n    const val = type === \"number\" ? parseFloat(value) : value;\n    setInput({\n      ...input,\n      [name]: val\n    });\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    const period = input.fromdate.substring(0, 4) + \"-\" + input.fromdate.substring(5, 7);\n    setInput({\n      ...input,\n      period: period\n    });\n    buildSiteAllows();\n  };\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    className: fixedHeightPaper,\n    style: {\n      backgroundColor: \"secondary\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 0,\n        direction: \"row\",\n        alignItems: \"center\",\n        justify: \"center\",\n        style: {\n          border: \"1px solid white\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Heading, {\n          as: \"h2\",\n          size: \"lg\",\n          color: \"blue\",\n          p: 5,\n          children: \"Build Site Allowances\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 0,\n        direction: \"row\",\n        alignItems: \"center\",\n        justify: \"center\",\n        style: {\n          border: \"1px solid white\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            sm: 12,\n            style: {\n              border: \"1px solid white\"\n            },\n            align: \"left\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"From Date\",\n                variant: \"filled\",\n                required: true,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"fromdate\",\n                value: input.fromdate,\n                type: \"date\",\n                className: classes.textField,\n                onChange: e => handleChange(e),\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"To Date\",\n                variant: \"filled\",\n                required: true,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"todate\",\n                value: input.todate,\n                type: \"date\",\n                className: classes.textField,\n                onChange: e => handleChange(e),\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Manager\",\n                variant: \"filled\",\n                required: true,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"manager\",\n                value: input.manager,\n                className: classes.textField,\n                onChange: e => handleChange(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Location/Rig\",\n                variant: \"filled\",\n                required: true,\n                value: input.location,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"location\",\n                className: classes.textField,\n                onChange: e => handleChange(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Operation Type\",\n                variant: \"filled\",\n                required: true,\n                value: input.typeoperation,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"typeoperation\",\n                className: classes.textField,\n                onChange: e => handleChange(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Client\",\n                variant: \"filled\",\n                required: true,\n                value: input.client,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"client\",\n                className: classes.textField,\n                onChange: e => handleChange(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Ticket No/Job No\",\n                variant: \"filled\",\n                required: true,\n                value: input.jobno,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"jobno\",\n                className: classes.textField,\n                onChange: e => handleChange(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Operation Role\",\n                variant: \"filled\",\n                required: true,\n                value: input.creqoperation,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"crewoperation\",\n                className: classes.textField,\n                onChange: e => handleChange(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"row\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Job Bonus\",\n                variant: \"filled\",\n                required: true,\n                value: input.jobbonus,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"jobbonus\",\n                type: \"number\",\n                className: classes.textField,\n                onChange: e => handleChange(e),\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Per Diem\",\n                variant: \"filled\",\n                required: true,\n                value: input.perdiem,\n                style: {\n                  width: \"100%\"\n                },\n                name: \"perdiem\",\n                type: \"number\",\n                className: classes.textField,\n                onChange: e => handleChange(e),\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 0,\n        direction: \"row\",\n        alignItems: \"center\",\n        justify: \"center\",\n        style: {\n          border: \"1px solid white\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            className: classes.button,\n            children: [\"Build \", /*#__PURE__*/_jsxDEV(Icon, {\n              className: classes.rightIcon,\n              children: \"send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: error && toast({\n            title: \"Period already existed!\",\n            status: \"warning\"\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, this);\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  button: {\n    margin: theme.spacing(1)\n  },\n  container: {\n    margin: 0,\n    padding: 0,\n    width: \"80vw\",\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill,250px)\",\n    gridAutoRows: \"10px\",\n    position: \"absolute\",\n    left: \"50%\",\n    transform: \"translateX(-50%)\",\n    justifyContent: \"center\",\n    backgroundColor: \"primary\"\n  },\n  fixedHeight: {\n    height: 800\n  },\n  paper: {\n    padding: theme.spacing(0),\n    // display: \"flex\",\n    display: \"flex\",\n    overflow: \"auto\",\n    flexDirection: \"column\",\n    border: \"1px solid\",\n    width: \"100%\",\n    color: \"primary\",\n    bcakgroundColor: \"black\"\n  },\n  card: {\n    backgroundColor: \"black\"\n  },\n  section: {\n    width: \"95vw\",\n    margin: \"5rem auto\",\n    maxWidth: \"var(--max-width)\"\n  },\n  underline: {\n    width: \"5rem\",\n    height: \"0.25rem\",\n    marginBottom: \"1.25rem\",\n    background: \"var(--clr-primary-5)\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\"\n  },\n  title: {\n    marginbottom: \"4rem\",\n    textAlign: \"center\"\n  },\n  jobscenter: {\n    width: \"80vw\",\n    margin: \"0 auto\",\n    maxWidth: \"var(--max-width)\",\n    flexDirection: \"row\"\n  },\n  btncontainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    marginBottom: \"4rem\",\n    flexWrap: \"wrap\"\n  },\n  jobbtn: {\n    background: \"transparent\",\n    borderColor: \"transparent\",\n    textTransform: \"capitalize\",\n    fontSize: \"1.25rem\",\n    letterSpacing: \"var(--spacing)\",\n    margin: \"0 0.5rem\",\n    transition: \"var(--transition)\",\n    cursor: \"pointer\",\n    padding: \"0.25rem 0\",\n    lineHeight: \"1\",\n    outlineColor: \"var(--clr-primary-10)\",\n    \"&:hover\": {\n      color: \"var(--clr-primary-5)\",\n      boxShadow: \"0 2px var(--clr-primary-5)\"\n    }\n  },\n  activebtn: {\n    color: \"var(--clr-primary-5)\",\n    boxShadow: \"0 2px var(--clr-primary-5)\"\n  },\n  jobinfo: {\n    fontWeight: \"400\"\n  },\n  rightIcon: {\n    marginLeft: theme.spacing(1)\n  },\n  formLabel: {\n    fontSize: 12,\n    textAlign: \"left\",\n    marginLeft: 8,\n    marginTop: 8\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200\n  }\n}));\nexport default DailyAllowancesAddPeriod;","map":{"version":3,"names":["React","useState","useEffect","makeStyles","differenceInDays","addDays","Heading","useCustomToast","clsx","Button","Paper","Grid","Icon","TextField","useRecoilState","siteallowsState","loginLevelState","useDailyAllows","useAddDailyAllows","useAddDailyAllowsDetls","DailyAllowancesAddPeriod","handleDialogClose","date","Date","classes","useStyles","fixedHeightPaper","paper","fixedHeight","toast","dailyallows","setDailyAllowsId","addDailyAllows","addDailyAllowsDetls","input","setInput","loginLevel","setLoginLevel","error","setError","empid","loginUserId","name","loginUser","jobbonus","siteallows_fee","perdiem","perdiem_fee","manager","reporting_to","client","periodExists","data","lExist","startday","parseInt","substring","endday","existdata","filter","rec","period","toLowerCase","match","length","forEach","fromday","today","buildSiteAllows","fromdate","todate","isExist","title","status","diffInDays","amount","i","Number","district","typeoperation","location","jobno","crewoperation","no_of_days","totaljobbonus","totalperdiem","handleChange","e","preventDefault","type","value","target","val","parseFloat","handleSubmit","backgroundColor","border","display","flexDirection","width","textField","shrink","creqoperation","button","rightIcon","theme","root","flexGrow","margin","spacing","container","padding","gridTemplateColumns","gridAutoRows","position","left","transform","justifyContent","height","overflow","color","bcakgroundColor","card","section","maxWidth","underline","marginBottom","background","marginLeft","marginRight","marginbottom","textAlign","jobscenter","btncontainer","flexWrap","jobbtn","borderColor","textTransform","fontSize","letterSpacing","transition","cursor","lineHeight","outlineColor","boxShadow","activebtn","jobinfo","fontWeight","formLabel","marginTop"],"sources":["D:/react-myprojects/hrms-demo/src/components/DailyAllowancesAddPeriod.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { differenceInDays, addDays } from \"date-fns\";\r\nimport { Heading } from \"@chakra-ui/react\";\r\nimport { useCustomToast } from \"../helpers/useCustomToast\";\r\nimport clsx from \"clsx\";\r\nimport { Button, Paper, Grid, Icon, TextField } from \"@material-ui/core\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { siteallowsState, loginLevelState } from \"./data/atomdata\";\r\n//import { useDailyAllowancesContext } from \"../context/dailyallowances_context\";\r\nimport { useDailyAllows } from \"./dailyallows/useDailyAllows\";\r\nimport { useAddDailyAllows } from \"./dailyallows/useAddDailyAllows\";\r\n//import { useDailyAllowsDetls } from \"./dailyallowsdetls/useDailyAllowsDetls\";\r\nimport { useAddDailyAllowsDetls } from \"./dailyallowsdetls/useAddDailyAllowsDetls\";\r\n\r\n//const drawerWidth = 240;\r\n//const selectYear = [{ name: \"2021\" }, { name: \"2022\" }];\r\n// const selectMonth = [\r\n//   { name: \"January\" },\r\n//   { name: \"February\" },\r\n//   { name: \"March\" },\r\n//   { name: \"April\" },\r\n//   { name: \"May\" },\r\n//   { name: \"June\" },\r\n// ];\r\n\r\nconst DailyAllowancesAddPeriod = ({ handleDialogClose }) => {\r\n  let date = new Date();\r\n  //let longMonth = date.toLocaleString(\"en-us\", { month: \"long\" });\r\n  //console.log(\"date\", date, longMonth);\r\n  const classes = useStyles();\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n  const toast = useCustomToast();\r\n  const { dailyallows, setDailyAllowsId } = useDailyAllows();\r\n  //const { dailyallowsdetls } = useDailyAllowsDetls();\r\n  const addDailyAllows = useAddDailyAllows();\r\n  const addDailyAllowsDetls = useAddDailyAllowsDetls();\r\n  const [input, setInput] = useRecoilState(siteallowsState);\r\n  const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\r\n  //const [allowsPeriod, setAllowsPeriod] = useState(\"\");\r\n  //const [alert, setAlert] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  // const { dailyallowances, addDailyAllowance, addDailyAllowsDetl } =\r\n  //   useDailyAllowancesContext();\r\n  // function daysInMonth(month, year) {\r\n  //   return new Date(year, month, 0).getDate();\r\n  // }\r\n\r\n  useEffect(() => {\r\n    setInput({\r\n      ...input,\r\n      empid: loginLevel.loginUserId,\r\n      name: loginLevel.loginUser,\r\n      jobbonus: loginLevel.siteallows_fee,\r\n      perdiem: loginLevel.perdiem_fee,\r\n      manager: loginLevel.reporting_to,\r\n      client: \"\",\r\n    });\r\n    setDailyAllowsId(loginLevel.loginUserId);\r\n  }, []);\r\n\r\n  // const periodExists = (data) => {\r\n  //   console.log('add period', data)\r\n  //   return dailyallows.some(function (el) {\r\n  //     return el.period === data && el.empid === loginLevel.loginUserId;\r\n  //   });\r\n  // };\r\n\r\n  const periodExists = (data) => {\r\n    var lExist = false;\r\n    const startday = parseInt(data.substring(8, 10));\r\n    const endday = parseInt(data.substring(11, 13));\r\n    const existdata = dailyallows.filter((rec) =>\r\n      rec.period.toLowerCase().match(data.substring(0, 8))\r\n    );\r\n    //console.log(\"existdata\", existdata);\r\n    if (existdata.length > 0) {\r\n      existdata.forEach((rec) => {\r\n        const fromday = parseInt(rec.period.substring(8, 10));\r\n        const today = parseInt(rec.period.substring(11, 13));\r\n        if (startday >= fromday && startday <= today) {\r\n          lExist = true;\r\n        }\r\n        if (endday >= fromday && endday <= today) {\r\n          lExist = true;\r\n        }\r\n      });\r\n    }\r\n    return lExist;\r\n  };\r\n\r\n  const buildSiteAllows = () => {\r\n    const period =\r\n      input.fromdate.substring(0, 4) +\r\n      \"-\" +\r\n      input.fromdate.substring(5, 7) +\r\n      \"-\" +\r\n      input.fromdate.substring(8, 10) +\r\n      \"/\" +\r\n      input.todate.substring(8, 10);\r\n\r\n    const isExist = periodExists(period);\r\n    //console.log(\"isexist\", isExist);\r\n    if (isExist) {\r\n      toast({\r\n        title: \"Site Allowance period is existed!\",\r\n        status: \"warning\",\r\n      });\r\n      // setError(true);\r\n      return null;\r\n    }\r\n\r\n    // build siteallowsbatch\r\n\r\n    const diffInDays = differenceInDays(\r\n      new Date(input.todate),\r\n      new Date(input.fromdate)\r\n    );\r\n\r\n    let amount = 0,\r\n      jobbonus = 0,\r\n      perdiem = 0;\r\n    for (let i = 0; i <= diffInDays; i++) {\r\n      jobbonus = jobbonus + Number(input.jobbonus);\r\n      perdiem = perdiem + Number(input.perdiem);\r\n      amount = amount + Number(input.jobbonus) + Number(input.perdiem);\r\n      const data = addDays(new Date(input.fromdate), i);\r\n      addDailyAllowsDetls({\r\n        empid: loginLevel.loginUserId,\r\n        name: loginLevel.loginUser,\r\n        period: period,\r\n        date: data,\r\n        district: input.district,\r\n        typeoperation: input.typeoperation,\r\n        client: input.client,\r\n        location: input.location,\r\n        jobno: input.jobno,\r\n        crewoperation: input.crewoperation,\r\n        jobbonus: input.jobbonus,\r\n        perdiem: input.perdiem,\r\n        status: \"Pending\",\r\n      });\r\n    }\r\n    //add daily allowances batch\r\n    addDailyAllows({\r\n      period: period,\r\n      location: input.location,\r\n      manager: input.manager,\r\n      name: loginLevel.loginUser,\r\n      empid: loginLevel.loginUserId,\r\n      status: \"Pending\",\r\n      no_of_days: diffInDays + 1,\r\n      amount: amount,\r\n      totaljobbonus: jobbonus,\r\n      totalperdiem: perdiem,\r\n      fromdate: input.fromdate,\r\n      todate: input.todate,\r\n    });\r\n\r\n    // dailyallowances.push({\r\n    //   period: period,\r\n    //   location: input.location,\r\n    //   manager: input.manager,\r\n    //   name: loginLevel.loginUser,\r\n    //   empid: loginLevel.loginUserId,\r\n    //   status: \"Pending\",\r\n    //   no_of_days: diffInDays,\r\n    //   amount: amount,\r\n    // });\r\n    handleDialogClose();\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n    const { name, type, value } = e.target;\r\n    const val = type === \"number\" ? parseFloat(value) : value;\r\n    setInput({ ...input, [name]: val });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const period =\r\n      input.fromdate.substring(0, 4) + \"-\" + input.fromdate.substring(5, 7);\r\n    setInput({\r\n      ...input,\r\n      period: period,\r\n    });\r\n\r\n    buildSiteAllows();\r\n  };\r\n\r\n  return (\r\n    <Paper\r\n      className={fixedHeightPaper}\r\n      style={{ backgroundColor: \"secondary\" }}\r\n    >\r\n      <form onSubmit={(e) => handleSubmit(e)}>\r\n        <Grid\r\n          container\r\n          spacing={0}\r\n          direction=\"row\"\r\n          alignItems=\"center\"\r\n          justify=\"center\"\r\n          style={{ border: \"1px solid white\" }}\r\n        >\r\n          <Heading as=\"h2\" size=\"lg\" color=\"blue\" p={5}>\r\n            Build Site Allowances\r\n          </Heading>\r\n        </Grid>\r\n        <Grid\r\n          container\r\n          spacing={0}\r\n          direction=\"row\"\r\n          alignItems=\"center\"\r\n          justify=\"center\"\r\n          style={{ border: \"1px solid white\" }}\r\n        >\r\n          <div>\r\n            <Grid\r\n              item\r\n              sm={12}\r\n              style={{ border: \"1px solid white\" }}\r\n              align=\"left\"\r\n            >\r\n              {/* <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                  label=\"Year\"\r\n                  id=\"margin-normal\"\r\n                  name=\"year\"\r\n                  required\r\n                  defaultValue={input.year}\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                  style={{ width: \"100%\", marginTop: 10, marginLeft: 10 }}\r\n                  error={!!error}\r\n                  helperText={error ? error.message : null}\r\n                  select\r\n                >\r\n                  {selectYear.map((item) => {\r\n                    return <MenuItem value={item.name}>{item.name}</MenuItem>;\r\n                  })}\r\n                </TextField>\r\n                <TextField\r\n                  label=\"Month\"\r\n                  id=\"margin-normal\"\r\n                  name=\"month\"\r\n                  required\r\n                  defaultValue={input.month}\r\n                  style={{ width: \"100%\", marginTop: 10, marginLeft: 0 }}\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                  error={!!error}\r\n                  helperText={error ? error.message : null}\r\n                  select\r\n                >\r\n                  {selectMonth.map((item) => {\r\n                    return <MenuItem value={item.name}>{item.name}</MenuItem>;\r\n                  })}\r\n                </TextField>\r\n              </div> */}\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                  label=\"From Date\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"fromdate\"\r\n                  value={input.fromdate}\r\n                  type=\"date\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                ></TextField>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                  label=\"To Date\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"todate\"\r\n                  value={input.todate}\r\n                  type=\"date\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                ></TextField>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                {/* <TextField\r\n                  label=\"Period\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"period\"\r\n                  value={input.period}\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                ></TextField> */}\r\n                {/* <Divider className={classes.divider} /> */}\r\n                <TextField\r\n                  label=\"Manager\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"manager\"\r\n                  value={input.manager}\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                ></TextField>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                {/* <TextField\r\n                  label=\"District\"\r\n                  variant=\"filled\"\r\n                  //required\r\n                  value={input.district}\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"district\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                ></TextField> */}\r\n                <TextField\r\n                  label=\"Location/Rig\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  value={input.location}\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"location\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                ></TextField>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                  label=\"Operation Type\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  value={input.typeoperation}\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"typeoperation\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                ></TextField>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                  label=\"Client\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  value={input.client}\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"client\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                ></TextField>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                  label=\"Ticket No/Job No\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  value={input.jobno}\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"jobno\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                ></TextField>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                  label=\"Operation Role\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  value={input.creqoperation}\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"crewoperation\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                ></TextField>\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <TextField\r\n                  label=\"Job Bonus\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  value={input.jobbonus}\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"jobbonus\"\r\n                  type=\"number\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                ></TextField>\r\n                <TextField\r\n                  label=\"Per Diem\"\r\n                  variant=\"filled\"\r\n                  required\r\n                  value={input.perdiem}\r\n                  style={{ width: \"100%\" }}\r\n                  name=\"perdiem\"\r\n                  type=\"number\"\r\n                  className={classes.textField}\r\n                  onChange={(e) => handleChange(e)}\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                ></TextField>\r\n              </div>\r\n            </Grid>\r\n          </div>\r\n        </Grid>\r\n        <Grid\r\n          container\r\n          spacing={0}\r\n          direction=\"row\"\r\n          alignItems=\"center\"\r\n          justify=\"center\"\r\n          style={{ border: \"1px solid white\" }}\r\n        >\r\n          <div>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.button}\r\n            >\r\n              Build <Icon className={classes.rightIcon}>send</Icon>\r\n            </Button>\r\n          </div>\r\n          <div>\r\n            {error &&\r\n              toast({\r\n                title: \"Period already existed!\",\r\n                status: \"warning\",\r\n              })}\r\n          </div>\r\n        </Grid>\r\n      </form>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  container: {\r\n    margin: 0,\r\n    padding: 0,\r\n    width: \"80vw\",\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fill,250px)\",\r\n    gridAutoRows: \"10px\",\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n    transform: \"translateX(-50%)\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"primary\",\r\n  },\r\n  fixedHeight: {\r\n    height: 800,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(0),\r\n    // display: \"flex\",\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    border: \"1px solid\",\r\n    width: \"100%\",\r\n    color: \"primary\",\r\n    bcakgroundColor: \"black\",\r\n  },\r\n  card: {\r\n    backgroundColor: \"black\",\r\n  },\r\n  section: {\r\n    width: \"95vw\",\r\n    margin: \"5rem auto\",\r\n    maxWidth: \"var(--max-width)\",\r\n  },\r\n  underline: {\r\n    width: \"5rem\",\r\n    height: \"0.25rem\",\r\n    marginBottom: \"1.25rem\",\r\n    background: \"var(--clr-primary-5)\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n  },\r\n  title: {\r\n    marginbottom: \"4rem\",\r\n    textAlign: \"center\",\r\n  },\r\n  jobscenter: {\r\n    width: \"80vw\",\r\n    margin: \"0 auto\",\r\n    maxWidth: \"var(--max-width)\",\r\n    flexDirection: \"row\",\r\n  },\r\n  btncontainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n    marginBottom: \"4rem\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  jobbtn: {\r\n    background: \"transparent\",\r\n    borderColor: \"transparent\",\r\n    textTransform: \"capitalize\",\r\n    fontSize: \"1.25rem\",\r\n    letterSpacing: \"var(--spacing)\",\r\n    margin: \"0 0.5rem\",\r\n    transition: \"var(--transition)\",\r\n    cursor: \"pointer\",\r\n    padding: \"0.25rem 0\",\r\n    lineHeight: \"1\",\r\n    outlineColor: \"var(--clr-primary-10)\",\r\n    \"&:hover\": {\r\n      color: \"var(--clr-primary-5)\",\r\n      boxShadow: \"0 2px var(--clr-primary-5)\",\r\n    },\r\n  },\r\n  activebtn: {\r\n    color: \"var(--clr-primary-5)\",\r\n    boxShadow: \"0 2px var(--clr-primary-5)\",\r\n  },\r\n  jobinfo: {\r\n    fontWeight: \"400\",\r\n  },\r\n  rightIcon: {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  formLabel: {\r\n    fontSize: 12,\r\n    textAlign: \"left\",\r\n    marginLeft: 8,\r\n    marginTop: 8,\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 200,\r\n  },\r\n}));\r\n\r\nexport default DailyAllowancesAddPeriod;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}