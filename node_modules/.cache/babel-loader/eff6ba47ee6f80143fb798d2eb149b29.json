{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _format = _interopRequireDefault(require(\"date-fns/format\"));\nvar _2 = require(\"./\");\nvar DataManager = /*#__PURE__*/function () {\n  function DataManager() {\n    var _this = this;\n    (0, _classCallCheck2[\"default\"])(this, DataManager);\n    (0, _defineProperty2[\"default\"])(this, \"applyFilters\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySearch\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySort\", false);\n    (0, _defineProperty2[\"default\"])(this, \"currentPage\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"detailPanelType\", \"multiple\");\n    (0, _defineProperty2[\"default\"])(this, \"lastDetailPanelRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"lastEditingRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"orderBy\", -1);\n    (0, _defineProperty2[\"default\"])(this, \"orderDirection\", \"\");\n    (0, _defineProperty2[\"default\"])(this, \"pageSize\", 5);\n    (0, _defineProperty2[\"default\"])(this, \"paging\", true);\n    (0, _defineProperty2[\"default\"])(this, \"parentFunc\", null);\n    (0, _defineProperty2[\"default\"])(this, \"searchText\", \"\");\n    (0, _defineProperty2[\"default\"])(this, \"selectedCount\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treeDataMaxLevel\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"groupedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"defaultExpanded\", false);\n    (0, _defineProperty2[\"default\"])(this, \"data\", []);\n    (0, _defineProperty2[\"default\"])(this, \"columns\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filteredData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"searchedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"groupedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"sortedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"pagedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"renderData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filtered\", false);\n    (0, _defineProperty2[\"default\"])(this, \"searched\", false);\n    (0, _defineProperty2[\"default\"])(this, \"grouped\", false);\n    (0, _defineProperty2[\"default\"])(this, \"treefied\", false);\n    (0, _defineProperty2[\"default\"])(this, \"sorted\", false);\n    (0, _defineProperty2[\"default\"])(this, \"paged\", false);\n    (0, _defineProperty2[\"default\"])(this, \"rootGroupsIndex\", {});\n    (0, _defineProperty2[\"default\"])(this, \"startCellEditable\", function (rowData, columnDef) {\n      rowData.tableData.editCellList = [].concat((0, _toConsumableArray2[\"default\"])(rowData.tableData.editCellList || []), [columnDef]);\n    });\n    (0, _defineProperty2[\"default\"])(this, \"finishCellEditable\", function (rowData, columnDef) {\n      if (rowData.tableData.editCellList) {\n        var index = rowData.tableData.editCellList.findIndex(function (c) {\n          return c.tableData.id === columnDef.tableData.id;\n        });\n        if (index !== -1) {\n          rowData.tableData.editCellList.splice(index, 1);\n        }\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"expandTreeForNodes\", function (data) {\n      data.forEach(function (row) {\n        var currentRow = row;\n        while (_this.parentFunc(currentRow, _this.data)) {\n          var parent = _this.parentFunc(currentRow, _this.data);\n          if (parent) {\n            parent.tableData.isTreeExpanded = true;\n          }\n          currentRow = parent;\n        }\n      });\n    });\n    (0, _defineProperty2[\"default\"])(this, \"findDataByPath\", function (renderData, path) {\n      if (_this.isDataType(\"tree\")) {\n        var node = path.reduce(function (result, current) {\n          return result && result.tableData && result.tableData.childRows && result.tableData.childRows[current];\n        }, {\n          tableData: {\n            childRows: renderData\n          }\n        });\n        return node;\n      } else {\n        var data = {\n          groups: renderData\n        };\n        var _node = path.reduce(function (result, current) {\n          if (result.groups.length > 0) {\n            return result.groups[current];\n          } else if (result.data) {\n            return result.data[current];\n          } else {\n            return undefined;\n          }\n        }, data);\n        return _node;\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getFieldValue\", function (rowData, columnDef) {\n      var lookup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var value = typeof rowData[columnDef.field] !== \"undefined\" ? rowData[columnDef.field] : (0, _2.byString)(rowData, columnDef.field);\n      if (columnDef.lookup && lookup) {\n        value = columnDef.lookup[value];\n      }\n      return value;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getRenderState\", function () {\n      if (_this.filtered === false) {\n        _this.filterData();\n      }\n      if (_this.searched === false) {\n        _this.searchData();\n      }\n      if (_this.grouped === false && _this.isDataType(\"group\")) {\n        _this.groupData();\n      }\n      if (_this.treefied === false && _this.isDataType(\"tree\")) {\n        _this.treefyData();\n      }\n      if (_this.sorted === false) {\n        _this.sortData();\n      }\n      if (_this.paged === false) {\n        _this.pageData();\n      }\n      return {\n        columns: _this.columns,\n        currentPage: _this.currentPage,\n        data: _this.sortedData,\n        lastEditingRow: _this.lastEditingRow,\n        orderBy: _this.orderBy,\n        orderDirection: _this.orderDirection,\n        originalData: _this.data,\n        pageSize: _this.pageSize,\n        renderData: _this.pagedData,\n        searchText: _this.searchText,\n        selectedCount: _this.selectedCount,\n        treefiedDataLength: _this.treefiedDataLength,\n        treeDataMaxLevel: _this.treeDataMaxLevel,\n        groupedDataLength: _this.groupedDataLength\n      };\n    });\n    (0, _defineProperty2[\"default\"])(this, \"filterData\", function () {\n      _this.searched = _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.filteredData = (0, _toConsumableArray2[\"default\"])(_this.data);\n      if (_this.applyFilters) {\n        _this.columns.filter(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        }).forEach(function (columnDef) {\n          var lookup = columnDef.lookup,\n            type = columnDef.type,\n            tableData = columnDef.tableData;\n          if (columnDef.customFilterAndSearch) {\n            _this.filteredData = _this.filteredData.filter(function (row) {\n              return !!columnDef.customFilterAndSearch(tableData.filterValue, row, columnDef);\n            });\n          } else {\n            if (lookup) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef, false);\n                return !tableData.filterValue || tableData.filterValue.length === 0 || tableData.filterValue.indexOf(value !== undefined && value !== null && value.toString()) > -1;\n              });\n            } else if (type === \"numeric\") {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                return value + \"\" === tableData.filterValue;\n              });\n            } else if (type === \"boolean\" && tableData.filterValue) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                return value && tableData.filterValue === \"checked\" || !value && tableData.filterValue === \"unchecked\";\n              });\n            } else if ([\"date\", \"datetime\"].includes(type)) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                var currentDate = value ? new Date(value) : null;\n                if (currentDate && currentDate.toString() !== \"Invalid Date\") {\n                  var selectedDate = tableData.filterValue;\n                  var currentDateToCompare = \"\";\n                  var selectedDateToCompare = \"\";\n                  if (type === \"date\") {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, \"MM/dd/yyyy\");\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, \"MM/dd/yyyy\");\n                  } else if (type === \"datetime\") {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, \"MM/dd/yyyy - HH:mm\");\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, \"MM/dd/yyyy - HH:mm\");\n                  }\n                  return currentDateToCompare === selectedDateToCompare;\n                }\n                return true;\n              });\n            } else if (type === \"time\") {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                var currentHour = value || null;\n                if (currentHour) {\n                  var selectedHour = tableData.filterValue;\n                  var currentHourToCompare = (0, _format[\"default\"])(selectedHour, \"HH:mm\");\n                  return currentHour === currentHourToCompare;\n                }\n                return true;\n              });\n            } else {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n                return value && value.toString().toUpperCase().includes(tableData.filterValue.toUpperCase());\n              });\n            }\n          }\n        });\n      }\n      _this.filtered = true;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"searchData\", function () {\n      _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.searchedData = (0, _toConsumableArray2[\"default\"])(_this.filteredData);\n      if (_this.searchText && _this.applySearch) {\n        _this.searchedData = _this.searchedData.filter(function (row) {\n          return _this.columns.filter(function (columnDef) {\n            return columnDef.searchable === undefined ? !columnDef.hidden : columnDef.searchable;\n          }).some(function (columnDef) {\n            if (columnDef.customFilterAndSearch) {\n              return !!columnDef.customFilterAndSearch(_this.searchText, row, columnDef);\n            } else if (columnDef.field) {\n              var value = _this.getFieldValue(row, columnDef);\n              if (value) {\n                return value.toString().toUpperCase().includes(_this.searchText.toUpperCase());\n              }\n            }\n          });\n        });\n      }\n      _this.searched = true;\n    });\n  }\n  (0, _createClass2[\"default\"])(DataManager, [{\n    key: \"setData\",\n    value: function setData(data) {\n      var _this2 = this;\n      this.selectedCount = 0;\n      this.data = data.map(function (row, index) {\n        row.tableData = (0, _objectSpread2[\"default\"])({}, row.tableData, {\n          id: index\n        });\n        if (row.tableData.checked) {\n          _this2.selectedCount++;\n        }\n        return row;\n      });\n      this.filtered = false;\n    }\n  }, {\n    key: \"setColumns\",\n    value: function setColumns(columns) {\n      var undefinedWidthColumns = columns.filter(function (c) {\n        return c.width === undefined && !c.hidden;\n      });\n      var usedWidth = [\"0px\"];\n      this.columns = columns.map(function (columnDef, index) {\n        columnDef.tableData = (0, _objectSpread2[\"default\"])({\n          columnOrder: index,\n          filterValue: columnDef.defaultFilter,\n          groupOrder: columnDef.defaultGroupOrder,\n          groupSort: columnDef.defaultGroupSort || \"asc\",\n          width: columnDef.width\n        }, columnDef.tableData, {\n          id: index\n        });\n        if (columnDef.width !== undefined) {\n          if (typeof columnDef.width === \"number\") {\n            usedWidth.push(columnDef.width + \"px\");\n          } else {\n            usedWidth.push(columnDef.width);\n          }\n        }\n        return columnDef;\n      });\n      usedWidth = \"(\" + usedWidth.join(\" + \") + \")\";\n      undefinedWidthColumns.forEach(function (columnDef) {\n        columnDef.tableData.width = \"calc((100% - \".concat(usedWidth, \") / \").concat(undefinedWidthColumns.length, \")\");\n      });\n    }\n  }, {\n    key: \"setDefaultExpanded\",\n    value: function setDefaultExpanded(expanded) {\n      this.defaultExpanded = expanded;\n    }\n  }, {\n    key: \"changeApplySearch\",\n    value: function changeApplySearch(applySearch) {\n      this.applySearch = applySearch;\n      this.searched = false;\n    }\n  }, {\n    key: \"changeApplyFilters\",\n    value: function changeApplyFilters(applyFilters) {\n      this.applyFilters = applyFilters;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeApplySort\",\n    value: function changeApplySort(applySort) {\n      this.applySort = applySort;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changePaging\",\n    value: function changePaging(paging) {\n      this.paging = paging;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeCurrentPage\",\n    value: function changeCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.paged = false;\n    }\n  }, {\n    key: \"changePageSize\",\n    value: function changePageSize(pageSize) {\n      this.pageSize = pageSize;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeParentFunc\",\n    value: function changeParentFunc(parentFunc) {\n      this.parentFunc = parentFunc;\n    }\n  }, {\n    key: \"changeFilterValue\",\n    value: function changeFilterValue(columnId, value) {\n      this.columns[columnId].tableData.filterValue = value;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeRowSelected\",\n    value: function changeRowSelected(checked, path) {\n      var _this3 = this;\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.checked = checked;\n      this.selectedCount = this.selectedCount + (checked ? 1 : -1);\n      var checkChildRows = function checkChildRows(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (childRow) {\n            if (childRow.tableData.checked !== checked) {\n              childRow.tableData.checked = checked;\n              _this3.selectedCount = _this3.selectedCount + (checked ? 1 : -1);\n            }\n            checkChildRows(childRow);\n          });\n        }\n      };\n      checkChildRows(rowData);\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeDetailPanelVisibility\",\n    value: function changeDetailPanelVisibility(path, render) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      if ((rowData.tableData.showDetailPanel || \"\").toString() === render.toString()) {\n        rowData.tableData.showDetailPanel = undefined;\n      } else {\n        rowData.tableData.showDetailPanel = render;\n      }\n      if (this.detailPanelType === \"single\" && this.lastDetailPanelRow && this.lastDetailPanelRow != rowData) {\n        this.lastDetailPanelRow.tableData.showDetailPanel = undefined;\n      }\n      this.lastDetailPanelRow = rowData;\n    }\n  }, {\n    key: \"changeGroupExpand\",\n    value: function changeGroupExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.isExpanded = !rowData.isExpanded;\n    }\n  }, {\n    key: \"changeSearchText\",\n    value: function changeSearchText(searchText) {\n      this.searchText = searchText;\n      this.searched = false;\n      this.currentPage = 0;\n    }\n  }, {\n    key: \"changeRowEditing\",\n    value: function changeRowEditing(rowData, mode) {\n      if (rowData) {\n        rowData.tableData.editing = mode;\n        if (this.lastEditingRow && this.lastEditingRow != rowData) {\n          this.lastEditingRow.tableData.editing = undefined;\n        }\n        if (mode) {\n          this.lastEditingRow = rowData;\n        } else {\n          this.lastEditingRow = undefined;\n        }\n      } else if (this.lastEditingRow) {\n        this.lastEditingRow.tableData.editing = undefined;\n        this.lastEditingRow = undefined;\n      }\n    }\n  }, {\n    key: \"changeAllSelected\",\n    value: function changeAllSelected(checked) {\n      var selectedCount = 0;\n      if (this.isDataType(\"group\")) {\n        var setCheck = function setCheck(data) {\n          data.forEach(function (element) {\n            if (element.groups.length > 0) {\n              setCheck(element.groups);\n            } else {\n              element.data.forEach(function (d) {\n                d.tableData.checked = d.tableData.disabled ? false : checked;\n                selectedCount++;\n              });\n            }\n          });\n        };\n        setCheck(this.groupedData);\n      } else {\n        this.searchedData.map(function (row) {\n          row.tableData.checked = row.tableData.disabled ? false : checked;\n          return row;\n        });\n        selectedCount = this.searchedData.length;\n      }\n      this.selectedCount = checked ? selectedCount : 0;\n    }\n  }, {\n    key: \"changeOrder\",\n    value: function changeOrder(orderBy, orderDirection) {\n      this.orderBy = orderBy;\n      this.orderDirection = orderDirection;\n      this.currentPage = 0;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeGroupOrder\",\n    value: function changeGroupOrder(columnId) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === columnId;\n      });\n      if (column.tableData.groupSort === \"asc\") {\n        column.tableData.groupSort = \"desc\";\n      } else {\n        column.tableData.groupSort = \"asc\";\n      }\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeColumnHidden\",\n    value: function changeColumnHidden(column, hidden) {\n      column.hidden = hidden;\n      column.hiddenByColumnsButton = hidden;\n    }\n  }, {\n    key: \"changeTreeExpand\",\n    value: function changeTreeExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.isTreeExpanded = !rowData.tableData.isTreeExpanded;\n    }\n  }, {\n    key: \"changeDetailPanelType\",\n    value: function changeDetailPanelType(type) {\n      this.detailPanelType = type;\n    }\n  }, {\n    key: \"changeByDrag\",\n    value: function changeByDrag(result) {\n      var start = 0;\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n      if (result.destination.droppableId === \"groups\" && result.source.droppableId === \"groups\") {\n        start = Math.min(result.destination.index, result.source.index);\n        var end = Math.max(result.destination.index, result.source.index);\n        groups = groups.slice(start, end + 1);\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var last = groups.pop();\n          groups.unshift(last);\n        } else {\n          // Take first and add as last\n          var _last = groups.shift();\n          groups.push(_last);\n        }\n      } else if (result.destination.droppableId === \"groups\" && result.source.droppableId === \"headers\") {\n        var newGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        if (newGroup.grouping === false || !newGroup.field) {\n          return;\n        }\n        groups.splice(result.destination.index, 0, newGroup);\n      } else if (result.destination.droppableId === \"headers\" && result.source.droppableId === \"groups\") {\n        var removeGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        removeGroup.tableData.groupOrder = undefined;\n        groups.splice(result.source.index, 1);\n      } else if (result.destination.droppableId === \"headers\" && result.source.droppableId === \"headers\") {\n        start = Math.min(result.destination.index, result.source.index);\n        var _end = Math.max(result.destination.index, result.source.index); // get the effective start and end considering hidden columns\n\n        var sorted = this.columns.sort(function (a, b) {\n          return a.tableData.columnOrder - b.tableData.columnOrder;\n        }).filter(function (column) {\n          return column.tableData.groupOrder === undefined;\n        });\n        var numHiddenBeforeStart = 0;\n        var numVisibleBeforeStart = 0;\n        for (var i = 0; i < sorted.length && numVisibleBeforeStart <= start; i++) {\n          if (sorted[i].hidden) {\n            numHiddenBeforeStart++;\n          } else {\n            numVisibleBeforeStart++;\n          }\n        }\n        var effectiveStart = start + numHiddenBeforeStart;\n        var effectiveEnd = effectiveStart;\n        for (var numVisibleInRange = 0; numVisibleInRange < _end - start && effectiveEnd < sorted.length; effectiveEnd++) {\n          if (!sorted[effectiveEnd].hidden) {\n            numVisibleInRange++;\n          }\n        }\n        var colsToMov = sorted.slice(effectiveStart, effectiveEnd + 1);\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var _last2 = colsToMov.pop();\n          colsToMov.unshift(_last2);\n        } else {\n          // Take first and add as last\n          var _last3 = colsToMov.shift();\n          colsToMov.push(_last3);\n        }\n        for (var _i = 0; _i < colsToMov.length; _i++) {\n          colsToMov[_i].tableData.columnOrder = effectiveStart + _i;\n        }\n        return;\n      } else {\n        return;\n      }\n      for (var _i2 = 0; _i2 < groups.length; _i2++) {\n        groups[_i2].tableData.groupOrder = start + _i2;\n      }\n      this.sorted = this.grouped = false;\n    }\n  }, {\n    key: \"findGroupByGroupPath\",\n    value: function findGroupByGroupPath(renderData, path) {\n      var data = {\n        groups: renderData,\n        groupsIndex: this.rootGroupsIndex\n      };\n      var node = path.reduce(function (result, current) {\n        if (!result) {\n          return undefined;\n        }\n        if (result.groupsIndex[current] !== undefined) {\n          return result.groups[result.groupsIndex[current]];\n        }\n        return undefined; // const group = result.groups.find(a => a.value === current);\n        // return group;\n      }, data);\n      return node;\n    }\n  }, {\n    key: \"isDataType\",\n    value: function isDataType(type) {\n      var dataType = \"normal\";\n      if (this.parentFunc) {\n        dataType = \"tree\";\n      } else if (this.columns.find(function (a) {\n        return a.tableData.groupOrder > -1;\n      })) {\n        dataType = \"group\";\n      }\n      return type === dataType;\n    }\n  }, {\n    key: \"sort\",\n    value: function sort(a, b, type) {\n      if (type === \"numeric\") {\n        return a - b;\n      } else {\n        if (a !== b) {\n          // to find nulls\n          if (!a) return -1;\n          if (!b) return 1;\n        }\n        return a < b ? -1 : a > b ? 1 : 0;\n      }\n    }\n  }, {\n    key: \"sortList\",\n    value: function sortList(list) {\n      var _this4 = this;\n      var columnDef = this.columns.find(function (_) {\n        return _.tableData.id === _this4.orderBy;\n      });\n      var result = list;\n      if (columnDef.customSort) {\n        if (this.orderDirection === \"desc\") {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(b, a, \"row\", \"desc\");\n          });\n        } else {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(a, b, \"row\");\n          });\n        }\n      } else {\n        result = list.sort(this.orderDirection === \"desc\" ? function (a, b) {\n          return _this4.sort(_this4.getFieldValue(b, columnDef), _this4.getFieldValue(a, columnDef), columnDef.type);\n        } : function (a, b) {\n          return _this4.sort(_this4.getFieldValue(a, columnDef), _this4.getFieldValue(b, columnDef), columnDef.type);\n        });\n      }\n      return result;\n    }\n  }, {\n    key: \"groupData\",\n    value: function groupData() {\n      var _this5 = this;\n      this.sorted = this.paged = false;\n      this.groupedDataLength = 0;\n      var tmpData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n      var subData = tmpData.reduce(function (result, currentRow) {\n        var object = result;\n        object = groups.reduce(function (o, colDef) {\n          var value = currentRow[colDef.field] || (0, _2.byString)(currentRow, colDef.field);\n          var group;\n          if (o.groupsIndex[value] !== undefined) {\n            group = o.groups[o.groupsIndex[value]];\n          }\n          if (!group) {\n            var path = [].concat((0, _toConsumableArray2[\"default\"])(o.path || []), [value]);\n            var oldGroup = _this5.findGroupByGroupPath(_this5.groupedData, path) || {\n              isExpanded: typeof _this5.defaultExpanded === \"boolean\" ? _this5.defaultExpanded : false\n            };\n            group = {\n              value: value,\n              groups: [],\n              groupsIndex: {},\n              data: [],\n              isExpanded: oldGroup.isExpanded,\n              path: path\n            };\n            o.groups.push(group);\n            o.groupsIndex[value] = o.groups.length - 1;\n          }\n          return group;\n        }, object);\n        object.data.push(currentRow);\n        _this5.groupedDataLength++;\n        return result;\n      }, {\n        groups: [],\n        groupsIndex: {}\n      });\n      this.groupedData = subData.groups;\n      this.grouped = true;\n      this.rootGroupsIndex = subData.groupsIndex;\n    }\n  }, {\n    key: \"treefyData\",\n    value: function treefyData() {\n      var _this6 = this;\n      this.sorted = this.paged = false;\n      this.data.forEach(function (a) {\n        return a.tableData.childRows = null;\n      });\n      this.treefiedData = [];\n      this.treefiedDataLength = 0;\n      this.treeDataMaxLevel = 0; // if filter or search is enabled, collapse the tree\n\n      if (this.searchText || this.columns.some(function (columnDef) {\n        return columnDef.tableData.filterValue;\n      })) {\n        this.data.forEach(function (row) {\n          row.tableData.isTreeExpanded = false;\n        }); // expand the tree for all nodes present after filtering and searching\n\n        this.expandTreeForNodes(this.searchedData);\n      }\n      var addRow = function addRow(rowData) {\n        rowData.tableData.markedForTreeRemove = false;\n        var parent = _this6.parentFunc(rowData, _this6.data);\n        if (parent) {\n          parent.tableData.childRows = parent.tableData.childRows || [];\n          if (!parent.tableData.childRows.includes(rowData)) {\n            parent.tableData.childRows.push(rowData);\n            _this6.treefiedDataLength++;\n          }\n          addRow(parent);\n          rowData.tableData.path = [].concat((0, _toConsumableArray2[\"default\"])(parent.tableData.path), [parent.tableData.childRows.length - 1]);\n          _this6.treeDataMaxLevel = Math.max(_this6.treeDataMaxLevel, rowData.tableData.path.length);\n        } else {\n          if (!_this6.treefiedData.includes(rowData)) {\n            _this6.treefiedData.push(rowData);\n            _this6.treefiedDataLength++;\n            rowData.tableData.path = [_this6.treefiedData.length - 1];\n          }\n        }\n      }; // Add all rows initially\n\n      this.data.forEach(function (rowData) {\n        addRow(rowData);\n      });\n      var markForTreeRemove = function markForTreeRemove(rowData) {\n        var pointer = _this6.treefiedData;\n        rowData.tableData.path.forEach(function (pathPart) {\n          if (pointer.tableData && pointer.tableData.childRows) {\n            pointer = pointer.tableData.childRows;\n          }\n          pointer = pointer[pathPart];\n        });\n        pointer.tableData.markedForTreeRemove = true;\n      };\n      var traverseChildrenAndUnmark = function traverseChildrenAndUnmark(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (row) {\n            traverseChildrenAndUnmark(row);\n          });\n        }\n        rowData.tableData.markedForTreeRemove = false;\n      }; // for all data rows, restore initial expand if no search term is available and remove items that shouldn't be there\n\n      this.data.forEach(function (rowData) {\n        if (!_this6.searchText && !_this6.columns.some(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        })) {\n          if (rowData.tableData.isTreeExpanded === undefined) {\n            var isExpanded = typeof _this6.defaultExpanded === \"boolean\" ? _this6.defaultExpanded : _this6.defaultExpanded(rowData);\n            rowData.tableData.isTreeExpanded = isExpanded;\n          }\n        }\n        var hasSearchMatchedChildren = rowData.tableData.isTreeExpanded;\n        if (!hasSearchMatchedChildren && _this6.searchedData.indexOf(rowData) < 0) {\n          markForTreeRemove(rowData);\n        }\n      }); // preserve all children of nodes that are matched by search or filters\n\n      this.data.forEach(function (rowData) {\n        if (_this6.searchedData.indexOf(rowData) > -1) {\n          traverseChildrenAndUnmark(rowData);\n        }\n      });\n      var traverseTreeAndDeleteMarked = function traverseTreeAndDeleteMarked(rowDataArray) {\n        for (var i = rowDataArray.length - 1; i >= 0; i--) {\n          var item = rowDataArray[i];\n          if (item.tableData.childRows) {\n            traverseTreeAndDeleteMarked(item.tableData.childRows);\n          }\n          if (item.tableData.markedForTreeRemove) rowDataArray.splice(i, 1);\n        }\n      };\n      traverseTreeAndDeleteMarked(this.treefiedData);\n      this.treefied = true;\n    }\n  }, {\n    key: \"sortData\",\n    value: function sortData() {\n      var _this7 = this;\n      this.paged = false;\n      if (this.isDataType(\"group\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.groupedData);\n        var groups = this.columns.filter(function (col) {\n          return col.tableData.groupOrder > -1;\n        }).sort(function (col1, col2) {\n          return col1.tableData.groupOrder - col2.tableData.groupOrder;\n        });\n        var sortGroups = function sortGroups(list, columnDef) {\n          if (columnDef.customSort) {\n            return list.sort(columnDef.tableData.groupSort === \"desc\" ? function (a, b) {\n              return columnDef.customSort(b.value, a.value, \"group\");\n            } : function (a, b) {\n              return columnDef.customSort(a.value, b.value, \"group\");\n            });\n          } else {\n            return list.sort(columnDef.tableData.groupSort === \"desc\" ? function (a, b) {\n              return _this7.sort(b.value, a.value, columnDef.type);\n            } : function (a, b) {\n              return _this7.sort(a.value, b.value, columnDef.type);\n            });\n          }\n        };\n        this.sortedData = sortGroups(this.sortedData, groups[0]);\n        var sortGroupData = function sortGroupData(list, level) {\n          list.forEach(function (element) {\n            if (element.groups.length > 0) {\n              var column = groups[level];\n              element.groups = sortGroups(element.groups, column);\n              sortGroupData(element.groups, level + 1);\n            } else {\n              if (_this7.orderBy >= 0 && _this7.orderDirection) {\n                element.data = _this7.sortList(element.data);\n              }\n            }\n          });\n        };\n        sortGroupData(this.sortedData, 1);\n      } else if (this.isDataType(\"tree\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.treefiedData);\n        if (this.orderBy != -1) {\n          this.sortedData = this.sortList(this.sortedData);\n          var sortTree = function sortTree(list) {\n            list.forEach(function (item) {\n              if (item.tableData.childRows) {\n                item.tableData.childRows = _this7.sortList(item.tableData.childRows);\n                sortTree(item.tableData.childRows);\n              }\n            });\n          };\n          sortTree(this.sortedData);\n        }\n      } else if (this.isDataType(\"normal\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n        if (this.orderBy != -1 && this.applySort) {\n          this.sortedData = this.sortList(this.sortedData);\n        }\n      }\n      this.sorted = true;\n    }\n  }, {\n    key: \"pageData\",\n    value: function pageData() {\n      this.pagedData = (0, _toConsumableArray2[\"default\"])(this.sortedData);\n      if (this.paging) {\n        var startIndex = this.currentPage * this.pageSize;\n        var endIndex = startIndex + this.pageSize;\n        this.pagedData = this.pagedData.slice(startIndex, endIndex);\n      }\n      this.paged = true;\n    }\n  }]);\n  return DataManager;\n}();\nexports[\"default\"] = DataManager;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_objectSpread2","_toConsumableArray2","_classCallCheck2","_createClass2","_defineProperty2","_format","_2","DataManager","_this","undefined","rowData","columnDef","tableData","editCellList","concat","index","findIndex","c","id","splice","data","forEach","row","currentRow","parentFunc","parent","isTreeExpanded","renderData","path","isDataType","node","reduce","result","current","childRows","groups","_node","length","lookup","arguments","field","byString","filtered","filterData","searched","searchData","grouped","groupData","treefied","treefyData","sorted","sortData","paged","pageData","columns","currentPage","sortedData","lastEditingRow","orderBy","orderDirection","originalData","pageSize","pagedData","searchText","selectedCount","treefiedDataLength","treeDataMaxLevel","groupedDataLength","filteredData","applyFilters","filter","filterValue","type","customFilterAndSearch","getFieldValue","indexOf","toString","includes","currentDate","Date","selectedDate","currentDateToCompare","selectedDateToCompare","currentHour","selectedHour","currentHourToCompare","toUpperCase","searchedData","applySearch","searchable","hidden","some","key","setData","_this2","map","checked","setColumns","undefinedWidthColumns","width","usedWidth","columnOrder","defaultFilter","groupOrder","defaultGroupOrder","groupSort","defaultGroupSort","push","join","setDefaultExpanded","expanded","defaultExpanded","changeApplySearch","changeApplyFilters","changeApplySort","applySort","changePaging","paging","changeCurrentPage","changePageSize","changeParentFunc","changeFilterValue","columnId","changeRowSelected","_this3","findDataByPath","checkChildRows","childRow","changeDetailPanelVisibility","render","showDetailPanel","detailPanelType","lastDetailPanelRow","changeGroupExpand","isExpanded","changeSearchText","changeRowEditing","mode","editing","changeAllSelected","setCheck","element","d","disabled","groupedData","changeOrder","changeGroupOrder","column","find","changeColumnHidden","hiddenByColumnsButton","changeTreeExpand","changeDetailPanelType","changeByDrag","start","col","sort","col1","col2","destination","droppableId","source","Math","min","end","max","slice","last","pop","unshift","_last","shift","newGroup","draggableId","grouping","removeGroup","_end","a","b","numHiddenBeforeStart","numVisibleBeforeStart","i","effectiveStart","effectiveEnd","numVisibleInRange","colsToMov","_last2","_last3","_i","_i2","findGroupByGroupPath","groupsIndex","rootGroupsIndex","dataType","sortList","list","_this4","_","customSort","_this5","tmpData","subData","object","o","colDef","group","oldGroup","_this6","treefiedData","expandTreeForNodes","addRow","markedForTreeRemove","markForTreeRemove","pointer","pathPart","traverseChildrenAndUnmark","hasSearchMatchedChildren","traverseTreeAndDeleteMarked","rowDataArray","item","_this7","sortGroups","sortGroupData","level","sortTree","startIndex","endIndex"],"sources":["D:/react-myprojects/hrms-demo/node_modules/material-table/dist/utils/data-manager.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _format = _interopRequireDefault(require(\"date-fns/format\"));\n\nvar _2 = require(\"./\");\n\nvar DataManager = /*#__PURE__*/function () {\n  function DataManager() {\n    var _this = this;\n\n    (0, _classCallCheck2[\"default\"])(this, DataManager);\n    (0, _defineProperty2[\"default\"])(this, \"applyFilters\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySearch\", false);\n    (0, _defineProperty2[\"default\"])(this, \"applySort\", false);\n    (0, _defineProperty2[\"default\"])(this, \"currentPage\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"detailPanelType\", \"multiple\");\n    (0, _defineProperty2[\"default\"])(this, \"lastDetailPanelRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"lastEditingRow\", undefined);\n    (0, _defineProperty2[\"default\"])(this, \"orderBy\", -1);\n    (0, _defineProperty2[\"default\"])(this, \"orderDirection\", \"\");\n    (0, _defineProperty2[\"default\"])(this, \"pageSize\", 5);\n    (0, _defineProperty2[\"default\"])(this, \"paging\", true);\n    (0, _defineProperty2[\"default\"])(this, \"parentFunc\", null);\n    (0, _defineProperty2[\"default\"])(this, \"searchText\", \"\");\n    (0, _defineProperty2[\"default\"])(this, \"selectedCount\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"treeDataMaxLevel\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"groupedDataLength\", 0);\n    (0, _defineProperty2[\"default\"])(this, \"defaultExpanded\", false);\n    (0, _defineProperty2[\"default\"])(this, \"data\", []);\n    (0, _defineProperty2[\"default\"])(this, \"columns\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filteredData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"searchedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"groupedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"treefiedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"sortedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"pagedData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"renderData\", []);\n    (0, _defineProperty2[\"default\"])(this, \"filtered\", false);\n    (0, _defineProperty2[\"default\"])(this, \"searched\", false);\n    (0, _defineProperty2[\"default\"])(this, \"grouped\", false);\n    (0, _defineProperty2[\"default\"])(this, \"treefied\", false);\n    (0, _defineProperty2[\"default\"])(this, \"sorted\", false);\n    (0, _defineProperty2[\"default\"])(this, \"paged\", false);\n    (0, _defineProperty2[\"default\"])(this, \"rootGroupsIndex\", {});\n    (0, _defineProperty2[\"default\"])(this, \"startCellEditable\", function (rowData, columnDef) {\n      rowData.tableData.editCellList = [].concat((0, _toConsumableArray2[\"default\"])(rowData.tableData.editCellList || []), [columnDef]);\n    });\n    (0, _defineProperty2[\"default\"])(this, \"finishCellEditable\", function (rowData, columnDef) {\n      if (rowData.tableData.editCellList) {\n        var index = rowData.tableData.editCellList.findIndex(function (c) {\n          return c.tableData.id === columnDef.tableData.id;\n        });\n\n        if (index !== -1) {\n          rowData.tableData.editCellList.splice(index, 1);\n        }\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"expandTreeForNodes\", function (data) {\n      data.forEach(function (row) {\n        var currentRow = row;\n\n        while (_this.parentFunc(currentRow, _this.data)) {\n          var parent = _this.parentFunc(currentRow, _this.data);\n\n          if (parent) {\n            parent.tableData.isTreeExpanded = true;\n          }\n\n          currentRow = parent;\n        }\n      });\n    });\n    (0, _defineProperty2[\"default\"])(this, \"findDataByPath\", function (renderData, path) {\n      if (_this.isDataType(\"tree\")) {\n        var node = path.reduce(function (result, current) {\n          return result && result.tableData && result.tableData.childRows && result.tableData.childRows[current];\n        }, {\n          tableData: {\n            childRows: renderData\n          }\n        });\n        return node;\n      } else {\n        var data = {\n          groups: renderData\n        };\n\n        var _node = path.reduce(function (result, current) {\n          if (result.groups.length > 0) {\n            return result.groups[current];\n          } else if (result.data) {\n            return result.data[current];\n          } else {\n            return undefined;\n          }\n        }, data);\n\n        return _node;\n      }\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getFieldValue\", function (rowData, columnDef) {\n      var lookup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var value = typeof rowData[columnDef.field] !== \"undefined\" ? rowData[columnDef.field] : (0, _2.byString)(rowData, columnDef.field);\n\n      if (columnDef.lookup && lookup) {\n        value = columnDef.lookup[value];\n      }\n\n      return value;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"getRenderState\", function () {\n      if (_this.filtered === false) {\n        _this.filterData();\n      }\n\n      if (_this.searched === false) {\n        _this.searchData();\n      }\n\n      if (_this.grouped === false && _this.isDataType(\"group\")) {\n        _this.groupData();\n      }\n\n      if (_this.treefied === false && _this.isDataType(\"tree\")) {\n        _this.treefyData();\n      }\n\n      if (_this.sorted === false) {\n        _this.sortData();\n      }\n\n      if (_this.paged === false) {\n        _this.pageData();\n      }\n\n      return {\n        columns: _this.columns,\n        currentPage: _this.currentPage,\n        data: _this.sortedData,\n        lastEditingRow: _this.lastEditingRow,\n        orderBy: _this.orderBy,\n        orderDirection: _this.orderDirection,\n        originalData: _this.data,\n        pageSize: _this.pageSize,\n        renderData: _this.pagedData,\n        searchText: _this.searchText,\n        selectedCount: _this.selectedCount,\n        treefiedDataLength: _this.treefiedDataLength,\n        treeDataMaxLevel: _this.treeDataMaxLevel,\n        groupedDataLength: _this.groupedDataLength\n      };\n    });\n    (0, _defineProperty2[\"default\"])(this, \"filterData\", function () {\n      _this.searched = _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.filteredData = (0, _toConsumableArray2[\"default\"])(_this.data);\n\n      if (_this.applyFilters) {\n        _this.columns.filter(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        }).forEach(function (columnDef) {\n          var lookup = columnDef.lookup,\n              type = columnDef.type,\n              tableData = columnDef.tableData;\n\n          if (columnDef.customFilterAndSearch) {\n            _this.filteredData = _this.filteredData.filter(function (row) {\n              return !!columnDef.customFilterAndSearch(tableData.filterValue, row, columnDef);\n            });\n          } else {\n            if (lookup) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef, false);\n\n                return !tableData.filterValue || tableData.filterValue.length === 0 || tableData.filterValue.indexOf(value !== undefined && value !== null && value.toString()) > -1;\n              });\n            } else if (type === \"numeric\") {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value + \"\" === tableData.filterValue;\n              });\n            } else if (type === \"boolean\" && tableData.filterValue) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value && tableData.filterValue === \"checked\" || !value && tableData.filterValue === \"unchecked\";\n              });\n            } else if ([\"date\", \"datetime\"].includes(type)) {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                var currentDate = value ? new Date(value) : null;\n\n                if (currentDate && currentDate.toString() !== \"Invalid Date\") {\n                  var selectedDate = tableData.filterValue;\n                  var currentDateToCompare = \"\";\n                  var selectedDateToCompare = \"\";\n\n                  if (type === \"date\") {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, \"MM/dd/yyyy\");\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, \"MM/dd/yyyy\");\n                  } else if (type === \"datetime\") {\n                    currentDateToCompare = (0, _format[\"default\"])(currentDate, \"MM/dd/yyyy - HH:mm\");\n                    selectedDateToCompare = (0, _format[\"default\"])(selectedDate, \"MM/dd/yyyy - HH:mm\");\n                  }\n\n                  return currentDateToCompare === selectedDateToCompare;\n                }\n\n                return true;\n              });\n            } else if (type === \"time\") {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                var currentHour = value || null;\n\n                if (currentHour) {\n                  var selectedHour = tableData.filterValue;\n                  var currentHourToCompare = (0, _format[\"default\"])(selectedHour, \"HH:mm\");\n                  return currentHour === currentHourToCompare;\n                }\n\n                return true;\n              });\n            } else {\n              _this.filteredData = _this.filteredData.filter(function (row) {\n                var value = _this.getFieldValue(row, columnDef);\n\n                return value && value.toString().toUpperCase().includes(tableData.filterValue.toUpperCase());\n              });\n            }\n          }\n        });\n      }\n\n      _this.filtered = true;\n    });\n    (0, _defineProperty2[\"default\"])(this, \"searchData\", function () {\n      _this.grouped = _this.treefied = _this.sorted = _this.paged = false;\n      _this.searchedData = (0, _toConsumableArray2[\"default\"])(_this.filteredData);\n\n      if (_this.searchText && _this.applySearch) {\n        _this.searchedData = _this.searchedData.filter(function (row) {\n          return _this.columns.filter(function (columnDef) {\n            return columnDef.searchable === undefined ? !columnDef.hidden : columnDef.searchable;\n          }).some(function (columnDef) {\n            if (columnDef.customFilterAndSearch) {\n              return !!columnDef.customFilterAndSearch(_this.searchText, row, columnDef);\n            } else if (columnDef.field) {\n              var value = _this.getFieldValue(row, columnDef);\n\n              if (value) {\n                return value.toString().toUpperCase().includes(_this.searchText.toUpperCase());\n              }\n            }\n          });\n        });\n      }\n\n      _this.searched = true;\n    });\n  }\n\n  (0, _createClass2[\"default\"])(DataManager, [{\n    key: \"setData\",\n    value: function setData(data) {\n      var _this2 = this;\n\n      this.selectedCount = 0;\n      this.data = data.map(function (row, index) {\n        row.tableData = (0, _objectSpread2[\"default\"])({}, row.tableData, {\n          id: index\n        });\n\n        if (row.tableData.checked) {\n          _this2.selectedCount++;\n        }\n\n        return row;\n      });\n      this.filtered = false;\n    }\n  }, {\n    key: \"setColumns\",\n    value: function setColumns(columns) {\n      var undefinedWidthColumns = columns.filter(function (c) {\n        return c.width === undefined && !c.hidden;\n      });\n      var usedWidth = [\"0px\"];\n      this.columns = columns.map(function (columnDef, index) {\n        columnDef.tableData = (0, _objectSpread2[\"default\"])({\n          columnOrder: index,\n          filterValue: columnDef.defaultFilter,\n          groupOrder: columnDef.defaultGroupOrder,\n          groupSort: columnDef.defaultGroupSort || \"asc\",\n          width: columnDef.width\n        }, columnDef.tableData, {\n          id: index\n        });\n\n        if (columnDef.width !== undefined) {\n          if (typeof columnDef.width === \"number\") {\n            usedWidth.push(columnDef.width + \"px\");\n          } else {\n            usedWidth.push(columnDef.width);\n          }\n        }\n\n        return columnDef;\n      });\n      usedWidth = \"(\" + usedWidth.join(\" + \") + \")\";\n      undefinedWidthColumns.forEach(function (columnDef) {\n        columnDef.tableData.width = \"calc((100% - \".concat(usedWidth, \") / \").concat(undefinedWidthColumns.length, \")\");\n      });\n    }\n  }, {\n    key: \"setDefaultExpanded\",\n    value: function setDefaultExpanded(expanded) {\n      this.defaultExpanded = expanded;\n    }\n  }, {\n    key: \"changeApplySearch\",\n    value: function changeApplySearch(applySearch) {\n      this.applySearch = applySearch;\n      this.searched = false;\n    }\n  }, {\n    key: \"changeApplyFilters\",\n    value: function changeApplyFilters(applyFilters) {\n      this.applyFilters = applyFilters;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeApplySort\",\n    value: function changeApplySort(applySort) {\n      this.applySort = applySort;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changePaging\",\n    value: function changePaging(paging) {\n      this.paging = paging;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeCurrentPage\",\n    value: function changeCurrentPage(currentPage) {\n      this.currentPage = currentPage;\n      this.paged = false;\n    }\n  }, {\n    key: \"changePageSize\",\n    value: function changePageSize(pageSize) {\n      this.pageSize = pageSize;\n      this.paged = false;\n    }\n  }, {\n    key: \"changeParentFunc\",\n    value: function changeParentFunc(parentFunc) {\n      this.parentFunc = parentFunc;\n    }\n  }, {\n    key: \"changeFilterValue\",\n    value: function changeFilterValue(columnId, value) {\n      this.columns[columnId].tableData.filterValue = value;\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeRowSelected\",\n    value: function changeRowSelected(checked, path) {\n      var _this3 = this;\n\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.checked = checked;\n      this.selectedCount = this.selectedCount + (checked ? 1 : -1);\n\n      var checkChildRows = function checkChildRows(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (childRow) {\n            if (childRow.tableData.checked !== checked) {\n              childRow.tableData.checked = checked;\n              _this3.selectedCount = _this3.selectedCount + (checked ? 1 : -1);\n            }\n\n            checkChildRows(childRow);\n          });\n        }\n      };\n\n      checkChildRows(rowData);\n      this.filtered = false;\n    }\n  }, {\n    key: \"changeDetailPanelVisibility\",\n    value: function changeDetailPanelVisibility(path, render) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n\n      if ((rowData.tableData.showDetailPanel || \"\").toString() === render.toString()) {\n        rowData.tableData.showDetailPanel = undefined;\n      } else {\n        rowData.tableData.showDetailPanel = render;\n      }\n\n      if (this.detailPanelType === \"single\" && this.lastDetailPanelRow && this.lastDetailPanelRow != rowData) {\n        this.lastDetailPanelRow.tableData.showDetailPanel = undefined;\n      }\n\n      this.lastDetailPanelRow = rowData;\n    }\n  }, {\n    key: \"changeGroupExpand\",\n    value: function changeGroupExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.isExpanded = !rowData.isExpanded;\n    }\n  }, {\n    key: \"changeSearchText\",\n    value: function changeSearchText(searchText) {\n      this.searchText = searchText;\n      this.searched = false;\n      this.currentPage = 0;\n    }\n  }, {\n    key: \"changeRowEditing\",\n    value: function changeRowEditing(rowData, mode) {\n      if (rowData) {\n        rowData.tableData.editing = mode;\n\n        if (this.lastEditingRow && this.lastEditingRow != rowData) {\n          this.lastEditingRow.tableData.editing = undefined;\n        }\n\n        if (mode) {\n          this.lastEditingRow = rowData;\n        } else {\n          this.lastEditingRow = undefined;\n        }\n      } else if (this.lastEditingRow) {\n        this.lastEditingRow.tableData.editing = undefined;\n        this.lastEditingRow = undefined;\n      }\n    }\n  }, {\n    key: \"changeAllSelected\",\n    value: function changeAllSelected(checked) {\n      var selectedCount = 0;\n\n      if (this.isDataType(\"group\")) {\n        var setCheck = function setCheck(data) {\n          data.forEach(function (element) {\n            if (element.groups.length > 0) {\n              setCheck(element.groups);\n            } else {\n              element.data.forEach(function (d) {\n                d.tableData.checked = d.tableData.disabled ? false : checked;\n                selectedCount++;\n              });\n            }\n          });\n        };\n\n        setCheck(this.groupedData);\n      } else {\n        this.searchedData.map(function (row) {\n          row.tableData.checked = row.tableData.disabled ? false : checked;\n          return row;\n        });\n        selectedCount = this.searchedData.length;\n      }\n\n      this.selectedCount = checked ? selectedCount : 0;\n    }\n  }, {\n    key: \"changeOrder\",\n    value: function changeOrder(orderBy, orderDirection) {\n      this.orderBy = orderBy;\n      this.orderDirection = orderDirection;\n      this.currentPage = 0;\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeGroupOrder\",\n    value: function changeGroupOrder(columnId) {\n      var column = this.columns.find(function (c) {\n        return c.tableData.id === columnId;\n      });\n\n      if (column.tableData.groupSort === \"asc\") {\n        column.tableData.groupSort = \"desc\";\n      } else {\n        column.tableData.groupSort = \"asc\";\n      }\n\n      this.sorted = false;\n    }\n  }, {\n    key: \"changeColumnHidden\",\n    value: function changeColumnHidden(column, hidden) {\n      column.hidden = hidden;\n      column.hiddenByColumnsButton = hidden;\n    }\n  }, {\n    key: \"changeTreeExpand\",\n    value: function changeTreeExpand(path) {\n      var rowData = this.findDataByPath(this.sortedData, path);\n      rowData.tableData.isTreeExpanded = !rowData.tableData.isTreeExpanded;\n    }\n  }, {\n    key: \"changeDetailPanelType\",\n    value: function changeDetailPanelType(type) {\n      this.detailPanelType = type;\n    }\n  }, {\n    key: \"changeByDrag\",\n    value: function changeByDrag(result) {\n      var start = 0;\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n\n      if (result.destination.droppableId === \"groups\" && result.source.droppableId === \"groups\") {\n        start = Math.min(result.destination.index, result.source.index);\n        var end = Math.max(result.destination.index, result.source.index);\n        groups = groups.slice(start, end + 1);\n\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var last = groups.pop();\n          groups.unshift(last);\n        } else {\n          // Take first and add as last\n          var _last = groups.shift();\n\n          groups.push(_last);\n        }\n      } else if (result.destination.droppableId === \"groups\" && result.source.droppableId === \"headers\") {\n        var newGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n\n        if (newGroup.grouping === false || !newGroup.field) {\n          return;\n        }\n\n        groups.splice(result.destination.index, 0, newGroup);\n      } else if (result.destination.droppableId === \"headers\" && result.source.droppableId === \"groups\") {\n        var removeGroup = this.columns.find(function (c) {\n          return c.tableData.id == result.draggableId;\n        });\n        removeGroup.tableData.groupOrder = undefined;\n        groups.splice(result.source.index, 1);\n      } else if (result.destination.droppableId === \"headers\" && result.source.droppableId === \"headers\") {\n        start = Math.min(result.destination.index, result.source.index);\n\n        var _end = Math.max(result.destination.index, result.source.index); // get the effective start and end considering hidden columns\n\n\n        var sorted = this.columns.sort(function (a, b) {\n          return a.tableData.columnOrder - b.tableData.columnOrder;\n        }).filter(function (column) {\n          return column.tableData.groupOrder === undefined;\n        });\n        var numHiddenBeforeStart = 0;\n        var numVisibleBeforeStart = 0;\n\n        for (var i = 0; i < sorted.length && numVisibleBeforeStart <= start; i++) {\n          if (sorted[i].hidden) {\n            numHiddenBeforeStart++;\n          } else {\n            numVisibleBeforeStart++;\n          }\n        }\n\n        var effectiveStart = start + numHiddenBeforeStart;\n        var effectiveEnd = effectiveStart;\n\n        for (var numVisibleInRange = 0; numVisibleInRange < _end - start && effectiveEnd < sorted.length; effectiveEnd++) {\n          if (!sorted[effectiveEnd].hidden) {\n            numVisibleInRange++;\n          }\n        }\n\n        var colsToMov = sorted.slice(effectiveStart, effectiveEnd + 1);\n\n        if (result.destination.index < result.source.index) {\n          // Take last and add as first\n          var _last2 = colsToMov.pop();\n\n          colsToMov.unshift(_last2);\n        } else {\n          // Take first and add as last\n          var _last3 = colsToMov.shift();\n\n          colsToMov.push(_last3);\n        }\n\n        for (var _i = 0; _i < colsToMov.length; _i++) {\n          colsToMov[_i].tableData.columnOrder = effectiveStart + _i;\n        }\n\n        return;\n      } else {\n        return;\n      }\n\n      for (var _i2 = 0; _i2 < groups.length; _i2++) {\n        groups[_i2].tableData.groupOrder = start + _i2;\n      }\n\n      this.sorted = this.grouped = false;\n    }\n  }, {\n    key: \"findGroupByGroupPath\",\n    value: function findGroupByGroupPath(renderData, path) {\n      var data = {\n        groups: renderData,\n        groupsIndex: this.rootGroupsIndex\n      };\n      var node = path.reduce(function (result, current) {\n        if (!result) {\n          return undefined;\n        }\n\n        if (result.groupsIndex[current] !== undefined) {\n          return result.groups[result.groupsIndex[current]];\n        }\n\n        return undefined; // const group = result.groups.find(a => a.value === current);\n        // return group;\n      }, data);\n      return node;\n    }\n  }, {\n    key: \"isDataType\",\n    value: function isDataType(type) {\n      var dataType = \"normal\";\n\n      if (this.parentFunc) {\n        dataType = \"tree\";\n      } else if (this.columns.find(function (a) {\n        return a.tableData.groupOrder > -1;\n      })) {\n        dataType = \"group\";\n      }\n\n      return type === dataType;\n    }\n  }, {\n    key: \"sort\",\n    value: function sort(a, b, type) {\n      if (type === \"numeric\") {\n        return a - b;\n      } else {\n        if (a !== b) {\n          // to find nulls\n          if (!a) return -1;\n          if (!b) return 1;\n        }\n\n        return a < b ? -1 : a > b ? 1 : 0;\n      }\n    }\n  }, {\n    key: \"sortList\",\n    value: function sortList(list) {\n      var _this4 = this;\n\n      var columnDef = this.columns.find(function (_) {\n        return _.tableData.id === _this4.orderBy;\n      });\n      var result = list;\n\n      if (columnDef.customSort) {\n        if (this.orderDirection === \"desc\") {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(b, a, \"row\", \"desc\");\n          });\n        } else {\n          result = list.sort(function (a, b) {\n            return columnDef.customSort(a, b, \"row\");\n          });\n        }\n      } else {\n        result = list.sort(this.orderDirection === \"desc\" ? function (a, b) {\n          return _this4.sort(_this4.getFieldValue(b, columnDef), _this4.getFieldValue(a, columnDef), columnDef.type);\n        } : function (a, b) {\n          return _this4.sort(_this4.getFieldValue(a, columnDef), _this4.getFieldValue(b, columnDef), columnDef.type);\n        });\n      }\n\n      return result;\n    }\n  }, {\n    key: \"groupData\",\n    value: function groupData() {\n      var _this5 = this;\n\n      this.sorted = this.paged = false;\n      this.groupedDataLength = 0;\n      var tmpData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n      var groups = this.columns.filter(function (col) {\n        return col.tableData.groupOrder > -1;\n      }).sort(function (col1, col2) {\n        return col1.tableData.groupOrder - col2.tableData.groupOrder;\n      });\n      var subData = tmpData.reduce(function (result, currentRow) {\n        var object = result;\n        object = groups.reduce(function (o, colDef) {\n          var value = currentRow[colDef.field] || (0, _2.byString)(currentRow, colDef.field);\n          var group;\n\n          if (o.groupsIndex[value] !== undefined) {\n            group = o.groups[o.groupsIndex[value]];\n          }\n\n          if (!group) {\n            var path = [].concat((0, _toConsumableArray2[\"default\"])(o.path || []), [value]);\n            var oldGroup = _this5.findGroupByGroupPath(_this5.groupedData, path) || {\n              isExpanded: typeof _this5.defaultExpanded === \"boolean\" ? _this5.defaultExpanded : false\n            };\n            group = {\n              value: value,\n              groups: [],\n              groupsIndex: {},\n              data: [],\n              isExpanded: oldGroup.isExpanded,\n              path: path\n            };\n            o.groups.push(group);\n            o.groupsIndex[value] = o.groups.length - 1;\n          }\n\n          return group;\n        }, object);\n        object.data.push(currentRow);\n        _this5.groupedDataLength++;\n        return result;\n      }, {\n        groups: [],\n        groupsIndex: {}\n      });\n      this.groupedData = subData.groups;\n      this.grouped = true;\n      this.rootGroupsIndex = subData.groupsIndex;\n    }\n  }, {\n    key: \"treefyData\",\n    value: function treefyData() {\n      var _this6 = this;\n\n      this.sorted = this.paged = false;\n      this.data.forEach(function (a) {\n        return a.tableData.childRows = null;\n      });\n      this.treefiedData = [];\n      this.treefiedDataLength = 0;\n      this.treeDataMaxLevel = 0; // if filter or search is enabled, collapse the tree\n\n      if (this.searchText || this.columns.some(function (columnDef) {\n        return columnDef.tableData.filterValue;\n      })) {\n        this.data.forEach(function (row) {\n          row.tableData.isTreeExpanded = false;\n        }); // expand the tree for all nodes present after filtering and searching\n\n        this.expandTreeForNodes(this.searchedData);\n      }\n\n      var addRow = function addRow(rowData) {\n        rowData.tableData.markedForTreeRemove = false;\n\n        var parent = _this6.parentFunc(rowData, _this6.data);\n\n        if (parent) {\n          parent.tableData.childRows = parent.tableData.childRows || [];\n\n          if (!parent.tableData.childRows.includes(rowData)) {\n            parent.tableData.childRows.push(rowData);\n            _this6.treefiedDataLength++;\n          }\n\n          addRow(parent);\n          rowData.tableData.path = [].concat((0, _toConsumableArray2[\"default\"])(parent.tableData.path), [parent.tableData.childRows.length - 1]);\n          _this6.treeDataMaxLevel = Math.max(_this6.treeDataMaxLevel, rowData.tableData.path.length);\n        } else {\n          if (!_this6.treefiedData.includes(rowData)) {\n            _this6.treefiedData.push(rowData);\n\n            _this6.treefiedDataLength++;\n            rowData.tableData.path = [_this6.treefiedData.length - 1];\n          }\n        }\n      }; // Add all rows initially\n\n\n      this.data.forEach(function (rowData) {\n        addRow(rowData);\n      });\n\n      var markForTreeRemove = function markForTreeRemove(rowData) {\n        var pointer = _this6.treefiedData;\n        rowData.tableData.path.forEach(function (pathPart) {\n          if (pointer.tableData && pointer.tableData.childRows) {\n            pointer = pointer.tableData.childRows;\n          }\n\n          pointer = pointer[pathPart];\n        });\n        pointer.tableData.markedForTreeRemove = true;\n      };\n\n      var traverseChildrenAndUnmark = function traverseChildrenAndUnmark(rowData) {\n        if (rowData.tableData.childRows) {\n          rowData.tableData.childRows.forEach(function (row) {\n            traverseChildrenAndUnmark(row);\n          });\n        }\n\n        rowData.tableData.markedForTreeRemove = false;\n      }; // for all data rows, restore initial expand if no search term is available and remove items that shouldn't be there\n\n\n      this.data.forEach(function (rowData) {\n        if (!_this6.searchText && !_this6.columns.some(function (columnDef) {\n          return columnDef.tableData.filterValue;\n        })) {\n          if (rowData.tableData.isTreeExpanded === undefined) {\n            var isExpanded = typeof _this6.defaultExpanded === \"boolean\" ? _this6.defaultExpanded : _this6.defaultExpanded(rowData);\n            rowData.tableData.isTreeExpanded = isExpanded;\n          }\n        }\n\n        var hasSearchMatchedChildren = rowData.tableData.isTreeExpanded;\n\n        if (!hasSearchMatchedChildren && _this6.searchedData.indexOf(rowData) < 0) {\n          markForTreeRemove(rowData);\n        }\n      }); // preserve all children of nodes that are matched by search or filters\n\n      this.data.forEach(function (rowData) {\n        if (_this6.searchedData.indexOf(rowData) > -1) {\n          traverseChildrenAndUnmark(rowData);\n        }\n      });\n\n      var traverseTreeAndDeleteMarked = function traverseTreeAndDeleteMarked(rowDataArray) {\n        for (var i = rowDataArray.length - 1; i >= 0; i--) {\n          var item = rowDataArray[i];\n\n          if (item.tableData.childRows) {\n            traverseTreeAndDeleteMarked(item.tableData.childRows);\n          }\n\n          if (item.tableData.markedForTreeRemove) rowDataArray.splice(i, 1);\n        }\n      };\n\n      traverseTreeAndDeleteMarked(this.treefiedData);\n      this.treefied = true;\n    }\n  }, {\n    key: \"sortData\",\n    value: function sortData() {\n      var _this7 = this;\n\n      this.paged = false;\n\n      if (this.isDataType(\"group\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.groupedData);\n        var groups = this.columns.filter(function (col) {\n          return col.tableData.groupOrder > -1;\n        }).sort(function (col1, col2) {\n          return col1.tableData.groupOrder - col2.tableData.groupOrder;\n        });\n\n        var sortGroups = function sortGroups(list, columnDef) {\n          if (columnDef.customSort) {\n            return list.sort(columnDef.tableData.groupSort === \"desc\" ? function (a, b) {\n              return columnDef.customSort(b.value, a.value, \"group\");\n            } : function (a, b) {\n              return columnDef.customSort(a.value, b.value, \"group\");\n            });\n          } else {\n            return list.sort(columnDef.tableData.groupSort === \"desc\" ? function (a, b) {\n              return _this7.sort(b.value, a.value, columnDef.type);\n            } : function (a, b) {\n              return _this7.sort(a.value, b.value, columnDef.type);\n            });\n          }\n        };\n\n        this.sortedData = sortGroups(this.sortedData, groups[0]);\n\n        var sortGroupData = function sortGroupData(list, level) {\n          list.forEach(function (element) {\n            if (element.groups.length > 0) {\n              var column = groups[level];\n              element.groups = sortGroups(element.groups, column);\n              sortGroupData(element.groups, level + 1);\n            } else {\n              if (_this7.orderBy >= 0 && _this7.orderDirection) {\n                element.data = _this7.sortList(element.data);\n              }\n            }\n          });\n        };\n\n        sortGroupData(this.sortedData, 1);\n      } else if (this.isDataType(\"tree\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.treefiedData);\n\n        if (this.orderBy != -1) {\n          this.sortedData = this.sortList(this.sortedData);\n\n          var sortTree = function sortTree(list) {\n            list.forEach(function (item) {\n              if (item.tableData.childRows) {\n                item.tableData.childRows = _this7.sortList(item.tableData.childRows);\n                sortTree(item.tableData.childRows);\n              }\n            });\n          };\n\n          sortTree(this.sortedData);\n        }\n      } else if (this.isDataType(\"normal\")) {\n        this.sortedData = (0, _toConsumableArray2[\"default\"])(this.searchedData);\n\n        if (this.orderBy != -1 && this.applySort) {\n          this.sortedData = this.sortList(this.sortedData);\n        }\n      }\n\n      this.sorted = true;\n    }\n  }, {\n    key: \"pageData\",\n    value: function pageData() {\n      this.pagedData = (0, _toConsumableArray2[\"default\"])(this.sortedData);\n\n      if (this.paging) {\n        var startIndex = this.currentPage * this.pageSize;\n        var endIndex = startIndex + this.pageSize;\n        this.pagedData = this.pagedData.slice(startIndex, endIndex);\n      }\n\n      this.paged = true;\n    }\n  }]);\n  return DataManager;\n}();\n\nexports[\"default\"] = DataManager;"],"mappings":"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"},"metadata":{},"sourceType":"script"}