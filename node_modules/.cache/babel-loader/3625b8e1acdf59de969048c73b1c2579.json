{"ast":null,"code":"import * as P from '@react-pdf/primitives';\nimport { isNil, matchPercent } from '@react-pdf/fns';\nimport absPath from 'abs-svg-path';\nimport parsePath from 'parse-svg-path';\nimport normalizePath from 'normalize-svg-path';\nimport colorString from 'color-string';\nimport _extends from '@babel/runtime/helpers/extends';\n\nvar renderPath = function renderPath(ctx, node) {\n  var _node$props;\n\n  var d = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.d;\n  if (d) ctx.path(node.props.d);\n};\n\nvar KAPPA$3 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar renderRect = function renderRect(ctx, node) {\n  var _node$props, _node$props2, _node$props3, _node$props4, _node$props5, _node$props6;\n\n  var x = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.x) || 0;\n  var y = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.y) || 0;\n  var rx = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.rx) || 0;\n  var ry = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.ry) || 0;\n  var width = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.width) || 0;\n  var height = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.height) || 0;\n  if (!width || !height) return;\n\n  if (rx && ry) {\n    var krx = rx * KAPPA$3;\n    var kry = ry * KAPPA$3;\n    ctx.moveTo(x + rx, y);\n    ctx.lineTo(x - rx + width, y);\n    ctx.bezierCurveTo(x - rx + width + krx, y, x + width, y + ry - kry, x + width, y + ry);\n    ctx.lineTo(x + width, y + height - ry);\n    ctx.bezierCurveTo(x + width, y + height - ry + kry, x - rx + width + krx, y + height, x - rx + width, y + height);\n    ctx.lineTo(x + rx, y + height);\n    ctx.bezierCurveTo(x + rx - krx, y + height, x, y + height - ry + kry, x, y + height - ry);\n    ctx.lineTo(x, y + ry);\n    ctx.bezierCurveTo(x, y + ry - kry, x + rx - krx, y, x + rx, y);\n  } else {\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + width, y);\n    ctx.lineTo(x + width, y + height);\n    ctx.lineTo(x, y + height);\n  }\n\n  ctx.closePath();\n};\n\nvar renderLine$1 = function renderLine(ctx, node) {\n  var _ref = node.props || {},\n      x1 = _ref.x1,\n      x2 = _ref.x2,\n      y1 = _ref.y1,\n      y2 = _ref.y2;\n\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n};\n\nvar renderGroup = function renderGroup() {// noop\n};\n\nvar KAPPA$2 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar drawEllipse = function drawEllipse(ctx, cx, cy, rx, ry) {\n  var x = cx - rx;\n  var y = cy - ry;\n  var ox = rx * KAPPA$2;\n  var oy = ry * KAPPA$2;\n  var xe = x + rx * 2;\n  var ye = y + ry * 2;\n  var xm = x + rx;\n  var ym = y + ry;\n  ctx.moveTo(x, ym);\n  ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n  ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n  ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n  ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n  ctx.closePath();\n};\n\nvar renderEllipse = function renderEllipse(ctx, node) {\n  var _ref = node.props || {},\n      cx = _ref.cx,\n      cy = _ref.cy,\n      rx = _ref.rx,\n      ry = _ref.ry;\n\n  drawEllipse(ctx, cx, cy, rx, ry);\n};\n\nvar renderCircle = function renderCircle(ctx, node) {\n  var _node$props, _node$props2, _node$props3;\n\n  var cx = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.cx;\n  var cy = (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.cy;\n  var r = (_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.r;\n  drawEllipse(ctx, cx, cy, r, r);\n};\n\nvar renderGlyphs = function renderGlyphs(ctx, glyphs, positions, x, y, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var scale = 1000 / ctx._fontSize;\n  var unitsPerEm = ctx._font.font.unitsPerEm || 1000;\n  var advanceWidthScale = 1000 / unitsPerEm; // Glyph encoding and positioning\n\n  var encodedGlyphs = ctx._font.encodeGlyphs(glyphs);\n\n  var encodedPositions = positions.map(function (pos, i) {\n    return {\n      xAdvance: pos.xAdvance * scale,\n      yAdvance: pos.yAdvance * scale,\n      xOffset: pos.xOffset,\n      yOffset: pos.yOffset,\n      advanceWidth: glyphs[i].advanceWidth * advanceWidthScale\n    };\n  });\n  return ctx._glyphs(encodedGlyphs, encodedPositions, x, y, options);\n};\n\nvar renderRun$1 = function renderRun(ctx, run) {\n  var runAdvanceWidth = run.xAdvance;\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      color = _run$attributes.color,\n      opacity = _run$attributes.opacity;\n  ctx.fillColor(color);\n  ctx.fillOpacity(opacity);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      renderGlyphs(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(runAdvanceWidth, 0);\n};\n\nvar renderSpan = function renderSpan(ctx, line, textAnchor, dominantBaseline) {\n  var _line$box, _line$box2, _line$runs$, _line$runs$2, _line$runs$2$attribut;\n\n  ctx.save();\n  var x = ((_line$box = line.box) === null || _line$box === void 0 ? void 0 : _line$box.x) || 0;\n  var y = ((_line$box2 = line.box) === null || _line$box2 === void 0 ? void 0 : _line$box2.y) || 0;\n  var font = (_line$runs$ = line.runs[0]) === null || _line$runs$ === void 0 ? void 0 : _line$runs$.attributes.font;\n  var scale = ((_line$runs$2 = line.runs[0]) === null || _line$runs$2 === void 0 ? void 0 : (_line$runs$2$attribut = _line$runs$2.attributes) === null || _line$runs$2$attribut === void 0 ? void 0 : _line$runs$2$attribut.scale) || 1;\n  var width = line.xAdvance;\n  var ascent = font.ascent * scale;\n  var xHeight = font.xHeight * scale;\n  var descent = font.descent * scale;\n  var capHeight = font.capHeight * scale;\n  var xTranslate = x;\n  var yTranslate = y;\n\n  switch (textAnchor) {\n    case 'middle':\n      xTranslate = x - width / 2;\n      break;\n\n    case 'end':\n      xTranslate = x - width;\n      break;\n\n    default:\n      xTranslate = x;\n      break;\n  }\n\n  switch (dominantBaseline) {\n    case 'middle':\n    case 'central':\n      yTranslate = y + capHeight / 2;\n      break;\n\n    case 'hanging':\n      yTranslate = y + capHeight;\n      break;\n\n    case 'mathematical':\n      yTranslate = y + xHeight;\n      break;\n\n    case 'text-after-edge':\n      yTranslate = y + descent;\n      break;\n\n    case 'text-before-edge':\n      yTranslate = y + ascent;\n      break;\n\n    default:\n      yTranslate = y;\n      break;\n  }\n\n  ctx.translate(xTranslate, yTranslate);\n  line.runs.forEach(function (run) {\n    return renderRun$1(ctx, run);\n  });\n  ctx.restore();\n};\n\nvar renderSvgText = function renderSvgText(ctx, node) {\n  node.children.forEach(function (span) {\n    return renderSpan(ctx, span.lines[0], span.props.textAnchor, span.props.dominantBaseline);\n  });\n};\n\nvar pairs = function pairs(values) {\n  var result = [];\n\n  for (var i = 0; i < values.length; i += 2) {\n    result.push([values[i], values[i + 1]]);\n  }\n\n  return result;\n};\n/**\n * Parse svg-like points into number arrays\n *\n * @param {String} points string ex. \"20,30 50,60\"\n * @return {Array} points array ex. [[20, 30], [50, 60]]\n */\n\n\nvar parsePoints = function parsePoints(points) {\n  var values = (points || '').trim().replace(/,/g, ' ').replace(/(\\d)-(\\d)/g, '$1 -$2').split(/\\s+/);\n\n  if (values.length % 2 !== 0) {\n    values = values.slice(0, -1);\n  }\n\n  values = values.map(parseFloat);\n  return pairs(values);\n};\n\nvar drawPolyline = function drawPolyline(ctx, points) {\n  if (points.length > 0) {\n    ctx.moveTo(points[0][0], points[0][1]);\n    points.slice(1).forEach(function (p) {\n      return ctx.lineTo(p[0], p[1]);\n    });\n  }\n};\n\nvar renderPolyline = function renderPolyline(ctx, node) {\n  var points = parsePoints(node.props.points || '');\n  drawPolyline(ctx, points);\n};\n\nvar renderPolygon = function renderPolygon(ctx, node) {\n  renderPolyline(ctx, node);\n  ctx.closePath();\n};\n\nvar renderImage$1 = function renderImage(ctx, node) {\n  if (!node.image.data) return;\n  var _node$props = node.props,\n      x = _node$props.x,\n      y = _node$props.y;\n  var _node$style = node.style,\n      width = _node$style.width,\n      height = _node$style.height,\n      opacity = _node$style.opacity;\n  var paddingTop = node.box.paddingLeft || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n\n  if (width === 0 || height === 0) {\n    console.warn(\"Image with src '\" + node.props.href + \"' skipped due to invalid dimensions\");\n    return;\n  }\n\n  ctx.save();\n  ctx.fillOpacity(opacity || 1).image(node.image.data, x + paddingLeft, y + paddingTop, {\n    width: width,\n    height: height\n  });\n  ctx.restore();\n}; // This constant is used to approximate a symmetrical arc using a cubic\n// Bezier curve.\n\n\nvar KAPPA$1 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar clipNode = function clipNode(ctx, node) {\n  if (!node.style) return;\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var _node$style = node.style,\n      _node$style$borderTop = _node$style.borderTopLeftRadius,\n      borderTopLeftRadius = _node$style$borderTop === void 0 ? 0 : _node$style$borderTop,\n      _node$style$borderTop2 = _node$style.borderTopRightRadius,\n      borderTopRightRadius = _node$style$borderTop2 === void 0 ? 0 : _node$style$borderTop2,\n      _node$style$borderBot = _node$style.borderBottomRightRadius,\n      borderBottomRightRadius = _node$style$borderBot === void 0 ? 0 : _node$style$borderBot,\n      _node$style$borderBot2 = _node$style.borderBottomLeftRadius,\n      borderBottomLeftRadius = _node$style$borderBot2 === void 0 ? 0 : _node$style$borderBot2; // Border top\n\n  var rtr = Math.min(borderTopRightRadius, 0.5 * width, 0.5 * height);\n  var ctr = rtr * (1.0 - KAPPA$1);\n  ctx.moveTo(left + rtr, top);\n  ctx.lineTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - ctr, top, left + width, top + ctr, left + width, top + rtr); // Border right\n\n  var rbr = Math.min(borderBottomRightRadius, 0.5 * width, 0.5 * height);\n  var cbr = rbr * (1.0 - KAPPA$1);\n  ctx.lineTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - cbr, left + width - cbr, top + height, left + width - rbr, top + height); // Border bottom\n\n  var rbl = Math.min(borderBottomLeftRadius, 0.5 * width, 0.5 * height);\n  var cbl = rbl * (1.0 - KAPPA$1);\n  ctx.lineTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + cbl, top + height, left, top + height - cbl, left, top + height - rbl); // Border left\n\n  var rtl = Math.min(borderTopLeftRadius, 0.5 * width, 0.5 * height);\n  var ctl = rtl * (1.0 - KAPPA$1);\n  ctx.lineTo(left, top + rtl);\n  ctx.bezierCurveTo(left, top + ctl, left + ctl, top, left + rtl, top);\n  ctx.closePath();\n  ctx.clip();\n};\n\nvar applySingleTransformation = function applySingleTransformation(ctx, transform, origin) {\n  var operation = transform.operation,\n      value = transform.value;\n\n  switch (operation) {\n    case 'scale':\n      {\n        var scaleX = value[0],\n            scaleY = value[1];\n        ctx.scale(scaleX, scaleY, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'rotate':\n      {\n        var angle = value[0];\n        ctx.rotate(angle, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'translate':\n      {\n        var x = value[0],\n            y = value[1];\n        ctx.translate(x, y, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'skew':\n      {\n        var xAngle = value[0],\n            yAngle = value[1];\n        ctx.skew(xAngle, yAngle, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'matrix':\n      {\n        ctx.transform.apply(ctx, value);\n        break;\n      }\n\n    default:\n      {\n        console.error(\"Transform operation: '\" + operation + \"' doesn't supported\");\n      }\n  }\n};\n\nvar applyTransformations = function applyTransformations(ctx, node) {\n  var _node$style, _node$props;\n\n  if (!node.origin) return;\n  var origin = [node.origin.left, node.origin.top];\n  var operations = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.transform) || ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.transform) || [];\n  operations.forEach(function (operation) {\n    applySingleTransformation(ctx, operation, origin);\n  });\n};\n\nvar _boundingBoxFns;\n\nvar getPathBoundingBox = function getPathBoundingBox(node) {\n  var _node$props;\n\n  var path = normalizePath(absPath(parsePath(((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.d) || '')));\n  if (!path.length) return [0, 0, 0, 0];\n  var bounds = [Infinity, Infinity, -Infinity, -Infinity];\n\n  for (var i = 0, l = path.length; i < l; i += 1) {\n    var points = path[i].slice(1);\n\n    for (var j = 0; j < points.length; j += 2) {\n      if (points[j + 0] < bounds[0]) bounds[0] = points[j + 0];\n      if (points[j + 1] < bounds[1]) bounds[1] = points[j + 1];\n      if (points[j + 0] > bounds[2]) bounds[2] = points[j + 0];\n      if (points[j + 1] > bounds[3]) bounds[3] = points[j + 1];\n    }\n  }\n\n  return bounds;\n};\n\nvar getCircleBoundingBox = function getCircleBoundingBox(node) {\n  var _node$props2, _node$props3, _node$props4;\n\n  var r = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.r) || 0;\n  var cx = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.cx) || 0;\n  var cy = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.cy) || 0;\n  return [cx - r, cy - r, cx + r, cy + r];\n};\n\nvar getEllipseBoundingBox = function getEllipseBoundingBox(node) {\n  var _node$props5, _node$props6, _node$props7, _node$props8;\n\n  var cx = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.cx) || 0;\n  var cy = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.cy) || 0;\n  var rx = ((_node$props7 = node.props) === null || _node$props7 === void 0 ? void 0 : _node$props7.rx) || 0;\n  var ry = ((_node$props8 = node.props) === null || _node$props8 === void 0 ? void 0 : _node$props8.ry) || 0;\n  return [cx - rx, cy - ry, cx + rx, cy + ry];\n};\n\nvar getLineBoundingBox = function getLineBoundingBox(node) {\n  var _node$props9, _node$props10, _node$props11, _node$props12;\n\n  var x1 = ((_node$props9 = node.props) === null || _node$props9 === void 0 ? void 0 : _node$props9.x1) || 0;\n  var y1 = ((_node$props10 = node.props) === null || _node$props10 === void 0 ? void 0 : _node$props10.y1) || 0;\n  var x2 = ((_node$props11 = node.props) === null || _node$props11 === void 0 ? void 0 : _node$props11.x2) || 0;\n  var y2 = ((_node$props12 = node.props) === null || _node$props12 === void 0 ? void 0 : _node$props12.y2) || 0;\n  return [Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2)];\n};\n\nvar getRectBoundingBox = function getRectBoundingBox(node) {\n  var _node$props13, _node$props14, _node$props15, _node$props16;\n\n  var x = ((_node$props13 = node.props) === null || _node$props13 === void 0 ? void 0 : _node$props13.x) || 0;\n  var y = ((_node$props14 = node.props) === null || _node$props14 === void 0 ? void 0 : _node$props14.y) || 0;\n  var width = ((_node$props15 = node.props) === null || _node$props15 === void 0 ? void 0 : _node$props15.width) || 0;\n  var height = ((_node$props16 = node.props) === null || _node$props16 === void 0 ? void 0 : _node$props16.height) || 0;\n  return [x, y, x + width, y + height];\n};\n\nvar max = function max(values) {\n  return Math.max.apply(Math, [-Infinity].concat(values));\n};\n\nvar min = function min(values) {\n  return Math.min.apply(Math, [Infinity].concat(values));\n};\n\nvar getPolylineBoundingBox = function getPolylineBoundingBox(node) {\n  var _node$props17;\n\n  var points = parsePoints(((_node$props17 = node.props) === null || _node$props17 === void 0 ? void 0 : _node$props17.points) || []);\n  var xValues = points.map(function (p) {\n    return p[0];\n  });\n  var yValues = points.map(function (p) {\n    return p[1];\n  });\n  return [min(xValues), min(yValues), max(xValues), max(yValues)];\n};\n\nvar boundingBoxFns = (_boundingBoxFns = {}, _boundingBoxFns[P.Rect] = getRectBoundingBox, _boundingBoxFns[P.Line] = getLineBoundingBox, _boundingBoxFns[P.Path] = getPathBoundingBox, _boundingBoxFns[P.Circle] = getCircleBoundingBox, _boundingBoxFns[P.Ellipse] = getEllipseBoundingBox, _boundingBoxFns[P.Polygon] = getPolylineBoundingBox, _boundingBoxFns[P.Polyline] = getPolylineBoundingBox, _boundingBoxFns);\n\nvar getBoundingBox = function getBoundingBox(node) {\n  var boundingBoxFn = boundingBoxFns[node.type];\n  return boundingBoxFn ? boundingBoxFn(node) : [0, 0, 0, 0];\n};\n\nvar _renderFns$1;\n\nvar setStrokeWidth = function setStrokeWidth(ctx, node) {\n  var _node$props;\n\n  var lineWidth = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.strokeWidth) || 0;\n  if (lineWidth) ctx.lineWidth(lineWidth);\n};\n\nvar setStrokeColor = function setStrokeColor(ctx, node) {\n  var _node$props2;\n\n  var strokeColor = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.stroke) || null;\n  if (strokeColor) ctx.strokeColor(strokeColor);\n};\n\nvar setOpacity = function setOpacity(ctx, node) {\n  var _node$props3;\n\n  var opacity = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.opacity) || null;\n  if (!isNil(opacity)) ctx.opacity(opacity);\n};\n\nvar setFillOpacity = function setFillOpacity(ctx, node) {\n  var _node$props4;\n\n  var fillOpacity = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.fillOpacity) || null;\n  if (!isNil(fillOpacity)) ctx.fillOpacity(fillOpacity);\n};\n\nvar setStrokeOpacity = function setStrokeOpacity(ctx, node) {\n  var _node$props5;\n\n  var strokeOpacity = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.strokeOpacity) || null;\n  if (!isNil(strokeOpacity)) ctx.strokeOpacity(strokeOpacity);\n};\n\nvar setLineJoin = function setLineJoin(ctx, node) {\n  var _node$props6;\n\n  var lineJoin = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.strokeLinejoin) || null;\n  if (lineJoin) ctx.lineJoin(lineJoin);\n};\n\nvar setLineCap = function setLineCap(ctx, node) {\n  var _node$props7;\n\n  var lineCap = ((_node$props7 = node.props) === null || _node$props7 === void 0 ? void 0 : _node$props7.strokeLinecap) || null;\n  if (lineCap) ctx.lineCap(lineCap);\n};\n\nvar setLineDash = function setLineDash(ctx, node) {\n  var _node$props8;\n\n  var value = ((_node$props8 = node.props) === null || _node$props8 === void 0 ? void 0 : _node$props8.strokeDasharray) || null;\n  if (value) ctx.dash(value.split(','));\n};\n\nvar hasLinearGradientFill = function hasLinearGradientFill(node) {\n  var _node$props9, _node$props9$fill;\n\n  return ((_node$props9 = node.props) === null || _node$props9 === void 0 ? void 0 : (_node$props9$fill = _node$props9.fill) === null || _node$props9$fill === void 0 ? void 0 : _node$props9$fill.type) === P.LinearGradient;\n};\n\nvar hasRadialGradientFill = function hasRadialGradientFill(node) {\n  var _node$props10, _node$props10$fill;\n\n  return ((_node$props10 = node.props) === null || _node$props10 === void 0 ? void 0 : (_node$props10$fill = _node$props10.fill) === null || _node$props10$fill === void 0 ? void 0 : _node$props10$fill.type) === P.RadialGradient;\n}; // Math simplified from https://github.com/devongovett/svgkit/blob/master/src/elements/SVGGradient.js#L104\n\n\nvar setLinearGradientFill = function setLinearGradientFill(ctx, node) {\n  var _node$props11;\n\n  var bbox = getBoundingBox(node);\n  var gradient = ((_node$props11 = node.props) === null || _node$props11 === void 0 ? void 0 : _node$props11.fill) || null;\n  var x1 = gradient.props.x1 || 0;\n  var y1 = gradient.props.y1 || 0;\n  var x2 = gradient.props.x2 || 1;\n  var y2 = gradient.props.y2 || 0;\n  var m0 = bbox[2] - bbox[0];\n  var m3 = bbox[3] - bbox[1];\n  var m4 = bbox[0];\n  var m5 = bbox[1];\n  var gx1 = m0 * x1 + m4;\n  var gy1 = m3 * y1 + m5;\n  var gx2 = m0 * x2 + m4;\n  var gy2 = m3 * y2 + m5;\n  var grad = ctx.linearGradient(gx1, gy1, gx2, gy2);\n  gradient.children.forEach(function (stop) {\n    grad.stop(stop.props.offset, stop.props.stopColor, stop.props.stopOpacity);\n  });\n  ctx.fill(grad);\n}; // Math simplified from https://github.com/devongovett/svgkit/blob/master/src/elements/SVGGradient.js#L155\n\n\nvar setRadialGradientFill = function setRadialGradientFill(ctx, node) {\n  var _node$props12;\n\n  var bbox = getBoundingBox(node);\n  var gradient = ((_node$props12 = node.props) === null || _node$props12 === void 0 ? void 0 : _node$props12.fill) || null;\n  var cx = gradient.props.cx || 0.5;\n  var cy = gradient.props.cy || 0.5;\n  var fx = gradient.props.fx || cx;\n  var fy = gradient.props.fy || cy;\n  var r = gradient.props.r || 0.5;\n  var m0 = bbox[2] - bbox[0];\n  var m3 = bbox[3] - bbox[1];\n  var m4 = bbox[0];\n  var m5 = bbox[1];\n  var gr = r * m0;\n  var gcx = m0 * cx + m4;\n  var gcy = m3 * cy + m5;\n  var gfx = m0 * fx + m4;\n  var gfy = m3 * fy + m5;\n  var grad = ctx.radialGradient(gfx, gfy, 0, gcx, gcy, gr);\n  gradient.children.forEach(function (stop) {\n    grad.stop(stop.props.offset, stop.props.stopColor, stop.props.stopOpacity);\n  });\n  ctx.fill(grad);\n};\n\nvar setFillColor = function setFillColor(ctx, node) {\n  var _node$props13;\n\n  var fillColor = ((_node$props13 = node.props) === null || _node$props13 === void 0 ? void 0 : _node$props13.fill) || null;\n  if (fillColor) ctx.fillColor(fillColor);\n};\n\nvar setFill = function setFill(ctx, node) {\n  if (hasLinearGradientFill(node)) return setLinearGradientFill(ctx, node);\n  if (hasRadialGradientFill(node)) return setRadialGradientFill(ctx, node);\n  return setFillColor(ctx, node);\n};\n\nvar draw = function draw(ctx, node) {\n  var props = node.props || {};\n\n  if (props.fill && props.stroke) {\n    ctx.fillAndStroke(props.fillRule);\n  } else if (props.fill) {\n    ctx.fill(props.fillRule);\n  } else if (props.stroke) {\n    ctx.stroke();\n  } else {\n    ctx.save();\n    ctx.opacity(0);\n    ctx.fill(null);\n    ctx.restore();\n  }\n};\n\nvar noop = function noop() {};\n\nvar renderFns$1 = (_renderFns$1 = {}, _renderFns$1[P.Tspan] = noop, _renderFns$1[P.TextInstance] = noop, _renderFns$1[P.Path] = renderPath, _renderFns$1[P.Rect] = renderRect, _renderFns$1[P.Line] = renderLine$1, _renderFns$1[P.G] = renderGroup, _renderFns$1[P.Text] = renderSvgText, _renderFns$1[P.Circle] = renderCircle, _renderFns$1[P.Image] = renderImage$1, _renderFns$1[P.Ellipse] = renderEllipse, _renderFns$1[P.Polygon] = renderPolygon, _renderFns$1[P.Polyline] = renderPolyline, _renderFns$1);\n\nvar renderNode$1 = function renderNode(ctx, node) {\n  var renderFn = renderFns$1[node.type];\n\n  if (renderFns$1) {\n    renderFn(ctx, node);\n  } else {\n    console.warn(\"SVG node of type \" + node.type + \" is not currenty supported\");\n  }\n};\n\nvar drawNode = function drawNode(ctx, node) {\n  setLineCap(ctx, node);\n  setLineDash(ctx, node);\n  setLineJoin(ctx, node);\n  setStrokeWidth(ctx, node);\n  setStrokeColor(ctx, node);\n  setFill(ctx, node);\n  setStrokeOpacity(ctx, node);\n  setFillOpacity(ctx, node);\n  setOpacity(ctx, node);\n  applyTransformations(ctx, node);\n  renderNode$1(ctx, node);\n  draw(ctx, node);\n};\n\nvar clipPath = function clipPath(ctx, node) {\n  var _node$props14;\n\n  var value = (_node$props14 = node.props) === null || _node$props14 === void 0 ? void 0 : _node$props14.clipPath;\n\n  if (value) {\n    var children = value.children || [];\n    children.forEach(function (child) {\n      return renderNode$1(ctx, child);\n    });\n    ctx.clip();\n  }\n};\n\nvar drawChildren = function drawChildren(ctx, node) {\n  var children = node.children || [];\n  children.forEach(function (child) {\n    ctx.save();\n    clipPath(ctx, child);\n    drawNode(ctx, child);\n    drawChildren(ctx, child);\n    ctx.restore();\n  });\n};\n\nvar resolveAspectRatio = function resolveAspectRatio(ctx, node) {\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height;\n  var _node$props15 = node.props,\n      viewBox = _node$props15.viewBox,\n      _node$props15$preserv = _node$props15.preserveAspectRatio,\n      preserveAspectRatio = _node$props15$preserv === void 0 ? {} : _node$props15$preserv;\n  var _preserveAspectRatio$ = preserveAspectRatio.meetOrSlice,\n      meetOrSlice = _preserveAspectRatio$ === void 0 ? 'meet' : _preserveAspectRatio$,\n      _preserveAspectRatio$2 = preserveAspectRatio.align,\n      align = _preserveAspectRatio$2 === void 0 ? 'xMidYMid' : _preserveAspectRatio$2;\n  if (viewBox == null || width == null || height == null) return;\n  var x = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.minX) || 0;\n  var y = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.minY) || 0;\n  var logicalWidth = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.maxX) || width;\n  var logicalHeight = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.maxY) || height;\n  var logicalRatio = logicalWidth / logicalHeight;\n  var physicalRatio = width / height;\n  var scaleX = width / logicalWidth;\n  var scaleY = height / logicalHeight;\n\n  if (align === 'none') {\n    ctx.scale(scaleX, scaleY);\n    ctx.translate(-x, -y);\n    return;\n  }\n\n  if (logicalRatio < physicalRatio && meetOrSlice === 'meet' || logicalRatio >= physicalRatio && meetOrSlice === 'slice') {\n    ctx.scale(scaleY, scaleY);\n\n    switch (align) {\n      case 'xMinYMin':\n      case 'xMinYMid':\n      case 'xMinYMax':\n        ctx.translate(-x, -y);\n        break;\n\n      case 'xMidYMin':\n      case 'xMidYMid':\n      case 'xMidYMax':\n        ctx.translate(-x - (logicalWidth - width * logicalHeight / height) / 2, -y);\n        break;\n\n      default:\n        ctx.translate(-x - (logicalWidth - width * logicalHeight / height), -y);\n    }\n  } else {\n    ctx.scale(scaleX, scaleX);\n\n    switch (align) {\n      case 'xMinYMin':\n      case 'xMidYMin':\n      case 'xMaxYMin':\n        ctx.translate(-x, -y);\n        break;\n\n      case 'xMinYMid':\n      case 'xMidYMid':\n      case 'xMaxYMid':\n        ctx.translate(-x, -y - (logicalHeight - height * logicalWidth / width) / 2);\n        break;\n\n      default:\n        ctx.translate(-x, -y - (logicalHeight - height * logicalWidth / width));\n    }\n  }\n};\n\nvar moveToOrigin = function moveToOrigin(ctx, node) {\n  var _node$box2 = node.box,\n      top = _node$box2.top,\n      left = _node$box2.left;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var paddingTop = node.box.paddingTop || 0;\n  ctx.translate(left + paddingLeft, top + paddingTop);\n};\n\nvar renderSvg = function renderSvg(ctx, node) {\n  ctx.save();\n  clipNode(ctx, node);\n  moveToOrigin(ctx, node);\n  resolveAspectRatio(ctx, node);\n  drawChildren(ctx, node);\n  ctx.restore();\n};\n\nvar parseColor = function parseColor(hex) {\n  var parsed = colorString.get(hex);\n  var value = colorString.to.hex(parsed.value.slice(0, 3));\n  var opacity = parsed.value[3];\n  return {\n    value: value,\n    opacity: opacity\n  };\n};\n/* eslint-disable no-param-reassign */\n\n\nvar DEST_REGEXP = /^#.+/;\n\nvar isSrcId$1 = function isSrcId(src) {\n  return src.match(DEST_REGEXP);\n};\n\nvar renderAttachment = function renderAttachment(ctx, attachment) {\n  var _attachment$xOffset = attachment.xOffset,\n      xOffset = _attachment$xOffset === void 0 ? 0 : _attachment$xOffset,\n      _attachment$yOffset = attachment.yOffset,\n      yOffset = _attachment$yOffset === void 0 ? 0 : _attachment$yOffset,\n      width = attachment.width,\n      height = attachment.height,\n      image = attachment.image;\n  ctx.translate(-width + xOffset, -height + yOffset);\n  ctx.image(image, 0, 0, {\n    fit: [width, height],\n    align: 'center',\n    valign: 'bottom'\n  });\n};\n\nvar renderAttachments = function renderAttachments(ctx, run) {\n  ctx.save();\n  var font = run.attributes.font;\n  var space = font.glyphForCodePoint(0x20);\n  var objectReplacement = font.glyphForCodePoint(0xfffc);\n  var attachmentAdvance = 0;\n\n  for (var i = 0; i < run.glyphs.length; i += 1) {\n    var position = run.positions[i];\n    var glyph = run.glyphs[i];\n    attachmentAdvance += position.xAdvance || 0;\n\n    if (glyph.id === objectReplacement.id && run.attributes.attachment) {\n      ctx.translate(attachmentAdvance, position.yOffset || 0);\n      renderAttachment(ctx, run.attributes.attachment);\n      run.glyphs[i] = space;\n      attachmentAdvance = 0;\n    }\n  }\n\n  ctx.restore();\n};\n\nvar renderRun = function renderRun(ctx, run, options) {\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      link = _run$attributes.link;\n  var color = parseColor(run.attributes.color);\n  var opacity = isNil(run.attributes.opacity) ? color.opacity : run.attributes.opacity;\n  var height = run.height,\n      descent = run.descent,\n      xAdvance = run.xAdvance;\n\n  if (options.outlineRuns) {\n    ctx.rect(0, -height, xAdvance, height).stroke();\n  }\n\n  ctx.fillColor(color.value);\n  ctx.fillOpacity(opacity);\n\n  if (link) {\n    if (isSrcId$1(link)) {\n      ctx.goTo(0, -height - descent, xAdvance, height, link.slice(1));\n    } else {\n      ctx.link(0, -height - descent, xAdvance, height, link);\n    }\n  }\n\n  renderAttachments(ctx, run);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      renderGlyphs(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(xAdvance, 0);\n};\n\nvar renderBackground$1 = function renderBackground(ctx, rect, backgroundColor) {\n  var color = parseColor(backgroundColor);\n  ctx.save();\n  ctx.fillOpacity(color.opacity);\n  ctx.rect(rect.x, rect.y, rect.width, rect.height);\n  ctx.fill(color.value);\n  ctx.restore();\n};\n\nvar renderDecorationLine = function renderDecorationLine(ctx, line) {\n  ctx.save();\n  ctx.lineWidth(line.rect.height);\n  ctx.strokeOpacity(line.opacity);\n\n  if (/dashed/.test(line.style)) {\n    ctx.dash(3 * line.rect.height);\n  } else if (/dotted/.test(line.style)) {\n    ctx.dash(line.rect.height);\n  }\n\n  if (/wavy/.test(line.style)) {\n    var dist = Math.max(2, line.rect.height);\n    var step = 1.1 * dist;\n    var stepCount = Math.floor(line.rect.width / (2 * step)); // Adjust step to fill entire width\n\n    var remainingWidth = line.rect.width - stepCount * 2 * step;\n    var adjustment = remainingWidth / stepCount / 2;\n    step += adjustment;\n    var cp1y = line.rect.y + dist;\n    var cp2y = line.rect.y - dist;\n    var x = line.rect.x;\n    ctx.moveTo(line.rect.x, line.rect.y);\n\n    for (var i = 0; i < stepCount; i += 1) {\n      ctx.bezierCurveTo(x + step, cp1y, x + step, cp2y, x + 2 * step, line.rect.y);\n      x += 2 * step;\n    }\n  } else {\n    ctx.moveTo(line.rect.x, line.rect.y);\n    ctx.lineTo(line.rect.x + line.rect.width, line.rect.y);\n\n    if (/double/.test(line.style)) {\n      ctx.moveTo(line.rect.x, line.rect.y + line.rect.height * 2);\n      ctx.lineTo(line.rect.x + line.rect.width, line.rect.y + line.rect.height * 2);\n    }\n  }\n\n  ctx.stroke(line.color);\n  ctx.restore();\n};\n\nvar renderLine = function renderLine(ctx, line, options) {\n  var lineAscent = line.ascent;\n\n  if (options.outlineLines) {\n    ctx.rect(line.box.x, line.box.y, line.box.width, line.box.height).stroke();\n  }\n\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y + lineAscent);\n\n  for (var i = 0; i < line.runs.length; i += 1) {\n    var run = line.runs[i];\n    var isLastRun = i === line.runs.length - 1;\n\n    if (run.attributes.backgroundColor) {\n      var overflowRight = isLastRun ? line.overflowRight : 0;\n      var backgroundRect = {\n        x: 0,\n        y: -lineAscent,\n        height: line.box.height,\n        width: run.xAdvance - overflowRight\n      };\n      renderBackground$1(ctx, backgroundRect, run.attributes.backgroundColor);\n    }\n\n    renderRun(ctx, run, options);\n  }\n\n  ctx.restore();\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y);\n\n  for (var _i = 0; _i < line.decorationLines.length; _i += 1) {\n    var decorationLine = line.decorationLines[_i];\n    renderDecorationLine(ctx, decorationLine);\n  }\n\n  ctx.restore();\n};\n\nvar renderBlock = function renderBlock(ctx, block, options) {\n  block.forEach(function (line) {\n    renderLine(ctx, line, options);\n  });\n};\n\nvar renderText = function renderText(ctx, node) {\n  var _node$box2, _node$box3;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var blocks = [node.lines];\n  var paddingTop = ((_node$box2 = node.box) === null || _node$box2 === void 0 ? void 0 : _node$box2.paddingTop) || 0;\n  var paddingLeft = ((_node$box3 = node.box) === null || _node$box3 === void 0 ? void 0 : _node$box3.paddingLeft) || 0;\n  var initialY = node.lines[0] ? node.lines[0].box.y : 0;\n  var offsetX = node.alignOffset || 0;\n  ctx.save();\n  ctx.translate(left + paddingLeft - offsetX, top + paddingTop - initialY);\n  blocks.forEach(function (block) {\n    renderBlock(ctx, block, {});\n  });\n  ctx.restore();\n};\n\nvar renderPage = function renderPage(ctx, node) {\n  var _node$props;\n\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height;\n  var dpi = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.dpi) || 72;\n  var userUnit = dpi / 72;\n  ctx.addPage({\n    size: [width, height],\n    margin: 0,\n    userUnit: userUnit\n  });\n};\n\nvar renderNote = function renderNote(ctx, node) {\n  var _node$children, _node$style, _node$style2;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var value = (node === null || node === void 0 ? void 0 : (_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children[0].value) || '';\n  var color = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.backgroundColor) || null;\n  var borderWidth = ((_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.borderWidth) || null;\n  ctx.note(left, top, 0, 0, value, {\n    color: color,\n    borderWidth: borderWidth\n  });\n};\n\nvar isNumeric = function isNumeric(n) {\n  return !Number.isNaN(parseFloat(n)) && Number.isFinite(n);\n};\n\nvar applyContainObjectFit = function applyContainObjectFit(cw, ch, iw, ih, px, py) {\n  var cr = cw / ch;\n  var ir = iw / ih;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n\n  if (cr > ir) {\n    var _height = ch;\n\n    var _width = _height * ir;\n\n    var _yOffset = isNumeric(py) ? py : 0;\n\n    var _xOffset = isNumeric(px) ? px : (cw - _width) * pxv;\n\n    return {\n      width: _width,\n      height: _height,\n      xOffset: _xOffset,\n      yOffset: _yOffset\n    };\n  }\n\n  var width = cw;\n  var height = width / ir;\n  var xOffset = isNumeric(px) ? px : 0;\n  var yOffset = isNumeric(py) ? py : (ch - height) * pyv;\n  return {\n    width: width,\n    height: height,\n    yOffset: yOffset,\n    xOffset: xOffset\n  };\n};\n\nvar applyNoneObjectFit = function applyNoneObjectFit(cw, ch, iw, ih, px, py) {\n  var width = iw;\n  var height = ih;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n  var xOffset = isNumeric(px) ? px : (cw - width) * pxv;\n  var yOffset = isNumeric(py) ? py : (ch - height) * pyv;\n  return {\n    width: width,\n    height: height,\n    xOffset: xOffset,\n    yOffset: yOffset\n  };\n};\n\nvar applyCoverObjectFit = function applyCoverObjectFit(cw, ch, iw, ih, px, py) {\n  var ir = iw / ih;\n  var cr = cw / ch;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n\n  if (cr > ir) {\n    var _width2 = cw;\n\n    var _height2 = _width2 / ir;\n\n    var _xOffset2 = isNumeric(px) ? px : 0;\n\n    var _yOffset2 = isNumeric(py) ? py : (ch - _height2) * pyv;\n\n    return {\n      width: _width2,\n      height: _height2,\n      yOffset: _yOffset2,\n      xOffset: _xOffset2\n    };\n  }\n\n  var height = ch;\n  var width = height * ir;\n  var xOffset = isNumeric(px) ? px : (cw - width) * pxv;\n  var yOffset = isNumeric(py) ? py : 0;\n  return {\n    width: width,\n    height: height,\n    xOffset: xOffset,\n    yOffset: yOffset\n  };\n};\n\nvar applyScaleDownObjectFit = function applyScaleDownObjectFit(cw, ch, iw, ih, px, py) {\n  var containDimension = applyContainObjectFit(cw, ch, iw, ih, px, py);\n  var noneDimension = applyNoneObjectFit(cw, ch, iw, ih, px, py);\n  return containDimension.width < noneDimension.width ? containDimension : noneDimension;\n};\n\nvar applyFillObjectFit = function applyFillObjectFit(cw, ch, px, py) {\n  return {\n    width: cw,\n    height: ch,\n    xOffset: matchPercent(px) ? 0 : px || 0,\n    yOffset: matchPercent(py) ? 0 : py || 0\n  };\n};\n\nvar resolveObjectFit = function resolveObjectFit(type, cw, ch, iw, ih, px, py) {\n  if (type === void 0) {\n    type = 'fill';\n  }\n\n  switch (type) {\n    case 'contain':\n      return applyContainObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'cover':\n      return applyCoverObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'none':\n      return applyNoneObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'scale-down':\n      return applyScaleDownObjectFit(cw, ch, iw, ih, px, py);\n\n    default:\n      return applyFillObjectFit(cw, ch, px, py);\n  }\n};\n\nvar drawImage = function drawImage(ctx, node, options) {\n  var _node$style, _node$style2, _node$style3, _node$style4;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top;\n  var opacity = (_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.opacity;\n  var objectFit = (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.objectFit;\n  var objectPositionX = (_node$style3 = node.style) === null || _node$style3 === void 0 ? void 0 : _node$style3.objectPositionX;\n  var objectPositionY = (_node$style4 = node.style) === null || _node$style4 === void 0 ? void 0 : _node$style4.objectPositionY;\n  var paddingTop = node.box.paddingTop || 0;\n  var paddingRight = node.box.paddingRight || 0;\n  var paddingBottom = node.box.paddingBottom || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var imageCache = options.imageCache || new Map();\n\n  var _resolveObjectFit = resolveObjectFit(objectFit, node.box.width - paddingLeft - paddingRight, node.box.height - paddingTop - paddingBottom, node.image.width, node.image.height, objectPositionX, objectPositionY),\n      width = _resolveObjectFit.width,\n      height = _resolveObjectFit.height,\n      xOffset = _resolveObjectFit.xOffset,\n      yOffset = _resolveObjectFit.yOffset;\n\n  if (node.image.data) {\n    if (width !== 0 && height !== 0) {\n      var cacheKey = node.image.key;\n      var image = imageCache.get(cacheKey) || ctx.embedImage(node.image.data);\n      if (cacheKey) imageCache.set(cacheKey, image);\n      var imageOpacity = isNil(opacity) ? 1 : opacity;\n      ctx.fillOpacity(imageOpacity).image(image, left + paddingLeft + xOffset, top + paddingTop + yOffset, {\n        width: width,\n        height: height\n      });\n    } else {\n      console.warn(\"Image with src '\" + JSON.stringify(node.props.src) + \"' skipped due to invalid dimensions\");\n    }\n  }\n};\n\nvar renderImage = function renderImage(ctx, node, options) {\n  ctx.save();\n  clipNode(ctx, node);\n  drawImage(ctx, node, options);\n  ctx.restore();\n};\n\nvar CONTENT_COLOR = '#a1c6e7';\nvar PADDING_COLOR = '#c4deb9';\nvar MARGIN_COLOR = '#f8cca1'; // TODO: Draw debug boxes using clipping to enhance quality\n\nvar debugContent = function debugContent(ctx, node) {\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top,\n      width = _node$box.width,\n      height = _node$box.height,\n      _node$box$paddingLeft = _node$box.paddingLeft,\n      paddingLeft = _node$box$paddingLeft === void 0 ? 0 : _node$box$paddingLeft,\n      _node$box$paddingTop = _node$box.paddingTop,\n      paddingTop = _node$box$paddingTop === void 0 ? 0 : _node$box$paddingTop,\n      _node$box$paddingRigh = _node$box.paddingRight,\n      paddingRight = _node$box$paddingRigh === void 0 ? 0 : _node$box$paddingRigh,\n      _node$box$paddingBott = _node$box.paddingBottom,\n      paddingBottom = _node$box$paddingBott === void 0 ? 0 : _node$box$paddingBott,\n      _node$box$borderLeftW = _node$box.borderLeftWidth,\n      borderLeftWidth = _node$box$borderLeftW === void 0 ? 0 : _node$box$borderLeftW,\n      _node$box$borderTopWi = _node$box.borderTopWidth,\n      borderTopWidth = _node$box$borderTopWi === void 0 ? 0 : _node$box$borderTopWi,\n      _node$box$borderRight = _node$box.borderRightWidth,\n      borderRightWidth = _node$box$borderRight === void 0 ? 0 : _node$box$borderRight,\n      _node$box$borderBotto = _node$box.borderBottomWidth,\n      borderBottomWidth = _node$box$borderBotto === void 0 ? 0 : _node$box$borderBotto;\n  ctx.fillColor(CONTENT_COLOR).opacity(0.5).rect(left + paddingLeft + borderLeftWidth, top + paddingTop + borderTopWidth, width - paddingLeft - paddingRight - borderRightWidth - borderLeftWidth, height - paddingTop - paddingBottom - borderTopWidth - borderBottomWidth).fill();\n};\n\nvar debugPadding = function debugPadding(ctx, node) {\n  var _node$box2 = node.box,\n      left = _node$box2.left,\n      top = _node$box2.top,\n      width = _node$box2.width,\n      height = _node$box2.height,\n      _node$box2$paddingLef = _node$box2.paddingLeft,\n      paddingLeft = _node$box2$paddingLef === void 0 ? 0 : _node$box2$paddingLef,\n      _node$box2$paddingTop = _node$box2.paddingTop,\n      paddingTop = _node$box2$paddingTop === void 0 ? 0 : _node$box2$paddingTop,\n      _node$box2$paddingRig = _node$box2.paddingRight,\n      paddingRight = _node$box2$paddingRig === void 0 ? 0 : _node$box2$paddingRig,\n      _node$box2$paddingBot = _node$box2.paddingBottom,\n      paddingBottom = _node$box2$paddingBot === void 0 ? 0 : _node$box2$paddingBot,\n      _node$box2$borderLeft = _node$box2.borderLeftWidth,\n      borderLeftWidth = _node$box2$borderLeft === void 0 ? 0 : _node$box2$borderLeft,\n      _node$box2$borderTopW = _node$box2.borderTopWidth,\n      borderTopWidth = _node$box2$borderTopW === void 0 ? 0 : _node$box2$borderTopW,\n      _node$box2$borderRigh = _node$box2.borderRightWidth,\n      borderRightWidth = _node$box2$borderRigh === void 0 ? 0 : _node$box2$borderRigh,\n      _node$box2$borderBott = _node$box2.borderBottomWidth,\n      borderBottomWidth = _node$box2$borderBott === void 0 ? 0 : _node$box2$borderBott;\n  ctx.fillColor(PADDING_COLOR).opacity(0.5); // Padding top\n\n  ctx.rect(left + paddingLeft + borderLeftWidth, top + borderTopWidth, width - paddingRight - paddingLeft - borderLeftWidth - borderRightWidth, paddingTop).fill(); // Padding left\n\n  ctx.rect(left + borderLeftWidth, top + borderTopWidth, paddingLeft, height - borderTopWidth - borderBottomWidth).fill(); // Padding right\n\n  ctx.rect(left + width - paddingRight - borderRightWidth, top + borderTopWidth, paddingRight, height - borderTopWidth - borderBottomWidth).fill(); // Padding bottom\n\n  ctx.rect(left + paddingLeft + borderLeftWidth, top + height - paddingBottom - borderBottomWidth, width - paddingRight - paddingLeft - borderLeftWidth - borderRightWidth, paddingBottom).fill();\n};\n\nvar getMargin = function getMargin(box) {\n  var marginLeft = box.marginLeft === 'auto' ? 0 : box.marginLeft;\n  var marginTop = box.marginTop === 'auto' ? 0 : box.marginTop;\n  var marginRight = box.marginRight === 'auto' ? 0 : box.marginRight;\n  var marginBottom = box.marginBottom === 'auto' ? 0 : box.marginBottom;\n  return {\n    marginLeft: marginLeft,\n    marginTop: marginTop,\n    marginRight: marginRight,\n    marginBottom: marginBottom\n  };\n};\n\nvar debugMargin = function debugMargin(ctx, node) {\n  var _node$box3 = node.box,\n      left = _node$box3.left,\n      top = _node$box3.top,\n      width = _node$box3.width,\n      height = _node$box3.height;\n\n  var _getMargin = getMargin(node.box),\n      _getMargin$marginLeft = _getMargin.marginLeft,\n      marginLeft = _getMargin$marginLeft === void 0 ? 0 : _getMargin$marginLeft,\n      _getMargin$marginTop = _getMargin.marginTop,\n      marginTop = _getMargin$marginTop === void 0 ? 0 : _getMargin$marginTop,\n      _getMargin$marginRigh = _getMargin.marginRight,\n      marginRight = _getMargin$marginRigh === void 0 ? 0 : _getMargin$marginRigh,\n      _getMargin$marginBott = _getMargin.marginBottom,\n      marginBottom = _getMargin$marginBott === void 0 ? 0 : _getMargin$marginBott;\n\n  ctx.fillColor(MARGIN_COLOR).opacity(0.5); // Margin top\n\n  ctx.rect(left, top - marginTop, width, marginTop).fill(); // Margin left\n\n  ctx.rect(left - marginLeft, top - marginTop, marginLeft, height + marginTop + marginBottom).fill(); // Margin right\n\n  ctx.rect(left + width, top - marginTop, marginRight, height + marginTop + marginBottom).fill(); // Margin bottom\n\n  ctx.rect(left, top + height, width, marginBottom).fill();\n};\n\nvar debugText = function debugText(ctx, node) {\n  var _node$box4 = node.box,\n      left = _node$box4.left,\n      top = _node$box4.top,\n      width = _node$box4.width,\n      height = _node$box4.height;\n\n  var _getMargin2 = getMargin(node.box),\n      _getMargin2$marginLef = _getMargin2.marginLeft,\n      marginLeft = _getMargin2$marginLef === void 0 ? 0 : _getMargin2$marginLef,\n      _getMargin2$marginTop = _getMargin2.marginTop,\n      marginTop = _getMargin2$marginTop === void 0 ? 0 : _getMargin2$marginTop,\n      _getMargin2$marginRig = _getMargin2.marginRight,\n      marginRight = _getMargin2$marginRig === void 0 ? 0 : _getMargin2$marginRig,\n      _getMargin2$marginBot = _getMargin2.marginBottom,\n      marginBottom = _getMargin2$marginBot === void 0 ? 0 : _getMargin2$marginBot;\n\n  var roundedWidth = Math.round(width + marginLeft + marginRight);\n  var roundedHeight = Math.round(height + marginTop + marginBottom);\n  ctx.fontSize(6).opacity(1).fillColor('black').text(roundedWidth + \" x \" + roundedHeight, left - marginLeft, Math.max(top - marginTop - 4, 1));\n};\n\nvar debugOrigin = function debugOrigin(ctx, node) {\n  if (node.origin) {\n    ctx.circle(node.origin.left, node.origin.top, 3).fill('red').circle(node.origin.left, node.origin.top, 5).stroke('red');\n  }\n};\n\nvar renderDebug = function renderDebug(ctx, node) {\n  var _node$props;\n\n  if (!((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.debug)) return;\n  ctx.save();\n  debugContent(ctx, node);\n  debugPadding(ctx, node);\n  debugMargin(ctx, node);\n  debugText(ctx, node);\n  debugOrigin(ctx, node);\n  ctx.restore();\n};\n\nvar availableMethods = ['dash', 'clip', 'save', 'path', 'fill', 'font', 'text', 'rect', 'scale', 'moveTo', 'lineTo', 'stroke', 'rotate', 'circle', 'lineCap', 'opacity', 'ellipse', 'polygon', 'restore', 'lineJoin', 'fontSize', 'fillColor', 'lineWidth', 'translate', 'miterLimit', 'strokeColor', 'fillOpacity', 'roundedRect', 'fillAndStroke', 'strokeOpacity', 'bezierCurveTo', 'quadraticCurveTo', 'linearGradient', 'radialGradient'];\n\nvar painter = function painter(ctx) {\n  var p = availableMethods.reduce(function (acc, prop) {\n    var _extends2;\n\n    return _extends({}, acc, (_extends2 = {}, _extends2[prop] = function () {\n      ctx[prop].apply(ctx, arguments);\n      return p;\n    }, _extends2));\n  }, {});\n  return p;\n};\n\nvar renderCanvas = function renderCanvas(ctx, node) {\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var paddingTop = node.box.paddingTop || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var paddingRight = node.box.paddingRight || 0;\n  var paddingBottom = node.box.paddingBottom || 0;\n  var availableWidth = width - paddingLeft - paddingRight;\n  var availableHeight = height - paddingTop - paddingBottom;\n\n  if (!availableWidth || !availableHeight) {\n    console.warn('Canvas element has null width or height. Please provide valid values via the `style` prop in order to correctly render it.');\n  }\n\n  ctx.save().translate(left + paddingLeft, top + paddingTop);\n\n  if (node.props.paint) {\n    node.props.paint(painter(ctx), availableWidth, availableHeight);\n  }\n\n  ctx.restore();\n}; // Ref: https://www.w3.org/TR/css-backgrounds-3/#borders\n// This constant is used to approximate a symmetrical arc using a cubic Bezier curve.\n\n\nvar KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar clipBorderTop = function clipBorderTop(ctx, layout, style, rtr, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth; // Clip outer top border edge\n\n  ctx.moveTo(left + rtl, top);\n  ctx.lineTo(left + width - rtr, top); // Ellipse coefficients outer top right cap\n\n  var c0 = rtr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width - c0, top, left + width, top + c0, left + width, top + rtr); // Move down in case the margin exceedes the radius\n\n  var topRightYCoord = top + Math.max(borderTopWidth, rtr);\n  ctx.lineTo(left + width, topRightYCoord); // Clip inner top right cap\n\n  ctx.lineTo(left + width - borderRightWidth, topRightYCoord); // Ellipse coefficients inner top right cap\n\n  var innerTopRightRadiusX = Math.max(rtr - borderRightWidth, 0);\n  var innerTopRightRadiusY = Math.max(rtr - borderTopWidth, 0);\n  var c1 = innerTopRightRadiusX * (1.0 - KAPPA);\n  var c2 = innerTopRightRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth, top + borderTopWidth + c2, left + width - borderRightWidth - c1, top + borderTopWidth, left + width - borderRightWidth - innerTopRightRadiusX, top + borderTopWidth); // Clip inner top border edge\n\n  ctx.lineTo(left + Math.max(rtl, borderLeftWidth), top + borderTopWidth); // Ellipse coefficients inner top left cap\n\n  var innerTopLeftRadiusX = Math.max(rtl - borderLeftWidth, 0);\n  var innerTopLeftRadiusY = Math.max(rtl - borderTopWidth, 0);\n  var c3 = innerTopLeftRadiusX * (1.0 - KAPPA);\n  var c4 = innerTopLeftRadiusY * (1.0 - KAPPA);\n  var topLeftYCoord = top + Math.max(borderTopWidth, rtl); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth + c3, top + borderTopWidth, left + borderLeftWidth, top + borderTopWidth + c4, left + borderLeftWidth, topLeftYCoord);\n  ctx.lineTo(left, topLeftYCoord); // Move down in case the margin exceedes the radius\n\n  ctx.lineTo(left, top + rtl); // Ellipse coefficients outer top left cap\n\n  var c5 = rtl * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left, top + c5, left + c5, top, left + rtl, top);\n  ctx.closePath();\n  ctx.clip(); // Clip border top cap joins\n\n  if (borderRightWidth) {\n    var trSlope = -borderTopWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, trSlope * (-width / 2) + top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderLeftWidth) {\n    var _trSlope = -borderTopWidth / borderLeftWidth;\n\n    ctx.moveTo(left + width / 2, _trSlope * (-width / 2) + top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left + width, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderTop = function fillBorderTop(ctx, layout, style, rtr, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width;\n  var borderTopColor = style.borderTopColor,\n      borderTopWidth = style.borderTopWidth,\n      borderTopStyle = style.borderTopStyle,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth;\n  var c0 = rtl * (1.0 - KAPPA);\n  var c1 = rtr * (1.0 - KAPPA);\n  ctx.moveTo(left, top + Math.max(rtl, borderTopWidth));\n  ctx.bezierCurveTo(left, top + c0, left + c0, top, left + rtl, top);\n  ctx.lineTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - c1, top, left + width, top + c1, left + width, top + rtr);\n  ctx.strokeColor(borderTopColor);\n  ctx.lineWidth(Math.max(borderRightWidth, borderTopWidth, borderLeftWidth) * 2);\n\n  if (borderTopStyle === 'dashed') {\n    ctx.dash(borderTopWidth * 2, {\n      space: borderTopWidth * 1.2\n    });\n  } else if (borderTopStyle === 'dotted') {\n    ctx.dash(borderTopWidth, {\n      space: borderTopWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderRight = function clipBorderRight(ctx, layout, style, rtr, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderBottomWidth = style.borderBottomWidth; // Clip outer right border edge\n\n  ctx.moveTo(left + width, top + rtr);\n  ctx.lineTo(left + width, top + height - rbr); // Ellipse coefficients outer bottom right cap\n\n  var c0 = rbr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width, top + height - c0, left + width - c0, top + height, left + width - rbr, top + height); // Move left in case the margin exceedes the radius\n\n  var topBottomXCoord = left + width - Math.max(borderRightWidth, rbr);\n  ctx.lineTo(topBottomXCoord, top + height); // Clip inner bottom right cap\n\n  ctx.lineTo(topBottomXCoord, top + height - borderBottomWidth); // Ellipse coefficients inner bottom right cap\n\n  var innerBottomRightRadiusX = Math.max(rbr - borderRightWidth, 0);\n  var innerBottomRightRadiusY = Math.max(rbr - borderBottomWidth, 0);\n  var c1 = innerBottomRightRadiusX * (1.0 - KAPPA);\n  var c2 = innerBottomRightRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth - c1, top + height - borderBottomWidth, left + width - borderRightWidth, top + height - borderBottomWidth - c2, left + width - borderRightWidth, top + height - Math.max(rbr, borderBottomWidth)); // Clip inner right border edge\n\n  ctx.lineTo(left + width - borderRightWidth, top + Math.max(rtr, borderTopWidth)); // Ellipse coefficients inner top right cap\n\n  var innerTopRightRadiusX = Math.max(rtr - borderRightWidth, 0);\n  var innerTopRightRadiusY = Math.max(rtr - borderTopWidth, 0);\n  var c3 = innerTopRightRadiusX * (1.0 - KAPPA);\n  var c4 = innerTopRightRadiusY * (1.0 - KAPPA);\n  var topRightXCoord = left + width - Math.max(rtr, borderRightWidth); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth, top + borderTopWidth + c4, left + width - borderRightWidth - c3, top + borderTopWidth, topRightXCoord, top + borderTopWidth);\n  ctx.lineTo(topRightXCoord, top); // Move right in case the margin exceedes the radius\n\n  ctx.lineTo(left + width - rtr, top); // Ellipse coefficients outer top right cap\n\n  var c5 = rtr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width - c5, top, left + width, top + c5, left + width, top + rtr);\n  ctx.closePath();\n  ctx.clip(); // Clip border right cap joins\n\n  if (borderTopWidth) {\n    var trSlope = -borderTopWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, trSlope * (-width / 2) + top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderBottomWidth) {\n    var brSlope = borderBottomWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, brSlope * (-width / 2) + top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderRight = function fillBorderRight(ctx, layout, style, rtr, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderRightColor = style.borderRightColor,\n      borderRightStyle = style.borderRightStyle,\n      borderRightWidth = style.borderRightWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderBottomWidth = style.borderBottomWidth;\n  var c0 = rbr * (1.0 - KAPPA);\n  var c1 = rtr * (1.0 - KAPPA);\n  ctx.moveTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - c1, top, left + width, top + c1, left + width, top + rtr);\n  ctx.lineTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - c0, left + width - c0, top + height, left + width - rbr, top + height);\n  ctx.strokeColor(borderRightColor);\n  ctx.lineWidth(Math.max(borderRightWidth, borderTopWidth, borderBottomWidth) * 2);\n\n  if (borderRightStyle === 'dashed') {\n    ctx.dash(borderRightWidth * 2, {\n      space: borderRightWidth * 1.2\n    });\n  } else if (borderRightStyle === 'dotted') {\n    ctx.dash(borderRightWidth, {\n      space: borderRightWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderBottom = function clipBorderBottom(ctx, layout, style, rbl, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderBottomWidth = style.borderBottomWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth; // Clip outer top border edge\n\n  ctx.moveTo(left + width - rbr, top + height);\n  ctx.lineTo(left + rbl, top + height); // Ellipse coefficients outer top right cap\n\n  var c0 = rbl * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl); // Move up in case the margin exceedes the radius\n\n  var bottomLeftYCoord = top + height - Math.max(borderBottomWidth, rbl);\n  ctx.lineTo(left, bottomLeftYCoord); // Clip inner bottom left cap\n\n  ctx.lineTo(left + borderLeftWidth, bottomLeftYCoord); // Ellipse coefficients inner top right cap\n\n  var innerBottomLeftRadiusX = Math.max(rbl - borderLeftWidth, 0);\n  var innerBottomLeftRadiusY = Math.max(rbl - borderBottomWidth, 0);\n  var c1 = innerBottomLeftRadiusX * (1.0 - KAPPA);\n  var c2 = innerBottomLeftRadiusY * (1.0 - KAPPA); // Clip inner bottom left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth, top + height - borderBottomWidth - c2, left + borderLeftWidth + c1, top + height - borderBottomWidth, left + borderLeftWidth + innerBottomLeftRadiusX, top + height - borderBottomWidth); // Clip inner bottom border edge\n\n  ctx.lineTo(left + width - Math.max(rbr, borderRightWidth), top + height - borderBottomWidth); // Ellipse coefficients inner top left cap\n\n  var innerBottomRightRadiusX = Math.max(rbr - borderRightWidth, 0);\n  var innerBottomRightRadiusY = Math.max(rbr - borderBottomWidth, 0);\n  var c3 = innerBottomRightRadiusX * (1.0 - KAPPA);\n  var c4 = innerBottomRightRadiusY * (1.0 - KAPPA);\n  var bottomRightYCoord = top + height - Math.max(borderBottomWidth, rbr); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth - c3, top + height - borderBottomWidth, left + width - borderRightWidth, top + height - borderBottomWidth - c4, left + width - borderRightWidth, bottomRightYCoord);\n  ctx.lineTo(left + width, bottomRightYCoord); // Move down in case the margin exceedes the radius\n\n  ctx.lineTo(left + width, top + height - rbr); // Ellipse coefficients outer top left cap\n\n  var c5 = rbr * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left + width, top + height - c5, left + width - c5, top + height, left + width - rbr, top + height);\n  ctx.closePath();\n  ctx.clip(); // Clip border bottom cap joins\n\n  if (borderRightWidth) {\n    var brSlope = borderBottomWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, brSlope * (-width / 2) + top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderLeftWidth) {\n    var trSlope = -borderBottomWidth / borderLeftWidth;\n    ctx.moveTo(left + width / 2, trSlope * (width / 2) + top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left + width, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderBottom = function fillBorderBottom(ctx, layout, style, rbl, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderBottomColor = style.borderBottomColor,\n      borderBottomStyle = style.borderBottomStyle,\n      borderBottomWidth = style.borderBottomWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth;\n  var c0 = rbl * (1.0 - KAPPA);\n  var c1 = rbr * (1.0 - KAPPA);\n  ctx.moveTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - c1, left + width - c1, top + height, left + width - rbr, top + height);\n  ctx.lineTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl);\n  ctx.strokeColor(borderBottomColor);\n  ctx.lineWidth(Math.max(borderBottomWidth, borderRightWidth, borderLeftWidth) * 2);\n\n  if (borderBottomStyle === 'dashed') {\n    ctx.dash(borderBottomWidth * 2, {\n      space: borderBottomWidth * 1.2\n    });\n  } else if (borderBottomStyle === 'dotted') {\n    ctx.dash(borderBottomWidth, {\n      space: borderBottomWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderLeft = function clipBorderLeft(ctx, layout, style, rbl, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderLeftWidth = style.borderLeftWidth,\n      borderBottomWidth = style.borderBottomWidth; // Clip outer left border edge\n\n  ctx.moveTo(left, top + height - rbl);\n  ctx.lineTo(left, top + rtl); // Ellipse coefficients outer top left cap\n\n  var c0 = rtl * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left, top + c0, left + c0, top, left + rtl, top); // Move right in case the margin exceedes the radius\n\n  var topLeftCoordX = left + Math.max(borderLeftWidth, rtl);\n  ctx.lineTo(topLeftCoordX, top); // Clip inner top left cap\n\n  ctx.lineTo(topLeftCoordX, top + borderTopWidth); // Ellipse coefficients inner top left cap\n\n  var innerTopLeftRadiusX = Math.max(rtl - borderLeftWidth, 0);\n  var innerTopLeftRadiusY = Math.max(rtl - borderTopWidth, 0);\n  var c1 = innerTopLeftRadiusX * (1.0 - KAPPA);\n  var c2 = innerTopLeftRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth + c1, top + borderTopWidth, left + borderLeftWidth, top + borderTopWidth + c2, left + borderLeftWidth, top + Math.max(rtl, borderTopWidth)); // Clip inner left border edge\n\n  ctx.lineTo(left + borderLeftWidth, top + height - Math.max(rbl, borderBottomWidth)); // Ellipse coefficients inner bottom left cap\n\n  var innerBottomLeftRadiusX = Math.max(rbl - borderLeftWidth, 0);\n  var innerBottomLeftRadiusY = Math.max(rbl - borderBottomWidth, 0);\n  var c3 = innerBottomLeftRadiusX * (1.0 - KAPPA);\n  var c4 = innerBottomLeftRadiusY * (1.0 - KAPPA);\n  var bottomLeftXCoord = left + Math.max(rbl, borderLeftWidth); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth, top + height - borderBottomWidth - c4, left + borderLeftWidth + c3, top + height - borderBottomWidth, bottomLeftXCoord, top + height - borderBottomWidth);\n  ctx.lineTo(bottomLeftXCoord, top + height); // Move left in case the margin exceedes the radius\n\n  ctx.lineTo(left + rbl, top + height); // Ellipse coefficients outer top right cap\n\n  var c5 = rbl * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + c5, top + height, left, top + height - c5, left, top + height - rbl);\n  ctx.closePath();\n  ctx.clip(); // Clip border right cap joins\n\n  if (borderBottomWidth) {\n    var trSlope = -borderBottomWidth / borderLeftWidth;\n    ctx.moveTo(left + width / 2, trSlope * (width / 2) + top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left + width, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderBottomWidth) {\n    var _trSlope2 = -borderTopWidth / borderLeftWidth;\n\n    ctx.moveTo(left + width / 2, _trSlope2 * (-width / 2) + top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderLeft = function fillBorderLeft(ctx, layout, style, rbl, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      height = layout.height;\n  var borderLeftColor = style.borderLeftColor,\n      borderLeftStyle = style.borderLeftStyle,\n      borderLeftWidth = style.borderLeftWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderBottomWidth = style.borderBottomWidth;\n  var c0 = rbl * (1.0 - KAPPA);\n  var c1 = rtl * (1.0 - KAPPA);\n  ctx.moveTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl);\n  ctx.lineTo(left, top + rtl);\n  ctx.bezierCurveTo(left, top + c1, left + c1, top, left + rtl, top);\n  ctx.strokeColor(borderLeftColor);\n  ctx.lineWidth(Math.max(borderLeftWidth, borderTopWidth, borderBottomWidth) * 2);\n\n  if (borderLeftStyle === 'dashed') {\n    ctx.dash(borderLeftWidth * 2, {\n      space: borderLeftWidth * 1.2\n    });\n  } else if (borderLeftStyle === 'dotted') {\n    ctx.dash(borderLeftWidth, {\n      space: borderLeftWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar shouldRenderBorders = function shouldRenderBorders(node) {\n  return node.box && (node.box.borderTopWidth || node.box.borderRightWidth || node.box.borderBottomWidth || node.box.borderLeftWidth);\n};\n\nvar renderBorders = function renderBorders(ctx, node) {\n  if (!shouldRenderBorders(node)) return;\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height,\n      borderTopWidth = _node$box.borderTopWidth,\n      borderLeftWidth = _node$box.borderLeftWidth,\n      borderRightWidth = _node$box.borderRightWidth,\n      borderBottomWidth = _node$box.borderBottomWidth;\n  var _node$style = node.style,\n      opacity = _node$style.opacity,\n      _node$style$borderTop = _node$style.borderTopLeftRadius,\n      borderTopLeftRadius = _node$style$borderTop === void 0 ? 0 : _node$style$borderTop,\n      _node$style$borderTop2 = _node$style.borderTopRightRadius,\n      borderTopRightRadius = _node$style$borderTop2 === void 0 ? 0 : _node$style$borderTop2,\n      _node$style$borderBot = _node$style.borderBottomLeftRadius,\n      borderBottomLeftRadius = _node$style$borderBot === void 0 ? 0 : _node$style$borderBot,\n      _node$style$borderBot2 = _node$style.borderBottomRightRadius,\n      borderBottomRightRadius = _node$style$borderBot2 === void 0 ? 0 : _node$style$borderBot2,\n      _node$style$borderTop3 = _node$style.borderTopColor,\n      borderTopColor = _node$style$borderTop3 === void 0 ? 'black' : _node$style$borderTop3,\n      _node$style$borderTop4 = _node$style.borderTopStyle,\n      borderTopStyle = _node$style$borderTop4 === void 0 ? 'solid' : _node$style$borderTop4,\n      _node$style$borderLef = _node$style.borderLeftColor,\n      borderLeftColor = _node$style$borderLef === void 0 ? 'black' : _node$style$borderLef,\n      _node$style$borderLef2 = _node$style.borderLeftStyle,\n      borderLeftStyle = _node$style$borderLef2 === void 0 ? 'solid' : _node$style$borderLef2,\n      _node$style$borderRig = _node$style.borderRightColor,\n      borderRightColor = _node$style$borderRig === void 0 ? 'black' : _node$style$borderRig,\n      _node$style$borderRig2 = _node$style.borderRightStyle,\n      borderRightStyle = _node$style$borderRig2 === void 0 ? 'solid' : _node$style$borderRig2,\n      _node$style$borderBot3 = _node$style.borderBottomColor,\n      borderBottomColor = _node$style$borderBot3 === void 0 ? 'black' : _node$style$borderBot3,\n      _node$style$borderBot4 = _node$style.borderBottomStyle,\n      borderBottomStyle = _node$style$borderBot4 === void 0 ? 'solid' : _node$style$borderBot4;\n  var style = {\n    borderTopColor: borderTopColor,\n    borderTopWidth: borderTopWidth,\n    borderTopStyle: borderTopStyle,\n    borderLeftColor: borderLeftColor,\n    borderLeftWidth: borderLeftWidth,\n    borderLeftStyle: borderLeftStyle,\n    borderRightColor: borderRightColor,\n    borderRightWidth: borderRightWidth,\n    borderRightStyle: borderRightStyle,\n    borderBottomColor: borderBottomColor,\n    borderBottomWidth: borderBottomWidth,\n    borderBottomStyle: borderBottomStyle,\n    borderTopLeftRadius: borderTopLeftRadius,\n    borderTopRightRadius: borderTopRightRadius,\n    borderBottomLeftRadius: borderBottomLeftRadius,\n    borderBottomRightRadius: borderBottomRightRadius\n  };\n  var rtr = Math.min(borderTopRightRadius, 0.5 * width, 0.5 * height);\n  var rtl = Math.min(borderTopLeftRadius, 0.5 * width, 0.5 * height);\n  var rbr = Math.min(borderBottomRightRadius, 0.5 * width, 0.5 * height);\n  var rbl = Math.min(borderBottomLeftRadius, 0.5 * width, 0.5 * height);\n  ctx.save();\n  ctx.strokeOpacity(opacity);\n\n  if (borderTopWidth) {\n    ctx.save();\n    clipBorderTop(ctx, node.box, style, rtr, rtl);\n    fillBorderTop(ctx, node.box, style, rtr, rtl);\n    ctx.restore();\n  }\n\n  if (borderRightWidth) {\n    ctx.save();\n    clipBorderRight(ctx, node.box, style, rtr, rbr);\n    fillBorderRight(ctx, node.box, style, rtr, rbr);\n    ctx.restore();\n  }\n\n  if (borderBottomWidth) {\n    ctx.save();\n    clipBorderBottom(ctx, node.box, style, rbl, rbr);\n    fillBorderBottom(ctx, node.box, style, rbl, rbr);\n    ctx.restore();\n  }\n\n  if (borderLeftWidth) {\n    ctx.save();\n    clipBorderLeft(ctx, node.box, style, rbl, rtl);\n    fillBorderLeft(ctx, node.box, style, rbl, rtl);\n    ctx.restore();\n  }\n\n  ctx.restore();\n};\n\nvar drawBackground = function drawBackground(ctx, node) {\n  var _node$style;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var color = parseColor(node.style.backgroundColor);\n  var nodeOpacity = isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.opacity) ? 1 : node.style.opacity;\n  var opacity = Math.min(color.opacity, nodeOpacity);\n  ctx.fillOpacity(opacity).fillColor(color.value).rect(left, top, width, height).fill();\n};\n\nvar renderBackground = function renderBackground(ctx, node) {\n  var _node$style2;\n\n  var hasBackground = !!node.box && !!((_node$style2 = node.style) !== null && _node$style2 !== void 0 && _node$style2.backgroundColor);\n\n  if (hasBackground) {\n    ctx.save();\n    clipNode(ctx, node);\n    drawBackground(ctx, node);\n    ctx.restore();\n  }\n};\n\nvar isSrcId = function isSrcId(value) {\n  return /^#.+/.test(value);\n};\n\nvar setLink = function setLink(ctx, node) {\n  var props = node.props || {};\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var src = props.src || props.href;\n\n  if (src) {\n    var isId = isSrcId(src);\n    var method = isId ? 'goTo' : 'link';\n    var value = isId ? src.slice(1) : src;\n    ctx[method](left, top, width, height, value);\n  }\n};\n\nvar setDestination = function setDestination(ctx, node) {\n  var _node$props;\n\n  if ((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.id) {\n    ctx.addNamedDestination(node.props.id, 'XYZ', null, node.box.top, null);\n  }\n};\n\nvar _renderFns;\n\nvar isRecursiveNode = function isRecursiveNode(node) {\n  return node.type !== P.Text && node.type !== P.Svg;\n};\n\nvar renderChildren = function renderChildren(ctx, node, options) {\n  ctx.save();\n\n  if (node.box) {\n    ctx.translate(node.box.left, node.box.top);\n  }\n\n  var children = node.children || [];\n\n  var renderChild = function renderChild(child) {\n    return renderNode(ctx, child, options);\n  };\n\n  children.forEach(renderChild);\n  ctx.restore();\n};\n\nvar renderFns = (_renderFns = {}, _renderFns[P.Text] = renderText, _renderFns[P.Note] = renderNote, _renderFns[P.Image] = renderImage, _renderFns[P.Canvas] = renderCanvas, _renderFns[P.Svg] = renderSvg, _renderFns[P.Link] = setLink, _renderFns);\n\nvar renderNode = function renderNode(ctx, node, options) {\n  var _node$style;\n\n  var overflowHidden = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.overflow) === 'hidden';\n  var shouldRenderChildren = isRecursiveNode(node);\n  if (node.type === P.Page) renderPage(ctx, node);\n  ctx.save();\n  if (overflowHidden) clipNode(ctx, node);\n  applyTransformations(ctx, node);\n  renderBackground(ctx, node);\n  renderBorders(ctx, node);\n  var renderFn = renderFns[node.type];\n  if (renderFn) renderFn(ctx, node, options);\n  if (shouldRenderChildren) renderChildren(ctx, node, options);\n  setDestination(ctx, node);\n  renderDebug(ctx, node);\n  ctx.restore();\n};\n/* eslint-disable no-param-reassign */\n\n\nvar setPDFMetadata = function setPDFMetadata(target) {\n  return function (key, value) {\n    if (value) target.info[key] = value;\n  };\n};\n/**\n * Set document instance metadata\n *\n * @param {Object} ctx document instance\n * @param {Object} doc document root\n */\n\n\nvar addMetadata = function addMetadata(ctx, doc) {\n  var setProp = setPDFMetadata(ctx);\n  var props = doc.props || {};\n  var title = props.title || null;\n  var author = props.author || null;\n  var subject = props.subject || null;\n  var keywords = props.keywords || null;\n  var creator = props.creator || 'react-pdf';\n  var producer = props.producer || 'react-pdf';\n  setProp('Title', title);\n  setProp('Author', author);\n  setProp('Subject', subject);\n  setProp('Keywords', keywords);\n  setProp('Creator', creator);\n  setProp('Producer', producer);\n};\n/* eslint-disable no-param-reassign */\n\n\nvar addNodeBookmark = function addNodeBookmark(ctx, node, pageNumber, registry) {\n  var _node$props;\n\n  var bookmark = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.bookmark;\n\n  if (bookmark) {\n    var title = bookmark.title,\n        parent = bookmark.parent,\n        expanded = bookmark.expanded,\n        zoom = bookmark.zoom,\n        fit = bookmark.fit;\n    var outline = registry[parent] || ctx.outline;\n    var top = bookmark.top || node.box.top;\n    var left = bookmark.left || node.box.left;\n    var instance = outline.addItem(title, {\n      pageNumber: pageNumber,\n      expanded: expanded,\n      top: top,\n      left: left,\n      zoom: zoom,\n      fit: fit\n    });\n    registry[bookmark.ref] = instance;\n  }\n\n  if (!node.children) return;\n  node.children.forEach(function (child) {\n    return addNodeBookmark(ctx, child, pageNumber, registry);\n  });\n};\n\nvar addBookmarks = function addBookmarks(ctx, root) {\n  var registry = {};\n  var pages = root.children || [];\n  pages.forEach(function (page, i) {\n    addNodeBookmark(ctx, page, i, registry);\n  });\n};\n\nvar render = function render(ctx, doc) {\n  var pages = doc.children || [];\n  var options = {\n    imageCache: new Map()\n  };\n  addMetadata(ctx, doc);\n  pages.forEach(function (page) {\n    return renderNode(ctx, page, options);\n  });\n  addBookmarks(ctx, doc);\n  ctx.end();\n  return ctx;\n};\n\nexport { render as default };","map":{"version":3,"sources":["D:/react-myprojects/hrms-demo/node_modules/@react-pdf/render/lib/index.es.js"],"names":["P","isNil","matchPercent","absPath","parsePath","normalizePath","colorString","_extends","renderPath","ctx","node","_node$props","d","props","path","KAPPA$3","Math","sqrt","renderRect","_node$props2","_node$props3","_node$props4","_node$props5","_node$props6","x","y","rx","ry","width","height","krx","kry","moveTo","lineTo","bezierCurveTo","closePath","renderLine$1","renderLine","_ref","x1","x2","y1","y2","renderGroup","KAPPA$2","drawEllipse","cx","cy","ox","oy","xe","ye","xm","ym","renderEllipse","renderCircle","r","renderGlyphs","glyphs","positions","options","scale","_fontSize","unitsPerEm","_font","font","advanceWidthScale","encodedGlyphs","encodeGlyphs","encodedPositions","map","pos","i","xAdvance","yAdvance","xOffset","yOffset","advanceWidth","_glyphs","renderRun$1","renderRun","run","runAdvanceWidth","_run$attributes","attributes","fontSize","color","opacity","fillColor","fillOpacity","sbix","COLR","CPAL","save","translate","ascent","length","position","glyph","render","restore","name","error","console","log","renderSpan","line","textAnchor","dominantBaseline","_line$box","_line$box2","_line$runs$","_line$runs$2","_line$runs$2$attribut","box","runs","xHeight","descent","capHeight","xTranslate","yTranslate","forEach","renderSvgText","children","span","lines","pairs","values","result","push","parsePoints","points","trim","replace","split","slice","parseFloat","drawPolyline","p","renderPolyline","renderPolygon","renderImage$1","renderImage","image","data","_node$style","style","paddingTop","paddingLeft","warn","href","KAPPA$1","clipNode","_node$box","top","left","_node$style$borderTop","borderTopLeftRadius","_node$style$borderTop2","borderTopRightRadius","_node$style$borderBot","borderBottomRightRadius","_node$style$borderBot2","borderBottomLeftRadius","rtr","min","ctr","rbr","cbr","rbl","cbl","rtl","ctl","clip","applySingleTransformation","transform","origin","operation","value","scaleX","scaleY","angle","rotate","xAngle","yAngle","skew","apply","applyTransformations","operations","_boundingBoxFns","getPathBoundingBox","bounds","Infinity","l","j","getCircleBoundingBox","getEllipseBoundingBox","_node$props7","_node$props8","getLineBoundingBox","_node$props9","_node$props10","_node$props11","_node$props12","max","getRectBoundingBox","_node$props13","_node$props14","_node$props15","_node$props16","concat","getPolylineBoundingBox","_node$props17","xValues","yValues","boundingBoxFns","Rect","Line","Path","Circle","Ellipse","Polygon","Polyline","getBoundingBox","boundingBoxFn","type","_renderFns$1","setStrokeWidth","lineWidth","strokeWidth","setStrokeColor","strokeColor","stroke","setOpacity","setFillOpacity","setStrokeOpacity","strokeOpacity","setLineJoin","lineJoin","strokeLinejoin","setLineCap","lineCap","strokeLinecap","setLineDash","strokeDasharray","dash","hasLinearGradientFill","_node$props9$fill","fill","LinearGradient","hasRadialGradientFill","_node$props10$fill","RadialGradient","setLinearGradientFill","bbox","gradient","m0","m3","m4","m5","gx1","gy1","gx2","gy2","grad","linearGradient","stop","offset","stopColor","stopOpacity","setRadialGradientFill","fx","fy","gr","gcx","gcy","gfx","gfy","radialGradient","setFillColor","setFill","draw","fillAndStroke","fillRule","noop","renderFns$1","Tspan","TextInstance","G","Text","Image","renderNode$1","renderNode","renderFn","drawNode","clipPath","child","drawChildren","resolveAspectRatio","viewBox","_node$props15$preserv","preserveAspectRatio","_preserveAspectRatio$","meetOrSlice","_preserveAspectRatio$2","align","minX","minY","logicalWidth","maxX","logicalHeight","maxY","logicalRatio","physicalRatio","moveToOrigin","_node$box2","renderSvg","parseColor","hex","parsed","get","to","DEST_REGEXP","isSrcId$1","isSrcId","src","match","renderAttachment","attachment","_attachment$xOffset","_attachment$yOffset","fit","valign","renderAttachments","space","glyphForCodePoint","objectReplacement","attachmentAdvance","id","link","outlineRuns","rect","goTo","renderBackground$1","renderBackground","backgroundColor","renderDecorationLine","test","dist","step","stepCount","floor","remainingWidth","adjustment","cp1y","cp2y","lineAscent","outlineLines","isLastRun","overflowRight","backgroundRect","_i","decorationLines","decorationLine","renderBlock","block","renderText","_node$box3","blocks","initialY","offsetX","alignOffset","renderPage","dpi","userUnit","addPage","size","margin","renderNote","_node$children","_node$style2","borderWidth","note","isNumeric","n","Number","isNaN","isFinite","applyContainObjectFit","cw","ch","iw","ih","px","py","cr","ir","pxp","pyp","pxv","percent","pyv","_height","_width","_yOffset","_xOffset","applyNoneObjectFit","applyCoverObjectFit","_width2","_height2","_xOffset2","_yOffset2","applyScaleDownObjectFit","containDimension","noneDimension","applyFillObjectFit","resolveObjectFit","drawImage","_node$style3","_node$style4","objectFit","objectPositionX","objectPositionY","paddingRight","paddingBottom","imageCache","Map","_resolveObjectFit","cacheKey","key","embedImage","set","imageOpacity","JSON","stringify","CONTENT_COLOR","PADDING_COLOR","MARGIN_COLOR","debugContent","_node$box$paddingLeft","_node$box$paddingTop","_node$box$paddingRigh","_node$box$paddingBott","_node$box$borderLeftW","borderLeftWidth","_node$box$borderTopWi","borderTopWidth","_node$box$borderRight","borderRightWidth","_node$box$borderBotto","borderBottomWidth","debugPadding","_node$box2$paddingLef","_node$box2$paddingTop","_node$box2$paddingRig","_node$box2$paddingBot","_node$box2$borderLeft","_node$box2$borderTopW","_node$box2$borderRigh","_node$box2$borderBott","getMargin","marginLeft","marginTop","marginRight","marginBottom","debugMargin","_getMargin","_getMargin$marginLeft","_getMargin$marginTop","_getMargin$marginRigh","_getMargin$marginBott","debugText","_node$box4","_getMargin2","_getMargin2$marginLef","_getMargin2$marginTop","_getMargin2$marginRig","_getMargin2$marginBot","roundedWidth","round","roundedHeight","text","debugOrigin","circle","renderDebug","debug","availableMethods","painter","reduce","acc","prop","_extends2","arguments","renderCanvas","availableWidth","availableHeight","paint","KAPPA","clipBorderTop","layout","c0","topRightYCoord","innerTopRightRadiusX","innerTopRightRadiusY","c1","c2","innerTopLeftRadiusX","innerTopLeftRadiusY","c3","c4","topLeftYCoord","c5","trSlope","_trSlope","fillBorderTop","borderTopColor","borderTopStyle","undash","clipBorderRight","topBottomXCoord","innerBottomRightRadiusX","innerBottomRightRadiusY","topRightXCoord","brSlope","fillBorderRight","borderRightColor","borderRightStyle","clipBorderBottom","bottomLeftYCoord","innerBottomLeftRadiusX","innerBottomLeftRadiusY","bottomRightYCoord","fillBorderBottom","borderBottomColor","borderBottomStyle","clipBorderLeft","topLeftCoordX","bottomLeftXCoord","_trSlope2","fillBorderLeft","borderLeftColor","borderLeftStyle","shouldRenderBorders","renderBorders","_node$style$borderTop3","_node$style$borderTop4","_node$style$borderLef","_node$style$borderLef2","_node$style$borderRig","_node$style$borderRig2","_node$style$borderBot3","_node$style$borderBot4","drawBackground","nodeOpacity","hasBackground","setLink","isId","method","setDestination","addNamedDestination","_renderFns","isRecursiveNode","Svg","renderChildren","renderChild","renderFns","Note","Canvas","Link","overflowHidden","overflow","shouldRenderChildren","Page","setPDFMetadata","target","info","addMetadata","doc","setProp","title","author","subject","keywords","creator","producer","addNodeBookmark","pageNumber","registry","bookmark","parent","expanded","zoom","outline","instance","addItem","ref","addBookmarks","root","pages","page","end","default"],"mappings":"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","sourcesContent":["import * as P from '@react-pdf/primitives';\nimport { isNil, matchPercent } from '@react-pdf/fns';\nimport absPath from 'abs-svg-path';\nimport parsePath from 'parse-svg-path';\nimport normalizePath from 'normalize-svg-path';\nimport colorString from 'color-string';\nimport _extends from '@babel/runtime/helpers/extends';\n\nvar renderPath = function renderPath(ctx, node) {\n  var _node$props;\n\n  var d = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.d;\n  if (d) ctx.path(node.props.d);\n};\n\nvar KAPPA$3 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar renderRect = function renderRect(ctx, node) {\n  var _node$props, _node$props2, _node$props3, _node$props4, _node$props5, _node$props6;\n\n  var x = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.x) || 0;\n  var y = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.y) || 0;\n  var rx = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.rx) || 0;\n  var ry = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.ry) || 0;\n  var width = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.width) || 0;\n  var height = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.height) || 0;\n  if (!width || !height) return;\n\n  if (rx && ry) {\n    var krx = rx * KAPPA$3;\n    var kry = ry * KAPPA$3;\n    ctx.moveTo(x + rx, y);\n    ctx.lineTo(x - rx + width, y);\n    ctx.bezierCurveTo(x - rx + width + krx, y, x + width, y + ry - kry, x + width, y + ry);\n    ctx.lineTo(x + width, y + height - ry);\n    ctx.bezierCurveTo(x + width, y + height - ry + kry, x - rx + width + krx, y + height, x - rx + width, y + height);\n    ctx.lineTo(x + rx, y + height);\n    ctx.bezierCurveTo(x + rx - krx, y + height, x, y + height - ry + kry, x, y + height - ry);\n    ctx.lineTo(x, y + ry);\n    ctx.bezierCurveTo(x, y + ry - kry, x + rx - krx, y, x + rx, y);\n  } else {\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + width, y);\n    ctx.lineTo(x + width, y + height);\n    ctx.lineTo(x, y + height);\n  }\n\n  ctx.closePath();\n};\n\nvar renderLine$1 = function renderLine(ctx, node) {\n  var _ref = node.props || {},\n      x1 = _ref.x1,\n      x2 = _ref.x2,\n      y1 = _ref.y1,\n      y2 = _ref.y2;\n\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n};\n\nvar renderGroup = function renderGroup() {// noop\n};\n\nvar KAPPA$2 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\nvar drawEllipse = function drawEllipse(ctx, cx, cy, rx, ry) {\n  var x = cx - rx;\n  var y = cy - ry;\n  var ox = rx * KAPPA$2;\n  var oy = ry * KAPPA$2;\n  var xe = x + rx * 2;\n  var ye = y + ry * 2;\n  var xm = x + rx;\n  var ym = y + ry;\n  ctx.moveTo(x, ym);\n  ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n  ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n  ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n  ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n  ctx.closePath();\n};\n\nvar renderEllipse = function renderEllipse(ctx, node) {\n  var _ref = node.props || {},\n      cx = _ref.cx,\n      cy = _ref.cy,\n      rx = _ref.rx,\n      ry = _ref.ry;\n\n  drawEllipse(ctx, cx, cy, rx, ry);\n};\n\nvar renderCircle = function renderCircle(ctx, node) {\n  var _node$props, _node$props2, _node$props3;\n\n  var cx = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.cx;\n  var cy = (_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.cy;\n  var r = (_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.r;\n  drawEllipse(ctx, cx, cy, r, r);\n};\n\nvar renderGlyphs = function renderGlyphs(ctx, glyphs, positions, x, y, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var scale = 1000 / ctx._fontSize;\n  var unitsPerEm = ctx._font.font.unitsPerEm || 1000;\n  var advanceWidthScale = 1000 / unitsPerEm; // Glyph encoding and positioning\n\n  var encodedGlyphs = ctx._font.encodeGlyphs(glyphs);\n\n  var encodedPositions = positions.map(function (pos, i) {\n    return {\n      xAdvance: pos.xAdvance * scale,\n      yAdvance: pos.yAdvance * scale,\n      xOffset: pos.xOffset,\n      yOffset: pos.yOffset,\n      advanceWidth: glyphs[i].advanceWidth * advanceWidthScale\n    };\n  });\n  return ctx._glyphs(encodedGlyphs, encodedPositions, x, y, options);\n};\n\nvar renderRun$1 = function renderRun(ctx, run) {\n  var runAdvanceWidth = run.xAdvance;\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      color = _run$attributes.color,\n      opacity = _run$attributes.opacity;\n  ctx.fillColor(color);\n  ctx.fillOpacity(opacity);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      renderGlyphs(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(runAdvanceWidth, 0);\n};\n\nvar renderSpan = function renderSpan(ctx, line, textAnchor, dominantBaseline) {\n  var _line$box, _line$box2, _line$runs$, _line$runs$2, _line$runs$2$attribut;\n\n  ctx.save();\n  var x = ((_line$box = line.box) === null || _line$box === void 0 ? void 0 : _line$box.x) || 0;\n  var y = ((_line$box2 = line.box) === null || _line$box2 === void 0 ? void 0 : _line$box2.y) || 0;\n  var font = (_line$runs$ = line.runs[0]) === null || _line$runs$ === void 0 ? void 0 : _line$runs$.attributes.font;\n  var scale = ((_line$runs$2 = line.runs[0]) === null || _line$runs$2 === void 0 ? void 0 : (_line$runs$2$attribut = _line$runs$2.attributes) === null || _line$runs$2$attribut === void 0 ? void 0 : _line$runs$2$attribut.scale) || 1;\n  var width = line.xAdvance;\n  var ascent = font.ascent * scale;\n  var xHeight = font.xHeight * scale;\n  var descent = font.descent * scale;\n  var capHeight = font.capHeight * scale;\n  var xTranslate = x;\n  var yTranslate = y;\n\n  switch (textAnchor) {\n    case 'middle':\n      xTranslate = x - width / 2;\n      break;\n\n    case 'end':\n      xTranslate = x - width;\n      break;\n\n    default:\n      xTranslate = x;\n      break;\n  }\n\n  switch (dominantBaseline) {\n    case 'middle':\n    case 'central':\n      yTranslate = y + capHeight / 2;\n      break;\n\n    case 'hanging':\n      yTranslate = y + capHeight;\n      break;\n\n    case 'mathematical':\n      yTranslate = y + xHeight;\n      break;\n\n    case 'text-after-edge':\n      yTranslate = y + descent;\n      break;\n\n    case 'text-before-edge':\n      yTranslate = y + ascent;\n      break;\n\n    default:\n      yTranslate = y;\n      break;\n  }\n\n  ctx.translate(xTranslate, yTranslate);\n  line.runs.forEach(function (run) {\n    return renderRun$1(ctx, run);\n  });\n  ctx.restore();\n};\n\nvar renderSvgText = function renderSvgText(ctx, node) {\n  node.children.forEach(function (span) {\n    return renderSpan(ctx, span.lines[0], span.props.textAnchor, span.props.dominantBaseline);\n  });\n};\n\nvar pairs = function pairs(values) {\n  var result = [];\n\n  for (var i = 0; i < values.length; i += 2) {\n    result.push([values[i], values[i + 1]]);\n  }\n\n  return result;\n};\n/**\n * Parse svg-like points into number arrays\n *\n * @param {String} points string ex. \"20,30 50,60\"\n * @return {Array} points array ex. [[20, 30], [50, 60]]\n */\n\n\nvar parsePoints = function parsePoints(points) {\n  var values = (points || '').trim().replace(/,/g, ' ').replace(/(\\d)-(\\d)/g, '$1 -$2').split(/\\s+/);\n\n  if (values.length % 2 !== 0) {\n    values = values.slice(0, -1);\n  }\n\n  values = values.map(parseFloat);\n  return pairs(values);\n};\n\nvar drawPolyline = function drawPolyline(ctx, points) {\n  if (points.length > 0) {\n    ctx.moveTo(points[0][0], points[0][1]);\n    points.slice(1).forEach(function (p) {\n      return ctx.lineTo(p[0], p[1]);\n    });\n  }\n};\n\nvar renderPolyline = function renderPolyline(ctx, node) {\n  var points = parsePoints(node.props.points || '');\n  drawPolyline(ctx, points);\n};\n\nvar renderPolygon = function renderPolygon(ctx, node) {\n  renderPolyline(ctx, node);\n  ctx.closePath();\n};\n\nvar renderImage$1 = function renderImage(ctx, node) {\n  if (!node.image.data) return;\n  var _node$props = node.props,\n      x = _node$props.x,\n      y = _node$props.y;\n  var _node$style = node.style,\n      width = _node$style.width,\n      height = _node$style.height,\n      opacity = _node$style.opacity;\n  var paddingTop = node.box.paddingLeft || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n\n  if (width === 0 || height === 0) {\n    console.warn(\"Image with src '\" + node.props.href + \"' skipped due to invalid dimensions\");\n    return;\n  }\n\n  ctx.save();\n  ctx.fillOpacity(opacity || 1).image(node.image.data, x + paddingLeft, y + paddingTop, {\n    width: width,\n    height: height\n  });\n  ctx.restore();\n};\n\n// This constant is used to approximate a symmetrical arc using a cubic\n// Bezier curve.\nvar KAPPA$1 = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar clipNode = function clipNode(ctx, node) {\n  if (!node.style) return;\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var _node$style = node.style,\n      _node$style$borderTop = _node$style.borderTopLeftRadius,\n      borderTopLeftRadius = _node$style$borderTop === void 0 ? 0 : _node$style$borderTop,\n      _node$style$borderTop2 = _node$style.borderTopRightRadius,\n      borderTopRightRadius = _node$style$borderTop2 === void 0 ? 0 : _node$style$borderTop2,\n      _node$style$borderBot = _node$style.borderBottomRightRadius,\n      borderBottomRightRadius = _node$style$borderBot === void 0 ? 0 : _node$style$borderBot,\n      _node$style$borderBot2 = _node$style.borderBottomLeftRadius,\n      borderBottomLeftRadius = _node$style$borderBot2 === void 0 ? 0 : _node$style$borderBot2; // Border top\n\n  var rtr = Math.min(borderTopRightRadius, 0.5 * width, 0.5 * height);\n  var ctr = rtr * (1.0 - KAPPA$1);\n  ctx.moveTo(left + rtr, top);\n  ctx.lineTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - ctr, top, left + width, top + ctr, left + width, top + rtr); // Border right\n\n  var rbr = Math.min(borderBottomRightRadius, 0.5 * width, 0.5 * height);\n  var cbr = rbr * (1.0 - KAPPA$1);\n  ctx.lineTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - cbr, left + width - cbr, top + height, left + width - rbr, top + height); // Border bottom\n\n  var rbl = Math.min(borderBottomLeftRadius, 0.5 * width, 0.5 * height);\n  var cbl = rbl * (1.0 - KAPPA$1);\n  ctx.lineTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + cbl, top + height, left, top + height - cbl, left, top + height - rbl); // Border left\n\n  var rtl = Math.min(borderTopLeftRadius, 0.5 * width, 0.5 * height);\n  var ctl = rtl * (1.0 - KAPPA$1);\n  ctx.lineTo(left, top + rtl);\n  ctx.bezierCurveTo(left, top + ctl, left + ctl, top, left + rtl, top);\n  ctx.closePath();\n  ctx.clip();\n};\n\nvar applySingleTransformation = function applySingleTransformation(ctx, transform, origin) {\n  var operation = transform.operation,\n      value = transform.value;\n\n  switch (operation) {\n    case 'scale':\n      {\n        var scaleX = value[0],\n            scaleY = value[1];\n        ctx.scale(scaleX, scaleY, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'rotate':\n      {\n        var angle = value[0];\n        ctx.rotate(angle, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'translate':\n      {\n        var x = value[0],\n            y = value[1];\n        ctx.translate(x, y, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'skew':\n      {\n        var xAngle = value[0],\n            yAngle = value[1];\n        ctx.skew(xAngle, yAngle, {\n          origin: origin\n        });\n        break;\n      }\n\n    case 'matrix':\n      {\n        ctx.transform.apply(ctx, value);\n        break;\n      }\n\n    default:\n      {\n        console.error(\"Transform operation: '\" + operation + \"' doesn't supported\");\n      }\n  }\n};\n\nvar applyTransformations = function applyTransformations(ctx, node) {\n  var _node$style, _node$props;\n\n  if (!node.origin) return;\n  var origin = [node.origin.left, node.origin.top];\n  var operations = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.transform) || ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.transform) || [];\n  operations.forEach(function (operation) {\n    applySingleTransformation(ctx, operation, origin);\n  });\n};\n\nvar _boundingBoxFns;\n\nvar getPathBoundingBox = function getPathBoundingBox(node) {\n  var _node$props;\n\n  var path = normalizePath(absPath(parsePath(((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.d) || '')));\n  if (!path.length) return [0, 0, 0, 0];\n  var bounds = [Infinity, Infinity, -Infinity, -Infinity];\n\n  for (var i = 0, l = path.length; i < l; i += 1) {\n    var points = path[i].slice(1);\n\n    for (var j = 0; j < points.length; j += 2) {\n      if (points[j + 0] < bounds[0]) bounds[0] = points[j + 0];\n      if (points[j + 1] < bounds[1]) bounds[1] = points[j + 1];\n      if (points[j + 0] > bounds[2]) bounds[2] = points[j + 0];\n      if (points[j + 1] > bounds[3]) bounds[3] = points[j + 1];\n    }\n  }\n\n  return bounds;\n};\n\nvar getCircleBoundingBox = function getCircleBoundingBox(node) {\n  var _node$props2, _node$props3, _node$props4;\n\n  var r = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.r) || 0;\n  var cx = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.cx) || 0;\n  var cy = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.cy) || 0;\n  return [cx - r, cy - r, cx + r, cy + r];\n};\n\nvar getEllipseBoundingBox = function getEllipseBoundingBox(node) {\n  var _node$props5, _node$props6, _node$props7, _node$props8;\n\n  var cx = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.cx) || 0;\n  var cy = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.cy) || 0;\n  var rx = ((_node$props7 = node.props) === null || _node$props7 === void 0 ? void 0 : _node$props7.rx) || 0;\n  var ry = ((_node$props8 = node.props) === null || _node$props8 === void 0 ? void 0 : _node$props8.ry) || 0;\n  return [cx - rx, cy - ry, cx + rx, cy + ry];\n};\n\nvar getLineBoundingBox = function getLineBoundingBox(node) {\n  var _node$props9, _node$props10, _node$props11, _node$props12;\n\n  var x1 = ((_node$props9 = node.props) === null || _node$props9 === void 0 ? void 0 : _node$props9.x1) || 0;\n  var y1 = ((_node$props10 = node.props) === null || _node$props10 === void 0 ? void 0 : _node$props10.y1) || 0;\n  var x2 = ((_node$props11 = node.props) === null || _node$props11 === void 0 ? void 0 : _node$props11.x2) || 0;\n  var y2 = ((_node$props12 = node.props) === null || _node$props12 === void 0 ? void 0 : _node$props12.y2) || 0;\n  return [Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2)];\n};\n\nvar getRectBoundingBox = function getRectBoundingBox(node) {\n  var _node$props13, _node$props14, _node$props15, _node$props16;\n\n  var x = ((_node$props13 = node.props) === null || _node$props13 === void 0 ? void 0 : _node$props13.x) || 0;\n  var y = ((_node$props14 = node.props) === null || _node$props14 === void 0 ? void 0 : _node$props14.y) || 0;\n  var width = ((_node$props15 = node.props) === null || _node$props15 === void 0 ? void 0 : _node$props15.width) || 0;\n  var height = ((_node$props16 = node.props) === null || _node$props16 === void 0 ? void 0 : _node$props16.height) || 0;\n  return [x, y, x + width, y + height];\n};\n\nvar max = function max(values) {\n  return Math.max.apply(Math, [-Infinity].concat(values));\n};\n\nvar min = function min(values) {\n  return Math.min.apply(Math, [Infinity].concat(values));\n};\n\nvar getPolylineBoundingBox = function getPolylineBoundingBox(node) {\n  var _node$props17;\n\n  var points = parsePoints(((_node$props17 = node.props) === null || _node$props17 === void 0 ? void 0 : _node$props17.points) || []);\n  var xValues = points.map(function (p) {\n    return p[0];\n  });\n  var yValues = points.map(function (p) {\n    return p[1];\n  });\n  return [min(xValues), min(yValues), max(xValues), max(yValues)];\n};\n\nvar boundingBoxFns = (_boundingBoxFns = {}, _boundingBoxFns[P.Rect] = getRectBoundingBox, _boundingBoxFns[P.Line] = getLineBoundingBox, _boundingBoxFns[P.Path] = getPathBoundingBox, _boundingBoxFns[P.Circle] = getCircleBoundingBox, _boundingBoxFns[P.Ellipse] = getEllipseBoundingBox, _boundingBoxFns[P.Polygon] = getPolylineBoundingBox, _boundingBoxFns[P.Polyline] = getPolylineBoundingBox, _boundingBoxFns);\n\nvar getBoundingBox = function getBoundingBox(node) {\n  var boundingBoxFn = boundingBoxFns[node.type];\n  return boundingBoxFn ? boundingBoxFn(node) : [0, 0, 0, 0];\n};\n\nvar _renderFns$1;\n\nvar setStrokeWidth = function setStrokeWidth(ctx, node) {\n  var _node$props;\n\n  var lineWidth = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.strokeWidth) || 0;\n  if (lineWidth) ctx.lineWidth(lineWidth);\n};\n\nvar setStrokeColor = function setStrokeColor(ctx, node) {\n  var _node$props2;\n\n  var strokeColor = ((_node$props2 = node.props) === null || _node$props2 === void 0 ? void 0 : _node$props2.stroke) || null;\n  if (strokeColor) ctx.strokeColor(strokeColor);\n};\n\nvar setOpacity = function setOpacity(ctx, node) {\n  var _node$props3;\n\n  var opacity = ((_node$props3 = node.props) === null || _node$props3 === void 0 ? void 0 : _node$props3.opacity) || null;\n  if (!isNil(opacity)) ctx.opacity(opacity);\n};\n\nvar setFillOpacity = function setFillOpacity(ctx, node) {\n  var _node$props4;\n\n  var fillOpacity = ((_node$props4 = node.props) === null || _node$props4 === void 0 ? void 0 : _node$props4.fillOpacity) || null;\n  if (!isNil(fillOpacity)) ctx.fillOpacity(fillOpacity);\n};\n\nvar setStrokeOpacity = function setStrokeOpacity(ctx, node) {\n  var _node$props5;\n\n  var strokeOpacity = ((_node$props5 = node.props) === null || _node$props5 === void 0 ? void 0 : _node$props5.strokeOpacity) || null;\n  if (!isNil(strokeOpacity)) ctx.strokeOpacity(strokeOpacity);\n};\n\nvar setLineJoin = function setLineJoin(ctx, node) {\n  var _node$props6;\n\n  var lineJoin = ((_node$props6 = node.props) === null || _node$props6 === void 0 ? void 0 : _node$props6.strokeLinejoin) || null;\n  if (lineJoin) ctx.lineJoin(lineJoin);\n};\n\nvar setLineCap = function setLineCap(ctx, node) {\n  var _node$props7;\n\n  var lineCap = ((_node$props7 = node.props) === null || _node$props7 === void 0 ? void 0 : _node$props7.strokeLinecap) || null;\n  if (lineCap) ctx.lineCap(lineCap);\n};\n\nvar setLineDash = function setLineDash(ctx, node) {\n  var _node$props8;\n\n  var value = ((_node$props8 = node.props) === null || _node$props8 === void 0 ? void 0 : _node$props8.strokeDasharray) || null;\n  if (value) ctx.dash(value.split(','));\n};\n\nvar hasLinearGradientFill = function hasLinearGradientFill(node) {\n  var _node$props9, _node$props9$fill;\n\n  return ((_node$props9 = node.props) === null || _node$props9 === void 0 ? void 0 : (_node$props9$fill = _node$props9.fill) === null || _node$props9$fill === void 0 ? void 0 : _node$props9$fill.type) === P.LinearGradient;\n};\n\nvar hasRadialGradientFill = function hasRadialGradientFill(node) {\n  var _node$props10, _node$props10$fill;\n\n  return ((_node$props10 = node.props) === null || _node$props10 === void 0 ? void 0 : (_node$props10$fill = _node$props10.fill) === null || _node$props10$fill === void 0 ? void 0 : _node$props10$fill.type) === P.RadialGradient;\n}; // Math simplified from https://github.com/devongovett/svgkit/blob/master/src/elements/SVGGradient.js#L104\n\n\nvar setLinearGradientFill = function setLinearGradientFill(ctx, node) {\n  var _node$props11;\n\n  var bbox = getBoundingBox(node);\n  var gradient = ((_node$props11 = node.props) === null || _node$props11 === void 0 ? void 0 : _node$props11.fill) || null;\n  var x1 = gradient.props.x1 || 0;\n  var y1 = gradient.props.y1 || 0;\n  var x2 = gradient.props.x2 || 1;\n  var y2 = gradient.props.y2 || 0;\n  var m0 = bbox[2] - bbox[0];\n  var m3 = bbox[3] - bbox[1];\n  var m4 = bbox[0];\n  var m5 = bbox[1];\n  var gx1 = m0 * x1 + m4;\n  var gy1 = m3 * y1 + m5;\n  var gx2 = m0 * x2 + m4;\n  var gy2 = m3 * y2 + m5;\n  var grad = ctx.linearGradient(gx1, gy1, gx2, gy2);\n  gradient.children.forEach(function (stop) {\n    grad.stop(stop.props.offset, stop.props.stopColor, stop.props.stopOpacity);\n  });\n  ctx.fill(grad);\n}; // Math simplified from https://github.com/devongovett/svgkit/blob/master/src/elements/SVGGradient.js#L155\n\n\nvar setRadialGradientFill = function setRadialGradientFill(ctx, node) {\n  var _node$props12;\n\n  var bbox = getBoundingBox(node);\n  var gradient = ((_node$props12 = node.props) === null || _node$props12 === void 0 ? void 0 : _node$props12.fill) || null;\n  var cx = gradient.props.cx || 0.5;\n  var cy = gradient.props.cy || 0.5;\n  var fx = gradient.props.fx || cx;\n  var fy = gradient.props.fy || cy;\n  var r = gradient.props.r || 0.5;\n  var m0 = bbox[2] - bbox[0];\n  var m3 = bbox[3] - bbox[1];\n  var m4 = bbox[0];\n  var m5 = bbox[1];\n  var gr = r * m0;\n  var gcx = m0 * cx + m4;\n  var gcy = m3 * cy + m5;\n  var gfx = m0 * fx + m4;\n  var gfy = m3 * fy + m5;\n  var grad = ctx.radialGradient(gfx, gfy, 0, gcx, gcy, gr);\n  gradient.children.forEach(function (stop) {\n    grad.stop(stop.props.offset, stop.props.stopColor, stop.props.stopOpacity);\n  });\n  ctx.fill(grad);\n};\n\nvar setFillColor = function setFillColor(ctx, node) {\n  var _node$props13;\n\n  var fillColor = ((_node$props13 = node.props) === null || _node$props13 === void 0 ? void 0 : _node$props13.fill) || null;\n  if (fillColor) ctx.fillColor(fillColor);\n};\n\nvar setFill = function setFill(ctx, node) {\n  if (hasLinearGradientFill(node)) return setLinearGradientFill(ctx, node);\n  if (hasRadialGradientFill(node)) return setRadialGradientFill(ctx, node);\n  return setFillColor(ctx, node);\n};\n\nvar draw = function draw(ctx, node) {\n  var props = node.props || {};\n\n  if (props.fill && props.stroke) {\n    ctx.fillAndStroke(props.fillRule);\n  } else if (props.fill) {\n    ctx.fill(props.fillRule);\n  } else if (props.stroke) {\n    ctx.stroke();\n  } else {\n    ctx.save();\n    ctx.opacity(0);\n    ctx.fill(null);\n    ctx.restore();\n  }\n};\n\nvar noop = function noop() {};\n\nvar renderFns$1 = (_renderFns$1 = {}, _renderFns$1[P.Tspan] = noop, _renderFns$1[P.TextInstance] = noop, _renderFns$1[P.Path] = renderPath, _renderFns$1[P.Rect] = renderRect, _renderFns$1[P.Line] = renderLine$1, _renderFns$1[P.G] = renderGroup, _renderFns$1[P.Text] = renderSvgText, _renderFns$1[P.Circle] = renderCircle, _renderFns$1[P.Image] = renderImage$1, _renderFns$1[P.Ellipse] = renderEllipse, _renderFns$1[P.Polygon] = renderPolygon, _renderFns$1[P.Polyline] = renderPolyline, _renderFns$1);\n\nvar renderNode$1 = function renderNode(ctx, node) {\n  var renderFn = renderFns$1[node.type];\n\n  if (renderFns$1) {\n    renderFn(ctx, node);\n  } else {\n    console.warn(\"SVG node of type \" + node.type + \" is not currenty supported\");\n  }\n};\n\nvar drawNode = function drawNode(ctx, node) {\n  setLineCap(ctx, node);\n  setLineDash(ctx, node);\n  setLineJoin(ctx, node);\n  setStrokeWidth(ctx, node);\n  setStrokeColor(ctx, node);\n  setFill(ctx, node);\n  setStrokeOpacity(ctx, node);\n  setFillOpacity(ctx, node);\n  setOpacity(ctx, node);\n  applyTransformations(ctx, node);\n  renderNode$1(ctx, node);\n  draw(ctx, node);\n};\n\nvar clipPath = function clipPath(ctx, node) {\n  var _node$props14;\n\n  var value = (_node$props14 = node.props) === null || _node$props14 === void 0 ? void 0 : _node$props14.clipPath;\n\n  if (value) {\n    var children = value.children || [];\n    children.forEach(function (child) {\n      return renderNode$1(ctx, child);\n    });\n    ctx.clip();\n  }\n};\n\nvar drawChildren = function drawChildren(ctx, node) {\n  var children = node.children || [];\n  children.forEach(function (child) {\n    ctx.save();\n    clipPath(ctx, child);\n    drawNode(ctx, child);\n    drawChildren(ctx, child);\n    ctx.restore();\n  });\n};\n\nvar resolveAspectRatio = function resolveAspectRatio(ctx, node) {\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height;\n  var _node$props15 = node.props,\n      viewBox = _node$props15.viewBox,\n      _node$props15$preserv = _node$props15.preserveAspectRatio,\n      preserveAspectRatio = _node$props15$preserv === void 0 ? {} : _node$props15$preserv;\n  var _preserveAspectRatio$ = preserveAspectRatio.meetOrSlice,\n      meetOrSlice = _preserveAspectRatio$ === void 0 ? 'meet' : _preserveAspectRatio$,\n      _preserveAspectRatio$2 = preserveAspectRatio.align,\n      align = _preserveAspectRatio$2 === void 0 ? 'xMidYMid' : _preserveAspectRatio$2;\n  if (viewBox == null || width == null || height == null) return;\n  var x = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.minX) || 0;\n  var y = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.minY) || 0;\n  var logicalWidth = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.maxX) || width;\n  var logicalHeight = (viewBox === null || viewBox === void 0 ? void 0 : viewBox.maxY) || height;\n  var logicalRatio = logicalWidth / logicalHeight;\n  var physicalRatio = width / height;\n  var scaleX = width / logicalWidth;\n  var scaleY = height / logicalHeight;\n\n  if (align === 'none') {\n    ctx.scale(scaleX, scaleY);\n    ctx.translate(-x, -y);\n    return;\n  }\n\n  if (logicalRatio < physicalRatio && meetOrSlice === 'meet' || logicalRatio >= physicalRatio && meetOrSlice === 'slice') {\n    ctx.scale(scaleY, scaleY);\n\n    switch (align) {\n      case 'xMinYMin':\n      case 'xMinYMid':\n      case 'xMinYMax':\n        ctx.translate(-x, -y);\n        break;\n\n      case 'xMidYMin':\n      case 'xMidYMid':\n      case 'xMidYMax':\n        ctx.translate(-x - (logicalWidth - width * logicalHeight / height) / 2, -y);\n        break;\n\n      default:\n        ctx.translate(-x - (logicalWidth - width * logicalHeight / height), -y);\n    }\n  } else {\n    ctx.scale(scaleX, scaleX);\n\n    switch (align) {\n      case 'xMinYMin':\n      case 'xMidYMin':\n      case 'xMaxYMin':\n        ctx.translate(-x, -y);\n        break;\n\n      case 'xMinYMid':\n      case 'xMidYMid':\n      case 'xMaxYMid':\n        ctx.translate(-x, -y - (logicalHeight - height * logicalWidth / width) / 2);\n        break;\n\n      default:\n        ctx.translate(-x, -y - (logicalHeight - height * logicalWidth / width));\n    }\n  }\n};\n\nvar moveToOrigin = function moveToOrigin(ctx, node) {\n  var _node$box2 = node.box,\n      top = _node$box2.top,\n      left = _node$box2.left;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var paddingTop = node.box.paddingTop || 0;\n  ctx.translate(left + paddingLeft, top + paddingTop);\n};\n\nvar renderSvg = function renderSvg(ctx, node) {\n  ctx.save();\n  clipNode(ctx, node);\n  moveToOrigin(ctx, node);\n  resolveAspectRatio(ctx, node);\n  drawChildren(ctx, node);\n  ctx.restore();\n};\n\nvar parseColor = function parseColor(hex) {\n  var parsed = colorString.get(hex);\n  var value = colorString.to.hex(parsed.value.slice(0, 3));\n  var opacity = parsed.value[3];\n  return {\n    value: value,\n    opacity: opacity\n  };\n};\n\n/* eslint-disable no-param-reassign */\nvar DEST_REGEXP = /^#.+/;\n\nvar isSrcId$1 = function isSrcId(src) {\n  return src.match(DEST_REGEXP);\n};\n\nvar renderAttachment = function renderAttachment(ctx, attachment) {\n  var _attachment$xOffset = attachment.xOffset,\n      xOffset = _attachment$xOffset === void 0 ? 0 : _attachment$xOffset,\n      _attachment$yOffset = attachment.yOffset,\n      yOffset = _attachment$yOffset === void 0 ? 0 : _attachment$yOffset,\n      width = attachment.width,\n      height = attachment.height,\n      image = attachment.image;\n  ctx.translate(-width + xOffset, -height + yOffset);\n  ctx.image(image, 0, 0, {\n    fit: [width, height],\n    align: 'center',\n    valign: 'bottom'\n  });\n};\n\nvar renderAttachments = function renderAttachments(ctx, run) {\n  ctx.save();\n  var font = run.attributes.font;\n  var space = font.glyphForCodePoint(0x20);\n  var objectReplacement = font.glyphForCodePoint(0xfffc);\n  var attachmentAdvance = 0;\n\n  for (var i = 0; i < run.glyphs.length; i += 1) {\n    var position = run.positions[i];\n    var glyph = run.glyphs[i];\n    attachmentAdvance += position.xAdvance || 0;\n\n    if (glyph.id === objectReplacement.id && run.attributes.attachment) {\n      ctx.translate(attachmentAdvance, position.yOffset || 0);\n      renderAttachment(ctx, run.attributes.attachment);\n      run.glyphs[i] = space;\n      attachmentAdvance = 0;\n    }\n  }\n\n  ctx.restore();\n};\n\nvar renderRun = function renderRun(ctx, run, options) {\n  var _run$attributes = run.attributes,\n      font = _run$attributes.font,\n      fontSize = _run$attributes.fontSize,\n      link = _run$attributes.link;\n  var color = parseColor(run.attributes.color);\n  var opacity = isNil(run.attributes.opacity) ? color.opacity : run.attributes.opacity;\n  var height = run.height,\n      descent = run.descent,\n      xAdvance = run.xAdvance;\n\n  if (options.outlineRuns) {\n    ctx.rect(0, -height, xAdvance, height).stroke();\n  }\n\n  ctx.fillColor(color.value);\n  ctx.fillOpacity(opacity);\n\n  if (link) {\n    if (isSrcId$1(link)) {\n      ctx.goTo(0, -height - descent, xAdvance, height, link.slice(1));\n    } else {\n      ctx.link(0, -height - descent, xAdvance, height, link);\n    }\n  }\n\n  renderAttachments(ctx, run);\n\n  if (font.sbix || font.COLR && font.CPAL) {\n    ctx.save();\n    ctx.translate(0, -run.ascent);\n\n    for (var i = 0; i < run.glyphs.length; i += 1) {\n      var position = run.positions[i];\n      var glyph = run.glyphs[i];\n      ctx.save();\n      ctx.translate(position.xOffset, position.yOffset);\n      glyph.render(ctx, fontSize);\n      ctx.restore();\n      ctx.translate(position.xAdvance, position.yAdvance);\n    }\n\n    ctx.restore();\n  } else {\n    ctx.font(typeof font.name === 'string' ? font.name : font, fontSize);\n\n    try {\n      renderGlyphs(ctx, run.glyphs, run.positions, 0, 0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ctx.translate(xAdvance, 0);\n};\n\nvar renderBackground$1 = function renderBackground(ctx, rect, backgroundColor) {\n  var color = parseColor(backgroundColor);\n  ctx.save();\n  ctx.fillOpacity(color.opacity);\n  ctx.rect(rect.x, rect.y, rect.width, rect.height);\n  ctx.fill(color.value);\n  ctx.restore();\n};\n\nvar renderDecorationLine = function renderDecorationLine(ctx, line) {\n  ctx.save();\n  ctx.lineWidth(line.rect.height);\n  ctx.strokeOpacity(line.opacity);\n\n  if (/dashed/.test(line.style)) {\n    ctx.dash(3 * line.rect.height);\n  } else if (/dotted/.test(line.style)) {\n    ctx.dash(line.rect.height);\n  }\n\n  if (/wavy/.test(line.style)) {\n    var dist = Math.max(2, line.rect.height);\n    var step = 1.1 * dist;\n    var stepCount = Math.floor(line.rect.width / (2 * step)); // Adjust step to fill entire width\n\n    var remainingWidth = line.rect.width - stepCount * 2 * step;\n    var adjustment = remainingWidth / stepCount / 2;\n    step += adjustment;\n    var cp1y = line.rect.y + dist;\n    var cp2y = line.rect.y - dist;\n    var x = line.rect.x;\n    ctx.moveTo(line.rect.x, line.rect.y);\n\n    for (var i = 0; i < stepCount; i += 1) {\n      ctx.bezierCurveTo(x + step, cp1y, x + step, cp2y, x + 2 * step, line.rect.y);\n      x += 2 * step;\n    }\n  } else {\n    ctx.moveTo(line.rect.x, line.rect.y);\n    ctx.lineTo(line.rect.x + line.rect.width, line.rect.y);\n\n    if (/double/.test(line.style)) {\n      ctx.moveTo(line.rect.x, line.rect.y + line.rect.height * 2);\n      ctx.lineTo(line.rect.x + line.rect.width, line.rect.y + line.rect.height * 2);\n    }\n  }\n\n  ctx.stroke(line.color);\n  ctx.restore();\n};\n\nvar renderLine = function renderLine(ctx, line, options) {\n  var lineAscent = line.ascent;\n\n  if (options.outlineLines) {\n    ctx.rect(line.box.x, line.box.y, line.box.width, line.box.height).stroke();\n  }\n\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y + lineAscent);\n\n  for (var i = 0; i < line.runs.length; i += 1) {\n    var run = line.runs[i];\n    var isLastRun = i === line.runs.length - 1;\n\n    if (run.attributes.backgroundColor) {\n      var overflowRight = isLastRun ? line.overflowRight : 0;\n      var backgroundRect = {\n        x: 0,\n        y: -lineAscent,\n        height: line.box.height,\n        width: run.xAdvance - overflowRight\n      };\n      renderBackground$1(ctx, backgroundRect, run.attributes.backgroundColor);\n    }\n\n    renderRun(ctx, run, options);\n  }\n\n  ctx.restore();\n  ctx.save();\n  ctx.translate(line.box.x, line.box.y);\n\n  for (var _i = 0; _i < line.decorationLines.length; _i += 1) {\n    var decorationLine = line.decorationLines[_i];\n    renderDecorationLine(ctx, decorationLine);\n  }\n\n  ctx.restore();\n};\n\nvar renderBlock = function renderBlock(ctx, block, options) {\n  block.forEach(function (line) {\n    renderLine(ctx, line, options);\n  });\n};\n\nvar renderText = function renderText(ctx, node) {\n  var _node$box2, _node$box3;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var blocks = [node.lines];\n  var paddingTop = ((_node$box2 = node.box) === null || _node$box2 === void 0 ? void 0 : _node$box2.paddingTop) || 0;\n  var paddingLeft = ((_node$box3 = node.box) === null || _node$box3 === void 0 ? void 0 : _node$box3.paddingLeft) || 0;\n  var initialY = node.lines[0] ? node.lines[0].box.y : 0;\n  var offsetX = node.alignOffset || 0;\n  ctx.save();\n  ctx.translate(left + paddingLeft - offsetX, top + paddingTop - initialY);\n  blocks.forEach(function (block) {\n    renderBlock(ctx, block, {});\n  });\n  ctx.restore();\n};\n\nvar renderPage = function renderPage(ctx, node) {\n  var _node$props;\n\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height;\n  var dpi = ((_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.dpi) || 72;\n  var userUnit = dpi / 72;\n  ctx.addPage({\n    size: [width, height],\n    margin: 0,\n    userUnit: userUnit\n  });\n};\n\nvar renderNote = function renderNote(ctx, node) {\n  var _node$children, _node$style, _node$style2;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left;\n  var value = (node === null || node === void 0 ? void 0 : (_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children[0].value) || '';\n  var color = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.backgroundColor) || null;\n  var borderWidth = ((_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.borderWidth) || null;\n  ctx.note(left, top, 0, 0, value, {\n    color: color,\n    borderWidth: borderWidth\n  });\n};\n\nvar isNumeric = function isNumeric(n) {\n  return !Number.isNaN(parseFloat(n)) && Number.isFinite(n);\n};\n\nvar applyContainObjectFit = function applyContainObjectFit(cw, ch, iw, ih, px, py) {\n  var cr = cw / ch;\n  var ir = iw / ih;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n\n  if (cr > ir) {\n    var _height = ch;\n\n    var _width = _height * ir;\n\n    var _yOffset = isNumeric(py) ? py : 0;\n\n    var _xOffset = isNumeric(px) ? px : (cw - _width) * pxv;\n\n    return {\n      width: _width,\n      height: _height,\n      xOffset: _xOffset,\n      yOffset: _yOffset\n    };\n  }\n\n  var width = cw;\n  var height = width / ir;\n  var xOffset = isNumeric(px) ? px : 0;\n  var yOffset = isNumeric(py) ? py : (ch - height) * pyv;\n  return {\n    width: width,\n    height: height,\n    yOffset: yOffset,\n    xOffset: xOffset\n  };\n};\n\nvar applyNoneObjectFit = function applyNoneObjectFit(cw, ch, iw, ih, px, py) {\n  var width = iw;\n  var height = ih;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n  var xOffset = isNumeric(px) ? px : (cw - width) * pxv;\n  var yOffset = isNumeric(py) ? py : (ch - height) * pyv;\n  return {\n    width: width,\n    height: height,\n    xOffset: xOffset,\n    yOffset: yOffset\n  };\n};\n\nvar applyCoverObjectFit = function applyCoverObjectFit(cw, ch, iw, ih, px, py) {\n  var ir = iw / ih;\n  var cr = cw / ch;\n  var pxp = matchPercent(px);\n  var pyp = matchPercent(py);\n  var pxv = pxp ? pxp.percent : 0.5;\n  var pyv = pyp ? pyp.percent : 0.5;\n\n  if (cr > ir) {\n    var _width2 = cw;\n\n    var _height2 = _width2 / ir;\n\n    var _xOffset2 = isNumeric(px) ? px : 0;\n\n    var _yOffset2 = isNumeric(py) ? py : (ch - _height2) * pyv;\n\n    return {\n      width: _width2,\n      height: _height2,\n      yOffset: _yOffset2,\n      xOffset: _xOffset2\n    };\n  }\n\n  var height = ch;\n  var width = height * ir;\n  var xOffset = isNumeric(px) ? px : (cw - width) * pxv;\n  var yOffset = isNumeric(py) ? py : 0;\n  return {\n    width: width,\n    height: height,\n    xOffset: xOffset,\n    yOffset: yOffset\n  };\n};\n\nvar applyScaleDownObjectFit = function applyScaleDownObjectFit(cw, ch, iw, ih, px, py) {\n  var containDimension = applyContainObjectFit(cw, ch, iw, ih, px, py);\n  var noneDimension = applyNoneObjectFit(cw, ch, iw, ih, px, py);\n  return containDimension.width < noneDimension.width ? containDimension : noneDimension;\n};\n\nvar applyFillObjectFit = function applyFillObjectFit(cw, ch, px, py) {\n  return {\n    width: cw,\n    height: ch,\n    xOffset: matchPercent(px) ? 0 : px || 0,\n    yOffset: matchPercent(py) ? 0 : py || 0\n  };\n};\n\nvar resolveObjectFit = function resolveObjectFit(type, cw, ch, iw, ih, px, py) {\n  if (type === void 0) {\n    type = 'fill';\n  }\n\n  switch (type) {\n    case 'contain':\n      return applyContainObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'cover':\n      return applyCoverObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'none':\n      return applyNoneObjectFit(cw, ch, iw, ih, px, py);\n\n    case 'scale-down':\n      return applyScaleDownObjectFit(cw, ch, iw, ih, px, py);\n\n    default:\n      return applyFillObjectFit(cw, ch, px, py);\n  }\n};\n\nvar drawImage = function drawImage(ctx, node, options) {\n  var _node$style, _node$style2, _node$style3, _node$style4;\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top;\n  var opacity = (_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.opacity;\n  var objectFit = (_node$style2 = node.style) === null || _node$style2 === void 0 ? void 0 : _node$style2.objectFit;\n  var objectPositionX = (_node$style3 = node.style) === null || _node$style3 === void 0 ? void 0 : _node$style3.objectPositionX;\n  var objectPositionY = (_node$style4 = node.style) === null || _node$style4 === void 0 ? void 0 : _node$style4.objectPositionY;\n  var paddingTop = node.box.paddingTop || 0;\n  var paddingRight = node.box.paddingRight || 0;\n  var paddingBottom = node.box.paddingBottom || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var imageCache = options.imageCache || new Map();\n\n  var _resolveObjectFit = resolveObjectFit(objectFit, node.box.width - paddingLeft - paddingRight, node.box.height - paddingTop - paddingBottom, node.image.width, node.image.height, objectPositionX, objectPositionY),\n      width = _resolveObjectFit.width,\n      height = _resolveObjectFit.height,\n      xOffset = _resolveObjectFit.xOffset,\n      yOffset = _resolveObjectFit.yOffset;\n\n  if (node.image.data) {\n    if (width !== 0 && height !== 0) {\n      var cacheKey = node.image.key;\n      var image = imageCache.get(cacheKey) || ctx.embedImage(node.image.data);\n      if (cacheKey) imageCache.set(cacheKey, image);\n      var imageOpacity = isNil(opacity) ? 1 : opacity;\n      ctx.fillOpacity(imageOpacity).image(image, left + paddingLeft + xOffset, top + paddingTop + yOffset, {\n        width: width,\n        height: height\n      });\n    } else {\n      console.warn(\"Image with src '\" + JSON.stringify(node.props.src) + \"' skipped due to invalid dimensions\");\n    }\n  }\n};\n\nvar renderImage = function renderImage(ctx, node, options) {\n  ctx.save();\n  clipNode(ctx, node);\n  drawImage(ctx, node, options);\n  ctx.restore();\n};\n\nvar CONTENT_COLOR = '#a1c6e7';\nvar PADDING_COLOR = '#c4deb9';\nvar MARGIN_COLOR = '#f8cca1'; // TODO: Draw debug boxes using clipping to enhance quality\n\nvar debugContent = function debugContent(ctx, node) {\n  var _node$box = node.box,\n      left = _node$box.left,\n      top = _node$box.top,\n      width = _node$box.width,\n      height = _node$box.height,\n      _node$box$paddingLeft = _node$box.paddingLeft,\n      paddingLeft = _node$box$paddingLeft === void 0 ? 0 : _node$box$paddingLeft,\n      _node$box$paddingTop = _node$box.paddingTop,\n      paddingTop = _node$box$paddingTop === void 0 ? 0 : _node$box$paddingTop,\n      _node$box$paddingRigh = _node$box.paddingRight,\n      paddingRight = _node$box$paddingRigh === void 0 ? 0 : _node$box$paddingRigh,\n      _node$box$paddingBott = _node$box.paddingBottom,\n      paddingBottom = _node$box$paddingBott === void 0 ? 0 : _node$box$paddingBott,\n      _node$box$borderLeftW = _node$box.borderLeftWidth,\n      borderLeftWidth = _node$box$borderLeftW === void 0 ? 0 : _node$box$borderLeftW,\n      _node$box$borderTopWi = _node$box.borderTopWidth,\n      borderTopWidth = _node$box$borderTopWi === void 0 ? 0 : _node$box$borderTopWi,\n      _node$box$borderRight = _node$box.borderRightWidth,\n      borderRightWidth = _node$box$borderRight === void 0 ? 0 : _node$box$borderRight,\n      _node$box$borderBotto = _node$box.borderBottomWidth,\n      borderBottomWidth = _node$box$borderBotto === void 0 ? 0 : _node$box$borderBotto;\n  ctx.fillColor(CONTENT_COLOR).opacity(0.5).rect(left + paddingLeft + borderLeftWidth, top + paddingTop + borderTopWidth, width - paddingLeft - paddingRight - borderRightWidth - borderLeftWidth, height - paddingTop - paddingBottom - borderTopWidth - borderBottomWidth).fill();\n};\n\nvar debugPadding = function debugPadding(ctx, node) {\n  var _node$box2 = node.box,\n      left = _node$box2.left,\n      top = _node$box2.top,\n      width = _node$box2.width,\n      height = _node$box2.height,\n      _node$box2$paddingLef = _node$box2.paddingLeft,\n      paddingLeft = _node$box2$paddingLef === void 0 ? 0 : _node$box2$paddingLef,\n      _node$box2$paddingTop = _node$box2.paddingTop,\n      paddingTop = _node$box2$paddingTop === void 0 ? 0 : _node$box2$paddingTop,\n      _node$box2$paddingRig = _node$box2.paddingRight,\n      paddingRight = _node$box2$paddingRig === void 0 ? 0 : _node$box2$paddingRig,\n      _node$box2$paddingBot = _node$box2.paddingBottom,\n      paddingBottom = _node$box2$paddingBot === void 0 ? 0 : _node$box2$paddingBot,\n      _node$box2$borderLeft = _node$box2.borderLeftWidth,\n      borderLeftWidth = _node$box2$borderLeft === void 0 ? 0 : _node$box2$borderLeft,\n      _node$box2$borderTopW = _node$box2.borderTopWidth,\n      borderTopWidth = _node$box2$borderTopW === void 0 ? 0 : _node$box2$borderTopW,\n      _node$box2$borderRigh = _node$box2.borderRightWidth,\n      borderRightWidth = _node$box2$borderRigh === void 0 ? 0 : _node$box2$borderRigh,\n      _node$box2$borderBott = _node$box2.borderBottomWidth,\n      borderBottomWidth = _node$box2$borderBott === void 0 ? 0 : _node$box2$borderBott;\n  ctx.fillColor(PADDING_COLOR).opacity(0.5); // Padding top\n\n  ctx.rect(left + paddingLeft + borderLeftWidth, top + borderTopWidth, width - paddingRight - paddingLeft - borderLeftWidth - borderRightWidth, paddingTop).fill(); // Padding left\n\n  ctx.rect(left + borderLeftWidth, top + borderTopWidth, paddingLeft, height - borderTopWidth - borderBottomWidth).fill(); // Padding right\n\n  ctx.rect(left + width - paddingRight - borderRightWidth, top + borderTopWidth, paddingRight, height - borderTopWidth - borderBottomWidth).fill(); // Padding bottom\n\n  ctx.rect(left + paddingLeft + borderLeftWidth, top + height - paddingBottom - borderBottomWidth, width - paddingRight - paddingLeft - borderLeftWidth - borderRightWidth, paddingBottom).fill();\n};\n\nvar getMargin = function getMargin(box) {\n  var marginLeft = box.marginLeft === 'auto' ? 0 : box.marginLeft;\n  var marginTop = box.marginTop === 'auto' ? 0 : box.marginTop;\n  var marginRight = box.marginRight === 'auto' ? 0 : box.marginRight;\n  var marginBottom = box.marginBottom === 'auto' ? 0 : box.marginBottom;\n  return {\n    marginLeft: marginLeft,\n    marginTop: marginTop,\n    marginRight: marginRight,\n    marginBottom: marginBottom\n  };\n};\n\nvar debugMargin = function debugMargin(ctx, node) {\n  var _node$box3 = node.box,\n      left = _node$box3.left,\n      top = _node$box3.top,\n      width = _node$box3.width,\n      height = _node$box3.height;\n\n  var _getMargin = getMargin(node.box),\n      _getMargin$marginLeft = _getMargin.marginLeft,\n      marginLeft = _getMargin$marginLeft === void 0 ? 0 : _getMargin$marginLeft,\n      _getMargin$marginTop = _getMargin.marginTop,\n      marginTop = _getMargin$marginTop === void 0 ? 0 : _getMargin$marginTop,\n      _getMargin$marginRigh = _getMargin.marginRight,\n      marginRight = _getMargin$marginRigh === void 0 ? 0 : _getMargin$marginRigh,\n      _getMargin$marginBott = _getMargin.marginBottom,\n      marginBottom = _getMargin$marginBott === void 0 ? 0 : _getMargin$marginBott;\n\n  ctx.fillColor(MARGIN_COLOR).opacity(0.5); // Margin top\n\n  ctx.rect(left, top - marginTop, width, marginTop).fill(); // Margin left\n\n  ctx.rect(left - marginLeft, top - marginTop, marginLeft, height + marginTop + marginBottom).fill(); // Margin right\n\n  ctx.rect(left + width, top - marginTop, marginRight, height + marginTop + marginBottom).fill(); // Margin bottom\n\n  ctx.rect(left, top + height, width, marginBottom).fill();\n};\n\nvar debugText = function debugText(ctx, node) {\n  var _node$box4 = node.box,\n      left = _node$box4.left,\n      top = _node$box4.top,\n      width = _node$box4.width,\n      height = _node$box4.height;\n\n  var _getMargin2 = getMargin(node.box),\n      _getMargin2$marginLef = _getMargin2.marginLeft,\n      marginLeft = _getMargin2$marginLef === void 0 ? 0 : _getMargin2$marginLef,\n      _getMargin2$marginTop = _getMargin2.marginTop,\n      marginTop = _getMargin2$marginTop === void 0 ? 0 : _getMargin2$marginTop,\n      _getMargin2$marginRig = _getMargin2.marginRight,\n      marginRight = _getMargin2$marginRig === void 0 ? 0 : _getMargin2$marginRig,\n      _getMargin2$marginBot = _getMargin2.marginBottom,\n      marginBottom = _getMargin2$marginBot === void 0 ? 0 : _getMargin2$marginBot;\n\n  var roundedWidth = Math.round(width + marginLeft + marginRight);\n  var roundedHeight = Math.round(height + marginTop + marginBottom);\n  ctx.fontSize(6).opacity(1).fillColor('black').text(roundedWidth + \" x \" + roundedHeight, left - marginLeft, Math.max(top - marginTop - 4, 1));\n};\n\nvar debugOrigin = function debugOrigin(ctx, node) {\n  if (node.origin) {\n    ctx.circle(node.origin.left, node.origin.top, 3).fill('red').circle(node.origin.left, node.origin.top, 5).stroke('red');\n  }\n};\n\nvar renderDebug = function renderDebug(ctx, node) {\n  var _node$props;\n\n  if (!((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.debug)) return;\n  ctx.save();\n  debugContent(ctx, node);\n  debugPadding(ctx, node);\n  debugMargin(ctx, node);\n  debugText(ctx, node);\n  debugOrigin(ctx, node);\n  ctx.restore();\n};\n\nvar availableMethods = ['dash', 'clip', 'save', 'path', 'fill', 'font', 'text', 'rect', 'scale', 'moveTo', 'lineTo', 'stroke', 'rotate', 'circle', 'lineCap', 'opacity', 'ellipse', 'polygon', 'restore', 'lineJoin', 'fontSize', 'fillColor', 'lineWidth', 'translate', 'miterLimit', 'strokeColor', 'fillOpacity', 'roundedRect', 'fillAndStroke', 'strokeOpacity', 'bezierCurveTo', 'quadraticCurveTo', 'linearGradient', 'radialGradient'];\n\nvar painter = function painter(ctx) {\n  var p = availableMethods.reduce(function (acc, prop) {\n    var _extends2;\n\n    return _extends({}, acc, (_extends2 = {}, _extends2[prop] = function () {\n      ctx[prop].apply(ctx, arguments);\n      return p;\n    }, _extends2));\n  }, {});\n  return p;\n};\n\nvar renderCanvas = function renderCanvas(ctx, node) {\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var paddingTop = node.box.paddingTop || 0;\n  var paddingLeft = node.box.paddingLeft || 0;\n  var paddingRight = node.box.paddingRight || 0;\n  var paddingBottom = node.box.paddingBottom || 0;\n  var availableWidth = width - paddingLeft - paddingRight;\n  var availableHeight = height - paddingTop - paddingBottom;\n\n  if (!availableWidth || !availableHeight) {\n    console.warn('Canvas element has null width or height. Please provide valid values via the `style` prop in order to correctly render it.');\n  }\n\n  ctx.save().translate(left + paddingLeft, top + paddingTop);\n\n  if (node.props.paint) {\n    node.props.paint(painter(ctx), availableWidth, availableHeight);\n  }\n\n  ctx.restore();\n};\n\n// Ref: https://www.w3.org/TR/css-backgrounds-3/#borders\n// This constant is used to approximate a symmetrical arc using a cubic Bezier curve.\nvar KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n\nvar clipBorderTop = function clipBorderTop(ctx, layout, style, rtr, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth; // Clip outer top border edge\n\n  ctx.moveTo(left + rtl, top);\n  ctx.lineTo(left + width - rtr, top); // Ellipse coefficients outer top right cap\n\n  var c0 = rtr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width - c0, top, left + width, top + c0, left + width, top + rtr); // Move down in case the margin exceedes the radius\n\n  var topRightYCoord = top + Math.max(borderTopWidth, rtr);\n  ctx.lineTo(left + width, topRightYCoord); // Clip inner top right cap\n\n  ctx.lineTo(left + width - borderRightWidth, topRightYCoord); // Ellipse coefficients inner top right cap\n\n  var innerTopRightRadiusX = Math.max(rtr - borderRightWidth, 0);\n  var innerTopRightRadiusY = Math.max(rtr - borderTopWidth, 0);\n  var c1 = innerTopRightRadiusX * (1.0 - KAPPA);\n  var c2 = innerTopRightRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth, top + borderTopWidth + c2, left + width - borderRightWidth - c1, top + borderTopWidth, left + width - borderRightWidth - innerTopRightRadiusX, top + borderTopWidth); // Clip inner top border edge\n\n  ctx.lineTo(left + Math.max(rtl, borderLeftWidth), top + borderTopWidth); // Ellipse coefficients inner top left cap\n\n  var innerTopLeftRadiusX = Math.max(rtl - borderLeftWidth, 0);\n  var innerTopLeftRadiusY = Math.max(rtl - borderTopWidth, 0);\n  var c3 = innerTopLeftRadiusX * (1.0 - KAPPA);\n  var c4 = innerTopLeftRadiusY * (1.0 - KAPPA);\n  var topLeftYCoord = top + Math.max(borderTopWidth, rtl); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth + c3, top + borderTopWidth, left + borderLeftWidth, top + borderTopWidth + c4, left + borderLeftWidth, topLeftYCoord);\n  ctx.lineTo(left, topLeftYCoord); // Move down in case the margin exceedes the radius\n\n  ctx.lineTo(left, top + rtl); // Ellipse coefficients outer top left cap\n\n  var c5 = rtl * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left, top + c5, left + c5, top, left + rtl, top);\n  ctx.closePath();\n  ctx.clip(); // Clip border top cap joins\n\n  if (borderRightWidth) {\n    var trSlope = -borderTopWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, trSlope * (-width / 2) + top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderLeftWidth) {\n    var _trSlope = -borderTopWidth / borderLeftWidth;\n\n    ctx.moveTo(left + width / 2, _trSlope * (-width / 2) + top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left + width, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderTop = function fillBorderTop(ctx, layout, style, rtr, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width;\n  var borderTopColor = style.borderTopColor,\n      borderTopWidth = style.borderTopWidth,\n      borderTopStyle = style.borderTopStyle,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth;\n  var c0 = rtl * (1.0 - KAPPA);\n  var c1 = rtr * (1.0 - KAPPA);\n  ctx.moveTo(left, top + Math.max(rtl, borderTopWidth));\n  ctx.bezierCurveTo(left, top + c0, left + c0, top, left + rtl, top);\n  ctx.lineTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - c1, top, left + width, top + c1, left + width, top + rtr);\n  ctx.strokeColor(borderTopColor);\n  ctx.lineWidth(Math.max(borderRightWidth, borderTopWidth, borderLeftWidth) * 2);\n\n  if (borderTopStyle === 'dashed') {\n    ctx.dash(borderTopWidth * 2, {\n      space: borderTopWidth * 1.2\n    });\n  } else if (borderTopStyle === 'dotted') {\n    ctx.dash(borderTopWidth, {\n      space: borderTopWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderRight = function clipBorderRight(ctx, layout, style, rtr, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderBottomWidth = style.borderBottomWidth; // Clip outer right border edge\n\n  ctx.moveTo(left + width, top + rtr);\n  ctx.lineTo(left + width, top + height - rbr); // Ellipse coefficients outer bottom right cap\n\n  var c0 = rbr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width, top + height - c0, left + width - c0, top + height, left + width - rbr, top + height); // Move left in case the margin exceedes the radius\n\n  var topBottomXCoord = left + width - Math.max(borderRightWidth, rbr);\n  ctx.lineTo(topBottomXCoord, top + height); // Clip inner bottom right cap\n\n  ctx.lineTo(topBottomXCoord, top + height - borderBottomWidth); // Ellipse coefficients inner bottom right cap\n\n  var innerBottomRightRadiusX = Math.max(rbr - borderRightWidth, 0);\n  var innerBottomRightRadiusY = Math.max(rbr - borderBottomWidth, 0);\n  var c1 = innerBottomRightRadiusX * (1.0 - KAPPA);\n  var c2 = innerBottomRightRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth - c1, top + height - borderBottomWidth, left + width - borderRightWidth, top + height - borderBottomWidth - c2, left + width - borderRightWidth, top + height - Math.max(rbr, borderBottomWidth)); // Clip inner right border edge\n\n  ctx.lineTo(left + width - borderRightWidth, top + Math.max(rtr, borderTopWidth)); // Ellipse coefficients inner top right cap\n\n  var innerTopRightRadiusX = Math.max(rtr - borderRightWidth, 0);\n  var innerTopRightRadiusY = Math.max(rtr - borderTopWidth, 0);\n  var c3 = innerTopRightRadiusX * (1.0 - KAPPA);\n  var c4 = innerTopRightRadiusY * (1.0 - KAPPA);\n  var topRightXCoord = left + width - Math.max(rtr, borderRightWidth); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth, top + borderTopWidth + c4, left + width - borderRightWidth - c3, top + borderTopWidth, topRightXCoord, top + borderTopWidth);\n  ctx.lineTo(topRightXCoord, top); // Move right in case the margin exceedes the radius\n\n  ctx.lineTo(left + width - rtr, top); // Ellipse coefficients outer top right cap\n\n  var c5 = rtr * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + width - c5, top, left + width, top + c5, left + width, top + rtr);\n  ctx.closePath();\n  ctx.clip(); // Clip border right cap joins\n\n  if (borderTopWidth) {\n    var trSlope = -borderTopWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, trSlope * (-width / 2) + top);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderBottomWidth) {\n    var brSlope = borderBottomWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, brSlope * (-width / 2) + top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left + width, top);\n    ctx.lineTo(left, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderRight = function fillBorderRight(ctx, layout, style, rtr, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderRightColor = style.borderRightColor,\n      borderRightStyle = style.borderRightStyle,\n      borderRightWidth = style.borderRightWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderBottomWidth = style.borderBottomWidth;\n  var c0 = rbr * (1.0 - KAPPA);\n  var c1 = rtr * (1.0 - KAPPA);\n  ctx.moveTo(left + width - rtr, top);\n  ctx.bezierCurveTo(left + width - c1, top, left + width, top + c1, left + width, top + rtr);\n  ctx.lineTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - c0, left + width - c0, top + height, left + width - rbr, top + height);\n  ctx.strokeColor(borderRightColor);\n  ctx.lineWidth(Math.max(borderRightWidth, borderTopWidth, borderBottomWidth) * 2);\n\n  if (borderRightStyle === 'dashed') {\n    ctx.dash(borderRightWidth * 2, {\n      space: borderRightWidth * 1.2\n    });\n  } else if (borderRightStyle === 'dotted') {\n    ctx.dash(borderRightWidth, {\n      space: borderRightWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderBottom = function clipBorderBottom(ctx, layout, style, rbl, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderBottomWidth = style.borderBottomWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth; // Clip outer top border edge\n\n  ctx.moveTo(left + width - rbr, top + height);\n  ctx.lineTo(left + rbl, top + height); // Ellipse coefficients outer top right cap\n\n  var c0 = rbl * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl); // Move up in case the margin exceedes the radius\n\n  var bottomLeftYCoord = top + height - Math.max(borderBottomWidth, rbl);\n  ctx.lineTo(left, bottomLeftYCoord); // Clip inner bottom left cap\n\n  ctx.lineTo(left + borderLeftWidth, bottomLeftYCoord); // Ellipse coefficients inner top right cap\n\n  var innerBottomLeftRadiusX = Math.max(rbl - borderLeftWidth, 0);\n  var innerBottomLeftRadiusY = Math.max(rbl - borderBottomWidth, 0);\n  var c1 = innerBottomLeftRadiusX * (1.0 - KAPPA);\n  var c2 = innerBottomLeftRadiusY * (1.0 - KAPPA); // Clip inner bottom left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth, top + height - borderBottomWidth - c2, left + borderLeftWidth + c1, top + height - borderBottomWidth, left + borderLeftWidth + innerBottomLeftRadiusX, top + height - borderBottomWidth); // Clip inner bottom border edge\n\n  ctx.lineTo(left + width - Math.max(rbr, borderRightWidth), top + height - borderBottomWidth); // Ellipse coefficients inner top left cap\n\n  var innerBottomRightRadiusX = Math.max(rbr - borderRightWidth, 0);\n  var innerBottomRightRadiusY = Math.max(rbr - borderBottomWidth, 0);\n  var c3 = innerBottomRightRadiusX * (1.0 - KAPPA);\n  var c4 = innerBottomRightRadiusY * (1.0 - KAPPA);\n  var bottomRightYCoord = top + height - Math.max(borderBottomWidth, rbr); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + width - borderRightWidth - c3, top + height - borderBottomWidth, left + width - borderRightWidth, top + height - borderBottomWidth - c4, left + width - borderRightWidth, bottomRightYCoord);\n  ctx.lineTo(left + width, bottomRightYCoord); // Move down in case the margin exceedes the radius\n\n  ctx.lineTo(left + width, top + height - rbr); // Ellipse coefficients outer top left cap\n\n  var c5 = rbr * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left + width, top + height - c5, left + width - c5, top + height, left + width - rbr, top + height);\n  ctx.closePath();\n  ctx.clip(); // Clip border bottom cap joins\n\n  if (borderRightWidth) {\n    var brSlope = borderBottomWidth / borderRightWidth;\n    ctx.moveTo(left + width / 2, brSlope * (-width / 2) + top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderLeftWidth) {\n    var trSlope = -borderBottomWidth / borderLeftWidth;\n    ctx.moveTo(left + width / 2, trSlope * (width / 2) + top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.lineTo(left + width, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderBottom = function fillBorderBottom(ctx, layout, style, rbl, rbr) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderBottomColor = style.borderBottomColor,\n      borderBottomStyle = style.borderBottomStyle,\n      borderBottomWidth = style.borderBottomWidth,\n      borderRightWidth = style.borderRightWidth,\n      borderLeftWidth = style.borderLeftWidth;\n  var c0 = rbl * (1.0 - KAPPA);\n  var c1 = rbr * (1.0 - KAPPA);\n  ctx.moveTo(left + width, top + height - rbr);\n  ctx.bezierCurveTo(left + width, top + height - c1, left + width - c1, top + height, left + width - rbr, top + height);\n  ctx.lineTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl);\n  ctx.strokeColor(borderBottomColor);\n  ctx.lineWidth(Math.max(borderBottomWidth, borderRightWidth, borderLeftWidth) * 2);\n\n  if (borderBottomStyle === 'dashed') {\n    ctx.dash(borderBottomWidth * 2, {\n      space: borderBottomWidth * 1.2\n    });\n  } else if (borderBottomStyle === 'dotted') {\n    ctx.dash(borderBottomWidth, {\n      space: borderBottomWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar clipBorderLeft = function clipBorderLeft(ctx, layout, style, rbl, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      width = layout.width,\n      height = layout.height;\n  var borderTopWidth = style.borderTopWidth,\n      borderLeftWidth = style.borderLeftWidth,\n      borderBottomWidth = style.borderBottomWidth; // Clip outer left border edge\n\n  ctx.moveTo(left, top + height - rbl);\n  ctx.lineTo(left, top + rtl); // Ellipse coefficients outer top left cap\n\n  var c0 = rtl * (1.0 - KAPPA); // Clip outer top left cap\n\n  ctx.bezierCurveTo(left, top + c0, left + c0, top, left + rtl, top); // Move right in case the margin exceedes the radius\n\n  var topLeftCoordX = left + Math.max(borderLeftWidth, rtl);\n  ctx.lineTo(topLeftCoordX, top); // Clip inner top left cap\n\n  ctx.lineTo(topLeftCoordX, top + borderTopWidth); // Ellipse coefficients inner top left cap\n\n  var innerTopLeftRadiusX = Math.max(rtl - borderLeftWidth, 0);\n  var innerTopLeftRadiusY = Math.max(rtl - borderTopWidth, 0);\n  var c1 = innerTopLeftRadiusX * (1.0 - KAPPA);\n  var c2 = innerTopLeftRadiusY * (1.0 - KAPPA); // Clip inner top right cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth + c1, top + borderTopWidth, left + borderLeftWidth, top + borderTopWidth + c2, left + borderLeftWidth, top + Math.max(rtl, borderTopWidth)); // Clip inner left border edge\n\n  ctx.lineTo(left + borderLeftWidth, top + height - Math.max(rbl, borderBottomWidth)); // Ellipse coefficients inner bottom left cap\n\n  var innerBottomLeftRadiusX = Math.max(rbl - borderLeftWidth, 0);\n  var innerBottomLeftRadiusY = Math.max(rbl - borderBottomWidth, 0);\n  var c3 = innerBottomLeftRadiusX * (1.0 - KAPPA);\n  var c4 = innerBottomLeftRadiusY * (1.0 - KAPPA);\n  var bottomLeftXCoord = left + Math.max(rbl, borderLeftWidth); // Clip inner top left cap\n\n  ctx.bezierCurveTo(left + borderLeftWidth, top + height - borderBottomWidth - c4, left + borderLeftWidth + c3, top + height - borderBottomWidth, bottomLeftXCoord, top + height - borderBottomWidth);\n  ctx.lineTo(bottomLeftXCoord, top + height); // Move left in case the margin exceedes the radius\n\n  ctx.lineTo(left + rbl, top + height); // Ellipse coefficients outer top right cap\n\n  var c5 = rbl * (1.0 - KAPPA); // Clip outer top right cap\n\n  ctx.bezierCurveTo(left + c5, top + height, left, top + height - c5, left, top + height - rbl);\n  ctx.closePath();\n  ctx.clip(); // Clip border right cap joins\n\n  if (borderBottomWidth) {\n    var trSlope = -borderBottomWidth / borderLeftWidth;\n    ctx.moveTo(left + width / 2, trSlope * (width / 2) + top + height);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left + width, top);\n    ctx.closePath();\n    ctx.clip();\n  }\n\n  if (borderBottomWidth) {\n    var _trSlope2 = -borderTopWidth / borderLeftWidth;\n\n    ctx.moveTo(left + width / 2, _trSlope2 * (-width / 2) + top);\n    ctx.lineTo(left, top);\n    ctx.lineTo(left, top + height);\n    ctx.lineTo(left + width, top + height);\n    ctx.closePath();\n    ctx.clip();\n  }\n};\n\nvar fillBorderLeft = function fillBorderLeft(ctx, layout, style, rbl, rtl) {\n  var top = layout.top,\n      left = layout.left,\n      height = layout.height;\n  var borderLeftColor = style.borderLeftColor,\n      borderLeftStyle = style.borderLeftStyle,\n      borderLeftWidth = style.borderLeftWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderBottomWidth = style.borderBottomWidth;\n  var c0 = rbl * (1.0 - KAPPA);\n  var c1 = rtl * (1.0 - KAPPA);\n  ctx.moveTo(left + rbl, top + height);\n  ctx.bezierCurveTo(left + c0, top + height, left, top + height - c0, left, top + height - rbl);\n  ctx.lineTo(left, top + rtl);\n  ctx.bezierCurveTo(left, top + c1, left + c1, top, left + rtl, top);\n  ctx.strokeColor(borderLeftColor);\n  ctx.lineWidth(Math.max(borderLeftWidth, borderTopWidth, borderBottomWidth) * 2);\n\n  if (borderLeftStyle === 'dashed') {\n    ctx.dash(borderLeftWidth * 2, {\n      space: borderLeftWidth * 1.2\n    });\n  } else if (borderLeftStyle === 'dotted') {\n    ctx.dash(borderLeftWidth, {\n      space: borderLeftWidth * 1.2\n    });\n  }\n\n  ctx.stroke();\n  ctx.undash();\n};\n\nvar shouldRenderBorders = function shouldRenderBorders(node) {\n  return node.box && (node.box.borderTopWidth || node.box.borderRightWidth || node.box.borderBottomWidth || node.box.borderLeftWidth);\n};\n\nvar renderBorders = function renderBorders(ctx, node) {\n  if (!shouldRenderBorders(node)) return;\n  var _node$box = node.box,\n      width = _node$box.width,\n      height = _node$box.height,\n      borderTopWidth = _node$box.borderTopWidth,\n      borderLeftWidth = _node$box.borderLeftWidth,\n      borderRightWidth = _node$box.borderRightWidth,\n      borderBottomWidth = _node$box.borderBottomWidth;\n  var _node$style = node.style,\n      opacity = _node$style.opacity,\n      _node$style$borderTop = _node$style.borderTopLeftRadius,\n      borderTopLeftRadius = _node$style$borderTop === void 0 ? 0 : _node$style$borderTop,\n      _node$style$borderTop2 = _node$style.borderTopRightRadius,\n      borderTopRightRadius = _node$style$borderTop2 === void 0 ? 0 : _node$style$borderTop2,\n      _node$style$borderBot = _node$style.borderBottomLeftRadius,\n      borderBottomLeftRadius = _node$style$borderBot === void 0 ? 0 : _node$style$borderBot,\n      _node$style$borderBot2 = _node$style.borderBottomRightRadius,\n      borderBottomRightRadius = _node$style$borderBot2 === void 0 ? 0 : _node$style$borderBot2,\n      _node$style$borderTop3 = _node$style.borderTopColor,\n      borderTopColor = _node$style$borderTop3 === void 0 ? 'black' : _node$style$borderTop3,\n      _node$style$borderTop4 = _node$style.borderTopStyle,\n      borderTopStyle = _node$style$borderTop4 === void 0 ? 'solid' : _node$style$borderTop4,\n      _node$style$borderLef = _node$style.borderLeftColor,\n      borderLeftColor = _node$style$borderLef === void 0 ? 'black' : _node$style$borderLef,\n      _node$style$borderLef2 = _node$style.borderLeftStyle,\n      borderLeftStyle = _node$style$borderLef2 === void 0 ? 'solid' : _node$style$borderLef2,\n      _node$style$borderRig = _node$style.borderRightColor,\n      borderRightColor = _node$style$borderRig === void 0 ? 'black' : _node$style$borderRig,\n      _node$style$borderRig2 = _node$style.borderRightStyle,\n      borderRightStyle = _node$style$borderRig2 === void 0 ? 'solid' : _node$style$borderRig2,\n      _node$style$borderBot3 = _node$style.borderBottomColor,\n      borderBottomColor = _node$style$borderBot3 === void 0 ? 'black' : _node$style$borderBot3,\n      _node$style$borderBot4 = _node$style.borderBottomStyle,\n      borderBottomStyle = _node$style$borderBot4 === void 0 ? 'solid' : _node$style$borderBot4;\n  var style = {\n    borderTopColor: borderTopColor,\n    borderTopWidth: borderTopWidth,\n    borderTopStyle: borderTopStyle,\n    borderLeftColor: borderLeftColor,\n    borderLeftWidth: borderLeftWidth,\n    borderLeftStyle: borderLeftStyle,\n    borderRightColor: borderRightColor,\n    borderRightWidth: borderRightWidth,\n    borderRightStyle: borderRightStyle,\n    borderBottomColor: borderBottomColor,\n    borderBottomWidth: borderBottomWidth,\n    borderBottomStyle: borderBottomStyle,\n    borderTopLeftRadius: borderTopLeftRadius,\n    borderTopRightRadius: borderTopRightRadius,\n    borderBottomLeftRadius: borderBottomLeftRadius,\n    borderBottomRightRadius: borderBottomRightRadius\n  };\n  var rtr = Math.min(borderTopRightRadius, 0.5 * width, 0.5 * height);\n  var rtl = Math.min(borderTopLeftRadius, 0.5 * width, 0.5 * height);\n  var rbr = Math.min(borderBottomRightRadius, 0.5 * width, 0.5 * height);\n  var rbl = Math.min(borderBottomLeftRadius, 0.5 * width, 0.5 * height);\n  ctx.save();\n  ctx.strokeOpacity(opacity);\n\n  if (borderTopWidth) {\n    ctx.save();\n    clipBorderTop(ctx, node.box, style, rtr, rtl);\n    fillBorderTop(ctx, node.box, style, rtr, rtl);\n    ctx.restore();\n  }\n\n  if (borderRightWidth) {\n    ctx.save();\n    clipBorderRight(ctx, node.box, style, rtr, rbr);\n    fillBorderRight(ctx, node.box, style, rtr, rbr);\n    ctx.restore();\n  }\n\n  if (borderBottomWidth) {\n    ctx.save();\n    clipBorderBottom(ctx, node.box, style, rbl, rbr);\n    fillBorderBottom(ctx, node.box, style, rbl, rbr);\n    ctx.restore();\n  }\n\n  if (borderLeftWidth) {\n    ctx.save();\n    clipBorderLeft(ctx, node.box, style, rbl, rtl);\n    fillBorderLeft(ctx, node.box, style, rbl, rtl);\n    ctx.restore();\n  }\n\n  ctx.restore();\n};\n\nvar drawBackground = function drawBackground(ctx, node) {\n  var _node$style;\n\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var color = parseColor(node.style.backgroundColor);\n  var nodeOpacity = isNil((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.opacity) ? 1 : node.style.opacity;\n  var opacity = Math.min(color.opacity, nodeOpacity);\n  ctx.fillOpacity(opacity).fillColor(color.value).rect(left, top, width, height).fill();\n};\n\nvar renderBackground = function renderBackground(ctx, node) {\n  var _node$style2;\n\n  var hasBackground = !!node.box && !!((_node$style2 = node.style) !== null && _node$style2 !== void 0 && _node$style2.backgroundColor);\n\n  if (hasBackground) {\n    ctx.save();\n    clipNode(ctx, node);\n    drawBackground(ctx, node);\n    ctx.restore();\n  }\n};\n\nvar isSrcId = function isSrcId(value) {\n  return /^#.+/.test(value);\n};\n\nvar setLink = function setLink(ctx, node) {\n  var props = node.props || {};\n  var _node$box = node.box,\n      top = _node$box.top,\n      left = _node$box.left,\n      width = _node$box.width,\n      height = _node$box.height;\n  var src = props.src || props.href;\n\n  if (src) {\n    var isId = isSrcId(src);\n    var method = isId ? 'goTo' : 'link';\n    var value = isId ? src.slice(1) : src;\n    ctx[method](left, top, width, height, value);\n  }\n};\n\nvar setDestination = function setDestination(ctx, node) {\n  var _node$props;\n\n  if ((_node$props = node.props) !== null && _node$props !== void 0 && _node$props.id) {\n    ctx.addNamedDestination(node.props.id, 'XYZ', null, node.box.top, null);\n  }\n};\n\nvar _renderFns;\n\nvar isRecursiveNode = function isRecursiveNode(node) {\n  return node.type !== P.Text && node.type !== P.Svg;\n};\n\nvar renderChildren = function renderChildren(ctx, node, options) {\n  ctx.save();\n\n  if (node.box) {\n    ctx.translate(node.box.left, node.box.top);\n  }\n\n  var children = node.children || [];\n\n  var renderChild = function renderChild(child) {\n    return renderNode(ctx, child, options);\n  };\n\n  children.forEach(renderChild);\n  ctx.restore();\n};\n\nvar renderFns = (_renderFns = {}, _renderFns[P.Text] = renderText, _renderFns[P.Note] = renderNote, _renderFns[P.Image] = renderImage, _renderFns[P.Canvas] = renderCanvas, _renderFns[P.Svg] = renderSvg, _renderFns[P.Link] = setLink, _renderFns);\n\nvar renderNode = function renderNode(ctx, node, options) {\n  var _node$style;\n\n  var overflowHidden = ((_node$style = node.style) === null || _node$style === void 0 ? void 0 : _node$style.overflow) === 'hidden';\n  var shouldRenderChildren = isRecursiveNode(node);\n  if (node.type === P.Page) renderPage(ctx, node);\n  ctx.save();\n  if (overflowHidden) clipNode(ctx, node);\n  applyTransformations(ctx, node);\n  renderBackground(ctx, node);\n  renderBorders(ctx, node);\n  var renderFn = renderFns[node.type];\n  if (renderFn) renderFn(ctx, node, options);\n  if (shouldRenderChildren) renderChildren(ctx, node, options);\n  setDestination(ctx, node);\n  renderDebug(ctx, node);\n  ctx.restore();\n};\n\n/* eslint-disable no-param-reassign */\nvar setPDFMetadata = function setPDFMetadata(target) {\n  return function (key, value) {\n    if (value) target.info[key] = value;\n  };\n};\n/**\n * Set document instance metadata\n *\n * @param {Object} ctx document instance\n * @param {Object} doc document root\n */\n\n\nvar addMetadata = function addMetadata(ctx, doc) {\n  var setProp = setPDFMetadata(ctx);\n  var props = doc.props || {};\n  var title = props.title || null;\n  var author = props.author || null;\n  var subject = props.subject || null;\n  var keywords = props.keywords || null;\n  var creator = props.creator || 'react-pdf';\n  var producer = props.producer || 'react-pdf';\n  setProp('Title', title);\n  setProp('Author', author);\n  setProp('Subject', subject);\n  setProp('Keywords', keywords);\n  setProp('Creator', creator);\n  setProp('Producer', producer);\n};\n\n/* eslint-disable no-param-reassign */\nvar addNodeBookmark = function addNodeBookmark(ctx, node, pageNumber, registry) {\n  var _node$props;\n\n  var bookmark = (_node$props = node.props) === null || _node$props === void 0 ? void 0 : _node$props.bookmark;\n\n  if (bookmark) {\n    var title = bookmark.title,\n        parent = bookmark.parent,\n        expanded = bookmark.expanded,\n        zoom = bookmark.zoom,\n        fit = bookmark.fit;\n    var outline = registry[parent] || ctx.outline;\n    var top = bookmark.top || node.box.top;\n    var left = bookmark.left || node.box.left;\n    var instance = outline.addItem(title, {\n      pageNumber: pageNumber,\n      expanded: expanded,\n      top: top,\n      left: left,\n      zoom: zoom,\n      fit: fit\n    });\n    registry[bookmark.ref] = instance;\n  }\n\n  if (!node.children) return;\n  node.children.forEach(function (child) {\n    return addNodeBookmark(ctx, child, pageNumber, registry);\n  });\n};\n\nvar addBookmarks = function addBookmarks(ctx, root) {\n  var registry = {};\n  var pages = root.children || [];\n  pages.forEach(function (page, i) {\n    addNodeBookmark(ctx, page, i, registry);\n  });\n};\n\nvar render = function render(ctx, doc) {\n  var pages = doc.children || [];\n  var options = {\n    imageCache: new Map()\n  };\n  addMetadata(ctx, doc);\n  pages.forEach(function (page) {\n    return renderNode(ctx, page, options);\n  });\n  addBookmarks(ctx, doc);\n  ctx.end();\n  return ctx;\n};\n\nexport { render as default };\n"]},"metadata":{},"sourceType":"module"}