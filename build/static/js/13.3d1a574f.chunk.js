(this.webpackJsonphrms=this.webpackJsonphrms||[]).push([[13],{1053:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a(27),s=a(9),i=a(2),r=a(56),c=a(126),o=a(24),d=a.n(o),u=a(927),p=a(21),b=a(63),j=a(453),m=a(408),h=a(578),y=a(621),x=a(216),O=a(29),_=a(130),f=a(91),w=a(446),g=a(598),v=a(611),N=a(134),P=a(215),S=a(571),I=a(826),k=a.n(I),L=a(97),C=a(463),A=a(1),z=[{name:"",period:"",date:"",payrun:"",bank_name:"",bank_acno:"",tap_acno:"",scp_acno:"",empid:"",status:"",allows_type1:" ",allows_type1amt:0,allows_type2:" ",allows_type2amt:0,allows_type3:" ",allows_type3amt:0,allows_type4:" ",allows_type4amt:0,allows_type5:" ",allows_type5amt:0,allows_type6:" ",allows_type6amt:0,allows_type7:" ",allows_type7amt:0,allows_type8:" ",allows_type8amt:0,deducts_type1:" ",deducts_type1amt:0,deducts_type2:" ",deducts_type2amt:0,deducts_type3:" ",deducts_type3amt:0,deducts_type4:" ",deducts_type4amt:0,deducts_type5:" ",deducts_type5amt:0,deducts_type6:" ",deducts_type6amt:0,deducts_type7:" ",deducts_type7amt:0,deducts_type8:" ",deducts_type8amt:0,tap_checkbox:!1,salary_currency:" ",currency_rate:1,wages:0,nett_pay:0,tap_amount:0,scp_amount:0,total_allowances:0,total_deductions:0,site_allows:0,expenses_claims:0,nett_pay_bnd:0,wages_bnd:0,site_allows_bnd:0,expenses_claims_bnd:0,tap_amount_bnd:0,scp_amount_bnd:0,total_allowances_bnd:0,total_deductions_bnd:0}],D=Object(L.a)((function(e){return{root:{flexGrow:1},button:{margin:e.spacing(1)},container:{margin:0,padding:0,width:"80vw",display:"grid",gridTemplateColumns:"repeat(auto-fill,250px)",gridAutoRows:"10px",position:"absolute",left:"50%",transform:"translateX(-50%)",justifyContent:"center",backgroundColor:"primary"},fixedHeight:{height:800},paper:{padding:e.spacing(10),display:"flex",overflow:"auto",flexDirection:"column",border:"1px solid",width:"100%",color:"primary",bcakgroundColor:"black"},card:{backgroundColor:"black"},section:{width:"80vw",margin:"1rem auto",maxWidth:"var(--max-width)"},underline:{width:"5rem",height:"0.25rem",marginBottom:"1.25rem",background:"var(--clr-primary-5)",marginLeft:"auto",marginRight:"auto"},title:{marginbottom:"4rem",textAlign:"center"},jobscenter:{width:"80vw",margin:"0 auto",maxWidth:"var(--max-width)",flexDirection:"row"},btncontainer:{display:"flex",flexDirection:"row",justifyContent:"center",marginBottom:"4rem",flexWrap:"wrap"},jobbtn:{background:"transparent",borderColor:"transparent",textTransform:"capitalize",fontSize:"1.25rem",letterSpacing:"var(--spacing)",margin:"0 0.5rem",transition:"var(--transition)",cursor:"pointer",padding:"0.25rem 0",lineHeight:"1",outlineColor:"var(--clr-primary-10)","&:hover":{color:"var(--clr-primary-5)",boxShadow:"0 2px var(--clr-primary-5)"}},activebtn:{color:"var(--clr-primary-5)",boxShadow:"0 2px var(--clr-primary-5)"},jobinfo:{fontWeight:"400"},divider:{background:"white"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:350},divContainer:{display:"flex",flexDirection:"row"},formLabel:{fontSize:12,textAlign:"left",marginLeft:8,marginTop:5}}})),E=function(e){var t=e.formdata,a=(e.setFormdata,e.loadFormdata),l=e.setLoadFormdata,r=e.payitems,c=e.rowindex,o=e.isStart,d=e.singlebatchpayslip,u=D(),p=Object(i.useState)(z),b=Object(s.a)(p,2),m=b[0],h=b[1],y=Object(i.useState)(!1),x=Object(s.a)(y,2),I=x[0],L=x[1];Object(i.useEffect)((function(){h((function(e){return Object(n.a)({},t)})),l(!1)}),[a]),Object(i.useEffect)((function(){m&&(F(),L(!1))}),[I]);var E=function(e){e.preventDefault();var t=e.target,a=t.name,l=t.type,s=t.value,i="number"===l?isNaN(s)||void 0===s?0:parseFloat(s):s;h((function(e){return Object(n.a)(Object(n.a)({},m),{},Object(O.a)({},a,i))})),function(e){var t=e.name,a=e.value,n=d[c];n[t]=a,n.tableData.checked=!0}({name:a,value:i}),L(!0)},F=function(e){if(!o&&C.a&&d&&m){var t,a,l,s,i,r=0,u=0,p=0,b=0,j=0,y=0,x=0,O=0,_=0,f=0,w=0,g=d[c];if(!g)return!1;t=isNaN(m.wages)||void 0===m.wages?0:m.wages,a=m.tap_checkbox?Math.ceil(.05*t):0,(r=m.tap_checkbox?Math.round(.035*(t+Number.EPSILON)*100)/100:0)>98&&(r=98),s=parseFloat(isNaN(m.site_allows)?0:m.site_allows),i=parseFloat(isNaN(m.expenses_claims)?0:m.expenses_claims),u=parseFloat(isNaN(m.allows_type3amt)?0:m.allows_type3amt)+parseFloat(isNaN(m.allows_type4amt)?0:m.allows_type4amt)+parseFloat(isNaN(m.allows_type5amt)?0:m.allows_type5amt)+parseFloat(isNaN(m.allows_type6amt)?0:m.allows_type6amt)+parseFloat(isNaN(m.allows_type7amt)?0:m.allows_type7amt)+parseFloat(isNaN(m.allows_type8amt)?0:m.allows_type8amt),p=parseFloat(isNaN(m.deducts_type1amt)?0:m.deducts_type1amt)+parseFloat(isNaN(m.deducts_type2amt)?0:m.deducts_type2amt)+parseFloat(isNaN(m.deducts_type3amt)?0:m.deducts_type3amt)+parseFloat(isNaN(m.deducts_type4amt)?0:m.deducts_type4amt)+parseFloat(isNaN(m.deducts_type5amt)?0:m.deducts_type5amt)+parseFloat(isNaN(m.deducts_type6amt)?0:m.deducts_type6amt)+parseFloat(isNaN(m.deducts_type7amt)?0:m.deducts_type7amt)+parseFloat(isNaN(m.deducts_type8amt)?0:m.deducts_type8amt),u=isNaN(u)?0:u,p=isNaN(p)?0:p,l=t+s+i-a-r+u-p,"BND"===m.currency?(b=t,O=u,_=p,j=a,y=r,f=s,w=i,x=l):(b=Math.round((t+Number.EPSILON)*m.currency_rate*100)/100,O=Math.round((u+Number.EPSILON)*m.currency_rate*100)/100,_=Math.round((p+Number.EPSILON)*m.currency_rate*100)/100,j=Math.round((a+Number.EPSILON)*m.currency_rate*100)/100,y=Math.round((r+Number.EPSILON)*m.currency_rate*100)/100,f=Math.round((s+Number.EPSILON)*m.currency_rate*100)/100,w=Math.round((i+Number.EPSILON)*m.currency_rate*100)/100,x=Math.round((l+Number.EPSILON)*m.currency_rate*100)/100),h((function(e){return Object(n.a)(Object(n.a)({},m),{},{wages:t,total_allowances:u,total_deductions:p,tap_amount:a,scp_amount:r,site_allows:s,expenses_claims:i,nett_pay:l,wages_bnd:b,total_allowances_bnd:O,total_deductions_bnd:_,tap_amount_bnd:j,scp_amount_bnd:y,site_allows_bnd:f,expenses_claims_bnd:w,nett_pay_bnd:x})})),g.tap_amount=a,g.scp_amount=r,g.total_allowances=u,g.total_deductions=p,g.site_allows=s,g.expenses_claims=i,g.nett_pay=l,g.wages_bnd=b,g.tap_amount_bnd=j,g.scp_amount_bnd=y,g.site_allows_bnd=f,g.expenses_claims_bnd=w,g.total_allowances_bnd=O,g.total_deductions_bnd=_,g.nett_pay_bnd=x}};return Object(A.jsxs)("form",{onSubmit:function(e){e.preventDefault(),F()},children:[Object(A.jsxs)(_.a,{container:!0,direction:"row",style:{border:"1px solid white"},children:[Object(A.jsx)(_.a,{item:!0,sm:4,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)(j.n,{as:"u",fontSize:"md",children:Object(A.jsx)(j.i,{size:"sm",children:"Allowances"})})}),Object(A.jsx)(_.a,{item:!0,sm:4,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)(j.n,{as:"u",fontSize:"md",children:Object(A.jsx)(j.i,{size:"sm",children:"Deductions"})})}),Object(A.jsx)(_.a,{item:!0,sm:4,align:"center",style:{border:"1px solid white"},children:Object(A.jsxs)(j.n,{as:"u",fontSize:"md",children:[Object(A.jsx)(j.i,{size:"sm",children:"Summary"}),Object(A.jsxs)(j.i,{size:"sm",children:["(",m.name,")"]})]})})]}),Object(A.jsxs)(_.a,{container:!0,direction:"row",style:{border:"1px solid white"},children:[Object(A.jsx)(_.a,{item:!0,sm:4,align:"center",style:{border:"1px solid white"},children:Object(A.jsxs)(_.a,{container:!0,direction:"row",style:{border:"1px solid white"},children:[Object(A.jsxs)(_.a,{item:!0,sm:8,align:"center",style:{border:"1px solid white"},children:[Object(A.jsx)(j.b,{children:Object(A.jsx)(j.n,{fontSize:"sm",children:"Description"})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Allowance",name:"allows_type1",variant:"filled",type:"text",value:m.allows_type1,onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Allowance",name:"allows_type2",variant:"filled",type:"text",displayEmpty:!0,defaultValue:"",value:m.allows_type2,onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Allowance"}),Object(A.jsxs)(g.a,{name:"allows_type3",value:m.allows_type3,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Allowances"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Allowance"}),Object(A.jsxs)(g.a,{name:"allows_type4",value:m.allows_type4,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Allowances"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Allowance"}),Object(A.jsxs)(g.a,{name:"allows_type5",value:m.allows_type5,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Allowances"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Allowance"}),Object(A.jsxs)(g.a,{name:"allows_type6",value:m.allows_type6,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Allowances"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Allowance"}),Object(A.jsxs)(g.a,{name:"allows_type7",value:m.allows_type7,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Allowances"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Allowance"}),Object(A.jsxs)(g.a,{name:"allows_type8",value:m.allows_type8,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Allowances"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsx)(j.b,{p:2,children:Object(A.jsx)(S.a,{isInvalid:!m.tap_checkbox,isChecked:m.tap_checkbox,colorScheme:"red",size:"md",children:Object(A.jsx)(j.i,{size:"sm",children:"TAP/SCP Contribution"})})})]}),Object(A.jsxs)(_.a,{item:!0,sm:4,align:"center",style:{border:"1px solid white"},children:[Object(A.jsx)(j.b,{children:Object(A.jsx)(j.n,{fontSize:"sm",children:m.salary_currency?m.salary_currency:"BND"})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"site_allows",variant:"filled",type:"number",step:"any",value:m.site_allows,onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"expenses_claims",variant:"filled",type:"number",step:"any",value:m.expenses_claims,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"allows_type3amt",variant:"filled",type:"number",min:"0",max:"9999",step:"any",value:m.allows_type3amt,onChange:function(e){E(e)},InputLabelProps:{shrink:!0},errorText:""})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"allows_type4amt",variant:"filled",type:"number",step:"any",value:m.allows_type4amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"allows_type5amt",variant:"filled",type:"number",step:"any",value:m.allows_type5amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"allows_type6amt",variant:"filled",type:"number",step:"any",value:m.allows_type6amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"allows_type7amt",variant:"filled",type:"number",step:"any",value:m.allows_type7amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"allows_type8amt",variant:"filled",type:"number",step:"any",value:m.allows_type8amt,onChange:E,InputLabelProps:{shrink:!0}})})]})]})}),Object(A.jsx)(_.a,{item:!0,sm:4,align:"center",style:{border:"1px solid white"},children:Object(A.jsxs)(_.a,{container:!0,direction:"row",style:{border:"1px solid white"},children:[Object(A.jsxs)(_.a,{item:!0,sm:8,align:"center",style:{border:"1px solid white"},children:[Object(A.jsx)(j.b,{children:Object(A.jsx)(j.n,{fontSize:"sm",children:"Description"})}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Deduction"}),Object(A.jsxs)(g.a,{name:"deducts_type1",value:m.deducts_type1,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Deductions"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Deduction"}),Object(A.jsxs)(g.a,{name:"deducts_type2",value:m.deducts_type2,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Deductions"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Deduction"}),Object(A.jsxs)(g.a,{name:"deducts_type3",value:m.deducts_type3,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Deductions"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Deduction"}),Object(A.jsxs)(g.a,{name:"deducts_type4",value:m.deducts_type4,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Deductions"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Deduction"}),Object(A.jsxs)(g.a,{name:"deducts_type5",value:m.deducts_type5,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Deductions"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Deduction"}),Object(A.jsxs)(g.a,{name:"deducts_type6",value:m.deducts_type6,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Deductions"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Deduction"}),Object(A.jsxs)(g.a,{name:"deducts_type7",value:m.deducts_type7,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Deductions"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(w.a,{htmlFor:"deduct-customized-native-simple",className:u.formLabel,children:"Deduction"}),Object(A.jsxs)(g.a,{name:"deducts_type8",value:m.deducts_type8,style:{padding:4,marginLeft:5,width:"100%",textAlign:"left"},onChange:E,children:[Object(A.jsx)("option",{value:"",children:"None"}),r.filter((function(e){return"Deductions"===e.pay_type})).map((function(e){return Object(A.jsx)("option",{value:e.name,children:e.name},e.id)}))]})]}),"BND"!==m.salary_currency&&Object(A.jsx)(j.b,{p:2,children:Object(A.jsx)(j.n,{fontSize:"md",children:Object(A.jsxs)(j.i,{size:"sm",children:["Exchange Rate: ",m.currency_rate]})})})]}),Object(A.jsxs)(_.a,{item:!0,sm:4,align:"center",style:{border:"1px solid white"},children:[Object(A.jsx)(j.b,{children:Object(A.jsx)(j.n,{fontSize:"sm",children:m.salary_currency?m.salary_currency:"BND"})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"deducts_type1amt",variant:"filled",type:"number",step:"any",inputProps:{minLength:0},value:m.deducts_type1amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"deducts_type2amt",variant:"filled",type:"number",step:"any",value:m.deducts_type2amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"deducts_type3amt",variant:"filled",type:"number",step:"any",value:m.deducts_type3amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"deducts_type4amt",variant:"filled",type:"number",step:"any",value:m.deducts_type4amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"deducts_type5amt",variant:"filled",type:"number",step:"any",value:m.deducts_type5amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"deducts_type6amt",variant:"filled",type:"number",step:"any",value:m.deducts_type6amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"deducts_type7amt",variant:"filled",type:"number",step:"any",value:m.deducts_type7amt,onChange:E,InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Amount",name:"deducts_type8amt",variant:"filled",type:"number",step:"any",value:m.deducts_type8amt,onChange:E,InputLabelProps:{shrink:!0}})})]})]})}),Object(A.jsx)(_.a,{item:!0,sm:4,align:"center",style:{border:"1px solid white"},children:Object(A.jsxs)(_.a,{container:!0,direction:"row",style:{border:"1px solid white"},children:[Object(A.jsxs)(_.a,{item:!0,sm:m.salary_currency&&"BND"!==m.salary_currency?6:12,align:"center",style:{border:"1px solid white"},children:[Object(A.jsx)(j.b,{children:Object(A.jsx)(j.n,{fontSize:"sm",children:m.salary_currency?m.salary_currency:"BND"})}),Object(A.jsx)(v.a,{variant:"fullWidth",className:u.divider}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Wages",name:"wages",variant:"filled",type:"number",step:"any",value:m.wages,onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"TAP Amount",name:"tap_amount",variant:"filled",type:"number",value:k()(m.tap_amount),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"SCP Amount",name:"scp_amount",variant:"filled",type:"number",value:k()(m.scp_amount),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Site Allowances",name:"siteallows",variant:"filled",type:"number",value:k()(m.site_allows),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Expenses Claims",name:"expclaims",variant:"filled",type:"number",value:k()(m.expenses_claims),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Allowances",name:"total_allowances",variant:"filled",type:"number",value:k()(m.total_allowances),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Deductions",name:"total_deductions",variant:"filled",type:"number",value:k()(m.total_deductions),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Nett Pay",name:"nett_pay",variant:"filled",type:"number",value:k()(m.nett_pay),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsxs)(N.a,{type:"submit",variant:"contained",color:"primary",className:u.button,style:{marginLeft:10},onClick:F,children:["Calc ",Object(A.jsx)(P.a,{className:u.rightIcon,children:"send"})]})})]}),m.salary_currency&&"BND"!==m.salary_currency&&Object(A.jsxs)(_.a,{item:!0,sm:6,align:"center",style:{border:"1px solid white"},children:[Object(A.jsx)(v.a,{variant:"fullWidth",className:u.divider}),Object(A.jsx)(j.b,{children:Object(A.jsxs)(j.n,{fontSize:"sm",children:[" ",(m.salary_currency,"BND")]})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Wages",name:"wages",variant:"filled",type:"number",value:k()(m.wages_bnd),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"TAP Amount",name:"tap_amount",variant:"filled",type:"number",value:k()(m.tap_amount_bnd),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"SCP Amount",name:"scp_amount",variant:"filled",type:"number",value:k()(m.scp_amount_bnd),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Site Allowances",name:"siteallows",variant:"filled",type:"number",value:k()(m.site_allows_bnd),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Expenses Claims",name:"expclaims",variant:"filled",type:"number",value:k()(m.expenses_claims_bnd),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Allowances",name:"total_allowances",variant:"filled",type:"number",value:k()(m.total_allowances_bnd),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Deductions",name:"total_deductions",variant:"filled",type:"number",value:k()(m.total_deductions_bnd),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Nett Pay",name:"nett_pay",variant:"filled",type:"number",value:k()(m.nett_pay_bnd),onChange:E,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})]})]})})]})]})},F=a(23),T=a(30),M=function(e){var t=e.singlebatchpayslip,a=Object(F.c)(T.j),l=Object(s.a)(a,2),r=l[0],c=l[1],o=Object(i.useState)(!0),u=Object(s.a)(o,2),p=u[0],b=u[1];return Object(i.useEffect)((function(){!function(){var e=t,a=e.reduce((function(e,t){return e+t.wages_bnd}),0),l=e.reduce((function(e,t){return e+t.site_allows_bnd}),0),s=e.reduce((function(e,t){return e+t.expenses_claims_bnd}),0),i=e.reduce((function(e,t){return e+t.total_allowances_bnd}),0),o=e.reduce((function(e,t){return e+t.total_deductions_bnd}),0),d=e.reduce((function(e,t){return e+t.tap_amount_bnd}),0),u=e.reduce((function(e,t){return e+t.scp_amount_bnd}),0),p=e.reduce((function(e,t){return e+t.nett_pay_bnd}),0);c(Object(n.a)(Object(n.a)({},r),{},{totalpayroll:p,totalwages:a,totaltap:d,totalscp:u,totalallows:i,totaldeducts:o,totalsitesallows:l,totalexpensesclaims:s}))}(),b(!1)}),[p]),Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{}),Object(A.jsxs)("form",{children:[Object(A.jsx)(_.a,{container:!0,direction:"row",style:{border:"1px solid black"},children:Object(A.jsx)(_.a,{children:Object(A.jsx)("div",{})})}),Object(A.jsxs)(_.a,{container:!0,direction:"row",style:{border:"1px solid white"},children:[Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Period",name:"period",variant:"filled",type:"text",value:r.period,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Pay Run Batch",name:"payrun",variant:"filled",type:"text",value:r.payrun,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Status",name:"status",variant:"filled",value:r.status,style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Payroll Total",name:"paytotal",variant:"filled",type:"number",value:k()(r.totalpayroll),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})})]}),Object(A.jsx)(_.a,{container:!0,direction:"row",style:{border:"1px solid white"},children:Object(A.jsx)(_.a,{item:!0,sm:12,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)(j.b,{h:"400",w:"full",overflow:"scroll",children:Object(A.jsx)(d.a,{columns:[{title:"Name",field:"name",editable:"never"},{title:"Wages",field:"wages_bnd",editable:"never",type:"currency"},{title:"TAP Amount",field:"tap_amount_bnd",editable:"never",type:"currency"},{title:"SCP Amount",field:"scp_amount_bnd",editable:"never",type:"currency"},{title:"Site Allows",field:"site_allows_bnd",editable:"never",type:"currency"},{title:"Exps Claims",field:"expenses_claims_bnd",editable:"never",type:"currency"},{title:"Allowances",field:"total_allowances_bnd",editable:"never",type:"currency"},{title:"Deductions",field:"total_deductions_bnd",editable:"never",type:"currency"},{title:"Nett Pay",field:"nett_pay_bnd",editable:"never",type:"currency"}],data:t,title:"Payroll",options:{filtering:!1,search:!1,toolbar:!1,paging:!1,headerStyle:{backgroundColor:"lightblue",color:"primary"},showTitle:!1}})})})}),Object(A.jsxs)(_.a,{container:!0,direction:"row",style:{border:"1px solid white"},children:[Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Wages",name:"totalwages",variant:"filled",type:"currency",value:k()(r.totalwages),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total TAP",name:"totaltap",variant:"filled",type:"currency",value:k()(r.totaltap),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total SCP",name:"totalscp",variant:"filled",type:"currency",value:k()(r.totalscp),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Sites Allows",name:"totalsitesallows",variant:"filled",type:"currency",value:k()(r.totalsiteallows),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Expenses Claims",name:"totalsitesallows",variant:"filled",type:"currency",value:k()(r.totalexpensesclaims),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Allowances",name:"totalallows",variant:"filled",type:"currency",value:k()(r.totalallows),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Deductions",name:"totaldeducts",variant:"filled",type:"currency",value:k()(r.totaldeducts),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})}),Object(A.jsx)(_.a,{item:!0,sm:3,align:"center",style:{border:"1px solid white"},children:Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{label:"Total Payroll",name:"totalpayroll",variant:"filled",type:"currency",value:k()(r.totalpayroll),style:{width:"100%"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}})})})]})]})]})},B=a(406),W=a.n(B),J=a(560),R=a.n(J),V=a(88),Q=function(e){var t=e.singlebatchpayslip,a=t[0].period,n="Payroll Summary for the period  ".concat(a),l=t.map((function(e){return e.name})),s=t.map((function(e){return Object(V.b)(e.wages_bnd)})),i=t.map((function(e){return Object(V.b)(e.tap_amount_bnd)})),r=t.map((function(e){return Object(V.b)(e.scp_amount_bnd)})),c=t.map((function(e){return Object(V.b)(e.site_allows_bnd)})),o=t.map((function(e){return Object(V.b)(e.expenses_claims_bnd)})),d=t.map((function(e){return Object(V.b)(e.total_allowances_bnd)})),u=t.map((function(e){return Object(V.b)(e.total_deductions_bnd)})),p=t.map((function(e){return Object(V.b)(e.nett_pay_bnd)})),b=t.reduce((function(e,t){return e+t.wages_bnd}),0),j=t.reduce((function(e,t){return e+t.tap_amount_bnd}),0),m=t.reduce((function(e,t){return e+t.scp_amount_bnd}),0),h=t.reduce((function(e,t){return e+t.site_allows_bnd}),0),y=t.reduce((function(e,t){return e+t.expenses_claims_bnd}),0),x=t.reduce((function(e,t){return e+t.total_allowances_bnd}),0),O=t.reduce((function(e,t){return e+t.total_deductions_bnd}),0),_=t.reduce((function(e,t){return e+t.nett_pay_bnd}),0),f=R.a.pdfMake.vfs;W.a.vfs=f;var w={pageSize:"A4",pageOrientation:"landscape",content:[{text:"AppSmith Sutera Sdn Bhd",style:"header"},{text:n,style:"subheader"},{style:"tableExample",table:{widths:[200,50,50,50,50,50,50,50,50],body:[[{alignment:"center",text:"Employee Name",style:"subheader"},{alignment:"right",text:"Wages",style:"subheader"},{alignment:"right",text:"TAP Amount",style:"subheader"},{alignment:"right",text:"SCP Amount",style:"subheader"},{alignment:"right",text:"Site Allowances",style:"subheader"},{alignment:"right",text:"Expenses Claims",style:"subheader"},{alignment:"right",text:"Allowances",style:"subheader"},{alignment:"right",text:"Deductions",style:"subheader"},{alignment:"right",text:"Nett Pay",style:"subheader"}],[{stack:[{type:"none",fontSize:8,ul:l}]},{stack:[{type:"none",fontSize:8,alignment:"right",ul:s}]},{stack:[{type:"none",fontSize:8,alignment:"right",ul:i}]},{stack:[{type:"none",fontSize:8,alignment:"right",ul:r}]},{stack:[{type:"none",fontSize:8,alignment:"right",ul:c}]},{stack:[{type:"none",fontSize:8,alignment:"right",ul:o}]},{stack:[{type:"none",fontSize:8,alignment:"right",ul:d}]},{stack:[{type:"none",fontSize:8,alignment:"right",ul:u}]},{stack:[{type:"none",fontSize:8,alignment:"right",ul:p}]}],["",{alignment:"right",text:Object(V.b)(b),style:"footer"},{alignment:"right",text:Object(V.b)(j),style:"footer"},{alignment:"right",text:Object(V.b)(m),style:"footer"},{alignment:"right",text:Object(V.b)(h),style:"footer"},{alignment:"right",text:Object(V.b)(y),style:"footer"},{alignment:"right",text:Object(V.b)(x),style:"footer"},{alignment:"right",text:Object(V.b)(O),style:"footer"},{alignment:"right",text:Object(V.b)(_),style:"footer"}]]}}],styles:{header:{fontSize:12,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:9,bold:!0,margin:[0,10,0,5]},footer:{fontSize:8,bold:!0,margin:[0,10,0,5]},tableExample:{margin:[0,5,0,15]},tableOpacityExample:{margin:[0,5,0,15],fillColor:"blue",fillOpacity:.3},tableHeader:{bold:!0,fontSize:13,color:"black"}},defaultStyle:{}};W.a.createPdf(w).open()},H=a(81),U=a(558),q=a(7),G=a.n(q),Y=a(12),K=a(16),X=a(13);function Z(){return(Z=Object(Y.a)(G.a.mark((function e(t){var a,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,s=Object(l.a)(t,["id"]),e.next=3,fetch(X.z,{method:"PUT",body:JSON.stringify(Object(n.a)({id:a},s))});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){var t=Object(K.useQueryClient)(),a=Object(p.a)();return Object(K.useMutation)((function(e){return function(e){return Z.apply(this,arguments)}(e)}),{onSuccess:function(){t.invalidateQueries("payrun"),a({title:"Payrun batch being updated!",status:"success"})}}).mutate}function ee(){return(ee=Object(Y.a)(G.a.mark((function e(t){var a,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,s=Object(l.a)(t,["id"]),e.next=3,fetch(X.D,{method:"PUT",body:JSON.stringify(Object(n.a)({id:a},s))});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){var t=Object(K.useQueryClient)();Object(p.a)();return Object(K.useMutation)((function(e){return function(e){return ee.apply(this,arguments)}(e)}),{onSuccess:function(){t.invalidateQueries("payslips")}}).mutate}var ae=a(113),ne=a(159),le={name:"",period:"",pay_date:null,payrun:"",bank_name:"",bank_acno:"",salary_currency:"BND",currency_rate:1,tap_acno:"",scp_acno:"",tap_checkbox:!1,empid:"",status:"",allows_type1:"",allows_type1amt:"",allows_type2:"",allows_type2amt:"",allows_type3:" ",allows_type3amt:0,allows_type4:"",allows_type4amt:0,allows_type5:" ",allows_type5amt:0,allows_type6:" ",allows_type6amt:0,allows_type7:" ",allows_type7amt:0,allows_type8:" ",allows_type8amt:0,deducts_type1:" ",deducts_type1amt:0,deducts_type2:" ",deducts_type2amt:0,deducts_type3:" ",deducts_type3amt:0,deducts_type4:" ",deducts_type4amt:0,deducts_type5:" ",deducts_type5amt:0,deducts_type6:" ",deducts_type6amt:0,deducts_type7:" ",deducts_type7amt:0,deducts_type8:" ",deducts_type8amt:0,wages:0,tap_amount:0,scp_amount:0,total_allowances:0,total_deductions:0,site_allows:0,expenses_claims:0,nett_pay:0,wages_bnd:0,site_allows_bnd:0,expenses_claims_bnd:0,total_allowances_bnd:0,total_deductions_bnd:0,tap_amount_bnd:0,scp_amount_bnd:0,nett_pay_bnd:0},se=["January","February","March","April","May","June","July","August","September","October","November","December"],ie=[{title:"Name",field:"name",editable:"never",cellStyle:{width:280,maxWidth:280}}];t.default=function(){var e=Object(r.g)(),t=Object(p.a)(),a=Object(ae.b)().payslip_period,O=Object(C.a)(),_=O.payslipsbatch,f=O.psbpayrunId,w=O.setPSBPayrunId,g=Object(H.a)().employees,v=Object(U.a)().payrun,N=te(),P=$(),S=Object(ne.b)(),I=S.loadPayitems,k=S.payitems,L=Object(F.c)(T.j),z=Object(s.a)(L,2),D=z[0],B=z[1],W=Object(F.c)(T.i),J=Object(s.a)(W,1)[0],R=Object(F.c)(T.k),V=Object(s.a)(R,2),q=(V[0],V[1]),G=Object(i.useState)(!1),Y=Object(s.a)(G,2),K=Y[0],X=Y[1],Z=Object(i.useState)(!1),ee=Object(s.a)(Z,2),re=ee[0],ce=ee[1],oe=Object(i.useState)(le),de=Object(s.a)(oe,2),ue=de[0],pe=de[1],be=Object(i.useState)(0),je=Object(s.a)(be,2),me=je[0],he=je[1],ye=Object(i.useState)(!1),xe=Object(s.a)(ye,2),Oe=xe[0],_e=xe[1],fe=Object(i.useState)(!1),we=Object(s.a)(fe,2),ge=we[0],ve=we[1],Ne=Object(i.useState)(!0),Pe=Object(s.a)(Ne,2),Se=Pe[0],Ie=Pe[1],ke=Object(i.useState)(!1),Le=Object(s.a)(ke,2),Ce=Le[0],Ae=Le[1],ze=Object(i.useState)(!1),De=Object(s.a)(ze,2),Ee=De[0],Fe=De[1],Te=Object(i.useState)(0),Me=Object(s.a)(Te,2),Be=Me[0],We=Me[1],Je=Object(b.e)(),Re=Je.isOpen,Ve=Je.onOpen,Qe=Je.onClose,He=_;Object(i.useEffect)((function(){I(),_e(!0)}),[]),Object(i.useEffect)((function(){he(0),_e(!1)}),[Oe]),Object(i.useEffect)((function(){X(!1)}),[re]),Object(i.useEffect)((function(){w(a)}),[f]),Object(i.useEffect)((function(){Ge(),ve(!1)}),[ge]),Object(i.useEffect)((function(){qe(),Fe(!1)}),[Ee]),Object(i.useEffect)((function(){Ae(1===Be)}),[Be]);var Ue=function(e){Q(e={singlebatchpayslip:e})},qe=function(){"Pending"===D.status&&He.forEach((function(e){if(e.tableData.checked){var t=e.id,a=(e.rec_id,e.tableData,Object(l.a)(e,["id","rec_id","tableData"]));console.log("updatepayslip",e),N(Object(n.a)({id:t},a)),e.tableData.checked=!1}}))},Ge=function(){var e=He.filter((function(e){return e.payrun===a})).map((function(e){return Object(n.a)({},e)})),t=e.reduce((function(e,t){var a=isNaN(t.nett_pay_bnd)?0:t.nett_pay_bnd;return e+Math.round(100*(a+Number.EPSILON))/100}),0),l=e.reduce((function(e,t,a){var n=isNaN(t.wages_bnd)?0:t.wages_bnd;return e+Math.round(100*(n+Number.EPSILON))/100}),0),s=e.reduce((function(e,t){var a=isNaN(t.tap_amount_bnd)?0:t.tap_amount_bnd;return e+Math.round(100*(a+Number.EPSILON))/100}),0),i=e.reduce((function(e,t){var a=isNaN(t.scp_amount_bnd)?0:t.scp_amount_bnd;return e+Math.round(100*(a+Number.EPSILON))/100}),0),r=e.reduce((function(e,t){var a=isNaN(t.total_allowances_bnd)?0:t.total_allowances_bnd;return e+Math.round(100*(a+Number.EPSILON))/100}),0),c=e.reduce((function(e,t){var a=isNaN(t.total_deductions_bnd)?0:t.total_deductions_bnd;return e+Math.round(100*(a+Number.EPSILON))/100}),0),o=e.reduce((function(e,t){var a=isNaN(t.site_allows_bnd)?0:t.site_allows_bnd;return e+Math.round(100*(a+Number.EPSILON))/100}),0),d=e.reduce((function(e,t){var a=isNaN(t.expenses_claims_bnd)?0:t.expenses_claims_bnd;return e+Math.round(100*(a+Number.EPSILON))/100}),0);B((function(e){return Object(n.a)(Object(n.a)({},D),{},{totalpayroll:t,totalwages:l,totaltap:s,totalscp:i,totalallows:r,totaldeducts:c,totalsiteallows:o,totalexpensesclaims:d})}))},Ye=function(){if("Verified"===D.status||"Approved"===D.status)return t({title:"This payroll batch has been ".concat(D.status,"! No changes can be made!"),status:"warning"}),Object(A.jsx)("div",{});var n=v.filter((function(e){return e.payrun===a}));P({id:n[0].id,totalpayroll:D.totalpayroll,totalwages:D.totalwages,totaltap:D.totaltap,totalscp:D.totalscp,totalallows:D.totalallows,totaldeducts:D.totaldeducts,totalsitesallows:D.totalsiteallows,totalexpensesclaims:D.totalexpensesclaims}),e("/payslip")},Ke=function(){return Object(A.jsx)(j.b,{children:Object(A.jsx)(d.a,{columns:ie,data:_,title:"Employees",options:{filtering:!1,search:!1,toolbar:!0,selection:!0,pageSize:10,headerStyle:{backgroundColor:"#daad86",color:"primary"},showTitle:!0},components:{Toolbar:function(e){return Object(A.jsxs)("div",{children:[Object(A.jsx)(o.MTableToolbar,Object(n.a)({},e)),Object(A.jsx)("div",{style:{padding:"5px 10px"},children:Object(A.jsx)(m.a,{colorScheme:"blue",isDisabled:"Approve"!==D.status,onClick:function(){return Xe()},leftIcon:Object(A.jsx)(u.b,{color:"white",fontSize:"1.5em"}),children:"Email"})})]})}}})})},Xe=function(e){var l=se[a.substring(6,7)],s=a.substring(0,4);_.forEach((function(e){if(e.tableData.checked){var a=e.name,i=e.empid,r={to_name:a,to_email:g.filter((function(e){return e.id===i})).map((function(e){return Object(n.a)({},e)}))[0].email,message:"Your payroll for the month of ".concat(l," ").concat(s," has been transfered. Please login in to view your payslip!")};c.a("service_ffxn6vb","template_1y8odlq",r,"user_oLsKrJJYgmAa4uBnRGkuq").then((function(e){console.log(e.status,e.text),t({title:"Email has sent successfully to ".concat(r.to_email,"!"),status:"success"})}),(function(e){console.log(e),t({title:"Email has fail to send to ".concat(r.to_email,"!"),status:"warning"})}))}}))};return Object(A.jsxs)(j.e,{marginLeft:4,marginTop:70,w:"98%",h:"100%",style:{backgroundColor:"lightcyan"},children:[Object(A.jsx)(j.o,{children:Object(A.jsxs)(j.f,{templateRows:"repeat(1,1fr)",templateColumns:"repeat(1,1fr)",children:[Object(A.jsxs)(j.g,{rowSpan:1,colSpan:1,children:[Object(A.jsxs)(j.f,{templateRows:"repeat(1,1fr)",templateColumns:"repeat(10,1fr)",children:[Object(A.jsx)(j.g,{rowSpan:1,colSpan:2}),Object(A.jsx)(j.g,{rowSpan:1,colSpan:4,children:Object(A.jsx)(j.b,{textAlign:"center",alignItems:"center",children:Object(A.jsx)(j.i,{pl:"10",pt:2,children:"Payroll"})})}),Object(A.jsx)(j.g,{rowSpan:1,colSpan:4,pt:0,children:Object(A.jsx)(j.b,{pt:"2",pr:5,alignItems:"right",align:"right",children:Object(A.jsxs)(j.m,{spacing:4,direction:"row",align:"center",pl:150,children:[Object(A.jsx)(m.a,{width:"800px",colorScheme:"blue",isDisabled:"Verified"===D.status||"Approved"===D.status||!Ce,onClick:function(a){return function(a){a.preventDefault(),qe(),Ye(),t({title:"Changes have been saved!",status:"success"}),e("/payslip")}(a)},leftIcon:Object(A.jsx)(u.c,{color:"white",fontSize:"1.5em"}),children:"Save/Exit"}),Object(A.jsx)(m.a,{isDisabled:!Ce,width:"500px",colorScheme:"blue",onClick:function(e){return function(e){e.preventDefault(),"Verified"===D.status||"Approved"===D.status||(qe(),P({id:J,totalpayroll:D.totalpayroll,totalwages:D.totalwages,totaltap:D.totaltap,totalscp:D.totalscp,totalallows:D.totalallows,totaldeducts:D.totaldeducts,totalsitesallows:D.totalsiteallows,totalexpensesclaims:D.totalexpensesclaims})),Ue(He)}(e)},leftIcon:Object(A.jsx)(u.c,{color:"white",fontSize:"1.5em"}),children:"Print"}),Object(A.jsx)(m.a,{width:"500px",colorScheme:"blue",isDisabled:"Verified"===D.status||"Approved"===D.status||"New"===D.status||!Ce,onClick:function(e){return function(e){e.preventDefault(),B((function(e){return Object(n.a)(Object(n.a)({},D),{},{status:"Verified"})})),q("Verified"),qe(),P({id:J,status:"Verified",totalpayroll:D.totalpayroll,totalwages:D.totalwages,totaltap:D.totaltap,totalscp:D.totalscp,totalallows:D.totalallows,totaldeducts:D.totaldeducts,totalsitesallows:D.totalsiteallows,totalexpensesclaims:D.totalexpensesclaims}),t({title:"Batch has been verified!",status:"success"})}(e)},leftIcon:Object(A.jsx)(u.a,{color:"white",fontSize:"1.5em"}),children:"Verify"}),Object(A.jsx)(m.a,{width:"500px",colorScheme:"blue",isDisabled:"Approved"!==D.status,onClick:Ve,leftIcon:Object(A.jsx)(u.b,{color:"white",fontSize:"1.5em"}),children:"Email"})]})})})]}),Object(A.jsx)(j.d,{style:{border:"1px solid lightgrey"},orientation:"horizontal",colorScheme:"red",variant:"solid"})]}),Object(A.jsx)(j.g,{rowSpan:1,colSpan:1,children:Object(A.jsxs)(h.e,{defaultIndex:0,onChange:function(e){return function(e){We(e),1===e&&Ge(),Ae(!1)}(e)},children:[Object(A.jsxs)(h.b,{marginLeft:4,children:[Object(A.jsx)(h.a,{children:Object(A.jsx)(j.b,{children:Object(A.jsx)(j.i,{size:"sm",children:"Details"})})}),Object(A.jsx)(h.a,{children:Object(A.jsx)(j.b,{children:Object(A.jsx)(j.i,{size:"sm",children:"Summary"})})})]}),Object(A.jsxs)(h.d,{children:[Object(A.jsx)(h.c,{children:Object(A.jsxs)(j.f,{templateRows:"repeat(1,1fr)",templateColumns:"repeat(10,1fr)",children:[Object(A.jsxs)(j.g,{colSpan:2,children:[Object(A.jsx)(j.b,{textAlign:"center",p:4,children:Object(A.jsx)(j.i,{size:"sm",alignItems:"center",children:"Employees"})}),Object(A.jsx)(j.d,{backgroundColor:"white"}),Object(A.jsx)(j.b,{h:"550",border:"2px solid white",backgroundColor:"cyan.100",overflow:"scroll",children:Object(A.jsx)(y.a,{variant:"simple",children:Object(A.jsx)(y.b,{children:_.map((function(e,t){return Object(A.jsxs)("div",{children:[Object(A.jsx)(m.a,{fontSize:{base:"10px",md:"10px",lg:"12px",xl:"16px"},variant:"outlined",height:["".concat(e.name.length>30?"60px":"40px"),"40px"],style:{whiteSpace:"normal",wordWrap:"break-word"},onClick:function(e){he(t),Ie(!1),function(e){var t=He[e];pe((function(e){return Object(n.a)(Object(n.a)({},le),t)})),X(!0),Fe(!0)}(t)},children:Object(A.jsx)(j.n,{align:"left",children:e.name})}),Object(A.jsx)(j.d,{backgroundColor:"white"})]})}))})})})]}),Object(A.jsx)(j.g,{colSpan:8,children:Object(A.jsx)(E,{formdata:ue,setFormdata:pe,loadFormdata:K,setLoadFormdata:X,payitems:k,setLoadUpdatedata:ce,singlebatchpayslip:He,rowindex:me,isCalc:ge,isStart:Se,setIsStart:Ie,setIsCalc:ve})})]})}),Object(A.jsx)(h.c,{children:Object(A.jsx)(M,{payrundata:D,singlebatchpayslip:He})})]})]})})]})}),Object(A.jsxs)(x.g,{isOpen:Re,onClose:Qe,children:[Object(A.jsx)(x.m,{}),Object(A.jsxs)(x.j,{children:[Object(A.jsx)(x.i,{}),Object(A.jsx)(x.h,{children:Object(A.jsx)(Ke,{})}),Object(A.jsx)(x.k,{children:Object(A.jsx)(m.a,{colorScheme:"blue",mr:3,onClick:Qe,children:"Close"})})]})]})]})}}}]);
//# sourceMappingURL=13.3d1a574f.chunk.js.map