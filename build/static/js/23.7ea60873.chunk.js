(this.webpackJsonphrms=this.webpackJsonphrms||[]).push([[23],{1082:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var a=n(4),c=n(9),i=n(1),s=n(27),o=n.n(s),r=n(88),l=n(89),d=n(133),u=n(211),j=n(87),b=n(163),f=n(67),p=n.n(f),h=n(44),O=n.n(h),x=n(72),m=n.n(x),E=n(73),v=n.n(E),A=n(199),_=n.n(A),g=n(19),C=n(239),D=n(102),R=n(50),S=n(77),y=n(95),I=n(349),P=n(2),T=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ADMINMANAGER_EMAIL:"pvchinbn@gmail.com",REACT_APP_EMAILJS_SERVICEID:"service_ffxn6vb",REACT_APP_EMAILJS_USERID:"user_oLsKrJJYgmAa4uBnRGkuq",REACT_APP_FIREBASE_API_KEY:"AIzaSyAC1wkGkNZ6RIeXNe_cbf1NfYEDTweCN-M"}).ADMINMANAGER_EMAIL,N="Pending";function k(e){e.setExpensesdata,e.handleDialogClose;var t=M(),n=Object(g.a)(),j=Object(i.useState)(!1),f=Object(c.a)(j,2),h=f[0],x=f[1],E=Object(i.useState)(!1),A=Object(c.a)(E,2),k=A[0],w=A[1],L=Object(y.a)().employees,F=Object(I.a)().expenses,J=Object(D.b)(),B=J.editExpenseID,G=J.updateExpense,K=J.update_expense_error,Y=J.deleteExpense,W=J.loadPendingExpenses,q=F.filter((function(e){return"Pending"===e.status})),H=Object(i.useMemo)((function(){return[{title:"Name",field:"name",editable:"never"},{title:"Date",field:"date",type:"date",dateSetting:{locale:"en-GB"},editable:"never"},{title:"Description",field:"description",editable:"never"},{title:"Amount",field:"amount",type:"currency",editable:"never"},{title:"Status",field:"status",editComponent:function(e){return Object(P.jsxs)(r.a,{onChange:function(t){return e.onChange(t.target.value)},style:{width:100},value:e.value,select:!0,children:[Object(P.jsx)(l.a,{value:"Pending",children:"Pending"}),Object(P.jsx)(l.a,{value:"Approve",children:"Approve"}),Object(P.jsx)(l.a,{value:"Reject",children:"Reject"}),Object(P.jsx)(l.a,{value:"Cancel",children:"Cancel"})]})}}]}),[]),U=function(){x(!1),W(N)},V=function(e,t){var c=e.date,i=e.empid,s={to_name:e.name,to_email:L.filter((function(e){return e.id===i})).map((function(e){return Object(a.a)({},e)}))[0].email,message:"Your expenses claim application dated on ".concat(c," has been ").concat(t,"!"),cc_to:T};b.a("service_ffxn6vb","template_1y8odlq",s,"user_oLsKrJJYgmAa4uBnRGkuq").then((function(e){console.log(e.status,e.text),n({title:"Email has sent successfully to ".concat(s.to_email,"!"),status:"success"})}),(function(e){console.log(e),n({title:"Email has fail to send to ".concat(s.to_email,"!"),status:"warning"})}))},z=function(){q.forEach((function(e){if(e.tableData.checked){if(G({id:e.id,status:"Approved"}),!K)q.filter((function(t){return t.id===e.id}))[0].status="Approved";V(e,"Approved")}})),q.forEach((function(e){e.tableData&&(e.tableData.checked=!1)}))},X=function(){q.forEach((function(e){if(e.tableData.checked){if(G({id:e.id,status:"Rejected"}),!K)q.filter((function(t){return t.id===e.id}))[0].status="Rejected";V(e,"Rejected")}})),q.forEach((function(e){e.tableData&&(e.tableData.checked=!1)}))};return q?Object(P.jsx)("div",{className:t.root,children:Object(P.jsxs)("div",{style:{maxWidth:"100%",paddingTop:"5px"},children:[Object(P.jsx)(o.a,{columns:H,data:q,title:"Expenses Claims Application",icons:{Add:function(e){return Object(P.jsx)(p.a,{})},Edit:function(e){return Object(P.jsx)(_.a,{})},Delete:function(e){return Object(P.jsx)(O.a,{})},Clear:function(e){return Object(P.jsx)(O.a,{})},Check:function(e){return Object(P.jsx)(m.a,{})},Search:function(e){return Object(P.jsx)(v.a,{})},ResetSearch:function(e){return Object(P.jsx)(O.a,{})}},options:{filtering:!0,selection:!0,headerStyle:{backgroundColor:"#90CDF4",color:"#FFF"},showTitle:!0},components:{Toolbar:function(e){return Object(P.jsxs)("div",{children:[Object(P.jsx)(s.MTableToolbar,Object(a.a)({},e)),Object(P.jsxs)("div",{style:{padding:"5px 10px"},children:[Object(P.jsxs)(d.a,{type:"submit",variant:"contained",color:"secondary",className:t.button,onClick:z,children:["Approve ",Object(P.jsx)(u.a,{className:t.rightIcon,children:"send"})]}),Object(P.jsxs)(d.a,{type:"submit",variant:"contained",color:"secondary",className:t.button,onClick:X,children:["Reject ",Object(P.jsx)(u.a,{className:t.rightIcon,children:"send"})]})]})]})}}}),Object(P.jsx)(R.a,{isOpen:h,handleClose:U,title:"",showButton:!0,isFullscree:!1,children:Object(P.jsx)(C.a,{handleDialogClose:U})}),Object(P.jsx)(S.a,{onClose:function(){w(!1)},onConfirm:function(){Y(B),W(N)},isOpen:k,title:"Delete Expenses",children:Object(P.jsx)("h2",{children:"Are you sure you want to delete ?"})})]})}):Object(P.jsx)("div",{children:Object(P.jsx)("h2",{children:"Loading...Expenses"})})}var M=Object(j.a)((function(e){return{root:{padding:0},button:{margin:e.spacing(1)}}}))}}]);
//# sourceMappingURL=23.7ea60873.chunk.js.map