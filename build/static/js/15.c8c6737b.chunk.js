(this.webpackJsonphrms=this.webpackJsonphrms||[]).push([[15],{1052:function(e,t,n){"use strict";n.r(t);var a=n(29),i=n(4),r=n(2),c=n(234),o=n(10),l=n(97),s=n(233),d=n(130),u=n(117),j=n(197),b=n.n(j),p=n(39),m=n(49),g=n(27),O=n(9),h=n(100),f=n(134),x=n(215),v=n(611),y=n(91),_=n(129),C=n(151),P=n(48),w=n(19),S=n(56),N=n(23),I=n(30),D=n(113),E=n(24),T=n.n(E),k=n(1);function B(e){e.setCalc;var t=F(),n=Object(N.d)(I.g),a=Object(N.d)(I.h),i=Object(D.b)(),c=i.payslipearnings,o=i.payslipearnings_loading,l=i.getSingleBatchPayslipEarnings;return Object(r.useEffect)((function(){l(n,a)}),[]),o?Object(k.jsx)("div",{children:Object(k.jsx)("h2",{children:"Loading... Incomes."})}):Object(k.jsx)("div",{className:t.root,children:Object(k.jsx)("div",{style:{maxWidth:"100%",paddingTop:"5px"},children:Object(k.jsx)(T.a,{columns:[{title:"Name",field:"description"},{title:"Amount",field:"amount",type:"currency"}],data:c,title:"Income",options:{search:!1,toolbar:!1}})})})}var F=Object(l.a)((function(e){return{root:{padding:0}}}));function V(){var e=A(),t=Object(N.d)(I.g),n=Object(N.d)(I.h),a=Object(D.b)(),i=a.payslipdeductions,c=a.payslipdeductions_loading,o=a.getSingleBatchPayslipDeductions;return Object(r.useEffect)((function(){o(t,n)}),[]),c?Object(k.jsx)("div",{children:Object(k.jsx)("h2",{children:"Loading... Expenses."})}):Object(k.jsx)("div",{className:e.root,children:Object(k.jsx)("div",{style:{maxWidth:"100%",paddingTop:"5px"},children:Object(k.jsx)(T.a,{columns:[{title:"Name",field:"description"},{title:"Amount",field:"amount",type:"currency"}],data:i,title:"Expense",options:{search:!1,toolbar:!1}})})})}var A=Object(l.a)((function(e){return{root:{padding:0}}})),L=n(92),R=n(159);function W(e){var t=e.earningsdata,n=e.oldEarningsdata,a=e.setEarningsdata,c=e.handleDialogClose,o=M(),l=Object(N.d)(I.g),s=Object(N.d)(I.h),d=Object(D.b)(),u=d.addPayslipEarning,j=d.payslipearnings_loading,b=d.updatePayslipEarning,p=d.deletePayslipEarning,O=d.single_payslip,h=d.payslip_period,v=d.getSingleBatchPayslipEarnings,_=Object(R.b)().allowances,C=[{title:"Description",field:"description",editComponent:function(e){return Object(k.jsx)(y.a,{onChange:function(t){return e.onChange(t.target.value)},style:{width:200},value:e.value,select:!0,children:_.map((function(e){return Object(k.jsx)(L.a,{value:e.name,children:e.name})}))})}},{title:"Amount",field:"amount",type:"currency"}];Object(r.useEffect)((function(){v(O.empid,h)}),[]);var P=function(){console.log("update",t,n),n.forEach((function(e){var n=e.id,a=e.rec_id,i=t.find((function(e){return e.rec_id===a}));console.log("find",n,i),i||p(n)})),t.forEach((function(e){var t=e.id,n=e.description,a=e.amount;if(t){var r=e.id,c=(e.rec_id,e.tableData,Object(g.a)(e,["id","rec_id","tableData"]));b(Object(i.a)({id:r},c))}else u({description:n,amount:a,name:O.name,empid:l,period:s})})),c()};return j?Object(k.jsx)("div",{children:Object(k.jsx)("h2",{children:"Loading... Incomes."})}):Object(k.jsx)("div",{className:o.root,children:Object(k.jsx)("div",{style:{maxWidth:"100%",paddingTop:"5px"},children:Object(k.jsx)(T.a,{columns:C,data:t,title:"Income",editable:{onRowAdd:function(e){return new Promise((function(n,i){setTimeout((function(){a([].concat(Object(m.a)(t),[e])),n()}),1e3)}))},onRowUpdate:function(e,n){return new Promise((function(i,r){setTimeout((function(){var r=Object(m.a)(t);r[n.tableData.id]=e,a(Object(m.a)(r)),i()}),1e3)}))},onRowDelete:function(e){return new Promise((function(n,i){setTimeout((function(){var i=Object(m.a)(t),r=e.tableData.id;i.splice(r,1),a(Object(m.a)(i)),n()}),1e3)}))}},options:{filtering:!0,headerStyle:{backgroundColor:"orange",color:"primary"},showTitle:!0},components:{Toolbar:function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)(E.MTableToolbar,Object(i.a)({},e)),Object(k.jsx)("div",{style:{padding:"5px 10px"},children:Object(k.jsxs)(f.a,{type:"submit",variant:"contained",color:"secondary",className:o.button,onClick:P,children:["Update ",Object(k.jsx)(x.a,{className:o.rightIcon,children:"send"})]})})]})}}})})})}var M=Object(l.a)((function(e){return{root:{padding:0}}}));function z(e){var t=e.deductionsdata,n=e.oldDeductionsdata,a=e.setDeductionsdata,c=e.handleDialogClose,o=U(),l=Object(N.d)(I.g),s=Object(N.d)(I.h),d=Object(D.b)(),u=d.addPayslipDeduction,j=d.payslipdeductions_loading,b=d.updatePayslipDeduction,p=d.deletePayslipDeduction,O=d.single_payslip,h=d.payslip_period,v=d.getSingleBatchPayslipDeductions,_=Object(R.b)().deductions,C=[{title:"Description",field:"description",editComponent:function(e){return Object(k.jsx)(y.a,{onChange:function(t){return e.onChange(t.target.value)},style:{width:200},value:e.value,select:!0,children:_.map((function(e){return Object(k.jsx)(L.a,{value:e.name,children:e.name})}))})}},{title:"Amount",field:"amount",type:"currency"}];Object(r.useEffect)((function(){v(O.empid,h)}),[]);var P=function(){console.log("update",t,n),n.forEach((function(e){var n=e.id,a=e.rec_id,i=t.find((function(e){return e.rec_id===a}));console.log("find",n,i),i||p(n)})),t.forEach((function(e){var t=e.id,n=e.description,a=e.amount;if(t){var r=e.id,c=(e.rec_id,e.tableData,Object(g.a)(e,["id","rec_id","tableData"]));b(Object(i.a)({id:r},c))}else u({description:n,amount:a,name:O.name,empid:l,period:s})})),c()};return j?Object(k.jsx)("div",{children:Object(k.jsx)("h2",{children:"Loading... Expenses."})}):Object(k.jsx)("div",{className:o.root,children:Object(k.jsx)("div",{style:{maxWidth:"100%",paddingTop:"5px"},children:Object(k.jsx)(T.a,{columns:C,data:t,title:"Deductions",editable:{onRowAdd:function(e){return new Promise((function(n,i){setTimeout((function(){a([].concat(Object(m.a)(t),[e])),n()}),1e3)}))},onRowUpdate:function(e,n){return new Promise((function(i,r){setTimeout((function(){var r=Object(m.a)(t);r[n.tableData.id]=e,a(Object(m.a)(r)),i()}),1e3)}))},onRowDelete:function(e){return new Promise((function(n,i){setTimeout((function(){var i=Object(m.a)(t),r=e.tableData.id;i.splice(r,1),a(Object(m.a)(i)),n()}),1e3)}))}},options:{filtering:!0,headerStyle:{backgroundColor:"orange",color:"primary"},showTitle:!0},components:{Toolbar:function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)(E.MTableToolbar,Object(i.a)({},e)),Object(k.jsx)("div",{style:{padding:"5px 10px"},children:Object(k.jsxs)(f.a,{type:"submit",variant:"contained",color:"secondary",className:o.button,onClick:P,children:["Update ",Object(k.jsx)(x.a,{className:o.rightIcon,children:"send"})]})})]})}}})})})}var U=Object(l.a)((function(e){return{root:{padding:0}}})),H=Object(l.a)((function(e){return{button:{margin:e.spacing(1)},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)},iconSmall:{fontSize:20},root:{padding:e.spacing(3,2)},container:{display:"flex",flexWrap:"wrap"},divider:{padding:4},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:350},grid:{padding:e.spacing(3,2)},box:{height:100,display:"flex",border:"1px solid black",padding:8}}})),q=function(){var e=Object(S.g)(),t=H(),n=Object(D.b)(),a=n.single_payslip,i=n.updatePayslip,c=n.editPayslipID,o=n.getSinglePayslip,l=n.single_payslip_loading,s=n.single_payslip_error,j=n.setPayslipEarningAmount,b=n.setPayslipDeductionAmount,p=n.payslipearnings,E=n.payslipdeductions,T=n.getSingleBatchPayslipEarnings,F=n.getSingleBatchPayslipDeductions,A=Object(N.d)(I.g),L=Object(N.d)(I.h),R=Object(r.useState)([]),M=Object(O.a)(R,2),U=M[0],q=M[1],G=Object(r.useState)([]),J=Object(O.a)(G,2),X=J[0],Y=J[1],K=Object(r.useState)([]),Q=Object(O.a)(K,2),Z=Q[0],$=Q[1],ee=Object(r.useState)([]),te=Object(O.a)(ee,2),ne=te[0],ae=te[1],ie=Object(r.useState)(!1),re=Object(O.a)(ie,2),ce=re[0],oe=re[1],le=Object(r.useState)(!1),se=Object(O.a)(le,2),de=se[0],ue=se[1],je=Object(w.b)(),be=je.handleSubmit,pe=je.control,me=a.name,ge=a.period,Oe=a.date,he=a.bank_name,fe=a.bank_acno,xe=a.total_earnings,ve=a.total_deductions,ye=a.tap_amount,_e=a.scp_amount,Ce=a.basic_pay,Pe=a.nett_pay,we=a.tap_checkbox;Object(r.useEffect)(o(c),[]);var Se=function(e){},Ne=function(){oe(!1),T(A,L)},Ie=function(){ue(!1),F(A,L)};return l?Object(k.jsx)("div",{children:"Loading..."}):(s&&e("/error"),Object(k.jsx)("div",{children:Object(k.jsxs)(u.a,{className:t.root,children:[Object(k.jsx)(d.a,{xs:12,md:8,lg:12,children:Object(k.jsx)(C.a,{title:"Employee Profile",children:Object(k.jsxs)("form",{onSubmit:be((function(e){a.rec_id;var t=Object(g.a)(a,["rec_id"]);i.apply(void 0,Object(m.a)(t))})),children:[Object(k.jsx)(d.a,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(h.a,{variant:"h5",component:"h3",children:"PAYSLIP FORM"}),Object(k.jsx)(h.a,{component:"p",children:"Payslip Preparation"}),Object(k.jsxs)(f.a,{type:"submit",variant:"contained",color:"primary",className:t.button,children:["Submit ",Object(k.jsx)(x.a,{className:t.rightIcon,children:"send"})]})]})}),Object(k.jsx)(v.a,{className:t.divider}),Object(k.jsxs)(d.a,{item:!0,xs:12,children:[Object(k.jsx)("div",{children:Object(k.jsx)(w.a,{name:"name",control:pe,defaultValue:me,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Name",id:"margin-normal",name:"name",defaultValue:me,className:t.textField,onChange:Se,InputProps:{readOnly:!0}})},rules:{required:"Name required"}})}),Object(k.jsxs)("div",{children:[Object(k.jsx)(w.a,{name:"period",control:pe,defaultValue:ge,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Period",id:"margin-normal",name:"period",defaultValue:ge,className:t.textField,onChange:Se,InputProps:{readOnly:!0}})}}),Object(k.jsx)(w.a,{name:"date",control:pe,defaultValue:Oe,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Date",type:"date",id:"margin-normal",name:"date",defaultValue:Oe,className:t.textField,onChange:Se,InputLabelProps:{shrink:!0}})}})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)(w.a,{name:"bank_name",control:pe,defaultValue:he,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Bank Name",id:"margin-normal",name:"bank_name",defaultValue:he,className:t.textField,onChange:Se,InputProps:{readOnly:!0}})}}),Object(k.jsx)(w.a,{name:"bank_acno",control:pe,defaultValue:fe,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Bank AC No",id:"margin-normal",name:"bank_acno",value:fe,className:t.textField,onChange:Se,InputProps:{readOnly:!0}})}})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)(w.a,{name:"tap_amount",control:pe,defaultValue:ye,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"TAP Contrinution",type:"currency",id:"standard-number",name:"tap_amount",defaultValue:ye,className:t.textField,onChange:function(e){parseInt(e.target.value,10)},InputProps:{readOnly:!0}})}}),Object(k.jsx)(w.a,{name:"scp_amount",control:pe,defaultValue:_e,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"SCP Contribution",type:"currency",id:"standard-number",name:"scp_amount",defaultValue:_e,className:t.textField,onChange:function(e){parseInt(e.target.value,10)},InputProps:{readOnly:!0}})}})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)(w.a,{name:"total_earnings",control:pe,defaultValue:xe,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Total Earnings",type:"number",id:"standard-number",name:"total_earnings",value:xe,className:t.textField,onChange:function(e){parseInt(e.target.value,10)},InputProps:{readOnly:!0}})}}),Object(k.jsx)(w.a,{name:"total_deductions",control:pe,defaultValue:ve,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Total Deductions",type:"number",id:"standard-number",name:"total_deductions",value:ve,className:t.textField,onChange:function(e){parseInt(e.target.value,10)},InputProps:{readOnly:!0}})}})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)(w.a,{name:"basic_pay",control:pe,defaultValue:Ce,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Basic Pay",type:"number",id:"standard-number",name:"basic_pay",value:Ce,className:t.textField,onChange:Se,InputProps:{readOnly:!0}})}}),Object(k.jsx)(w.a,{name:"nett_pay",control:pe,defaultValue:Pe,render:function(e){var n=e.field;n.onChange,n.value,e.fieldState.error;return Object(k.jsx)(y.a,{label:"Nett Pay",type:"number",id:"standard-number",name:"nett_pay",value:Pe,className:t.textField,onChange:function(e){parseInt(e.target.value,10)},InputProps:{readOnly:!0}})}})]}),Object(k.jsxs)(f.a,{type:"submit",variant:"contained",color:"primary",className:t.button,onClick:function(){var e=0,t=0;we&&(e=Math.ceil(.05*Ce),t=Math.round(.035*(Ce+Number.EPSILON)*100)/100),console.log("calc",e,t);var n=p.reduce((function(e,t){return e+t.amount}),0),a=E.reduce((function(e,t){return e+t.amount}),0),r=Ce+n-a-e-t;j(n),b(a),i({id:c,total_earnings:n,total_deductions:a,tap_amount:e,scp_amount:t,nett_pay:r}),console.log("total",n,a,e,t,r),o(c)},children:["Calc ",Object(k.jsx)(x.a,{className:t.rightIcon,children:"send"})]})]}),Object(k.jsx)(v.a,{className:t.divider})]})})}),Object(k.jsx)("div",{children:Object(k.jsxs)(d.a,{container:!0,alignItems:"center",className:t.grid,children:[Object(k.jsx)(d.a,{item:!0,xs:6,md:8,lg:6,children:Object(k.jsx)("div",{children:Object(k.jsx)(_.a,{title:"Earnings",handleClick:function(){Y(Object(m.a)(p)),q(Object(m.a)(p)),oe(!0)},children:Object(k.jsx)(B,{})})})}),Object(k.jsx)(d.a,{item:!0,xs:6,md:8,lg:6,children:Object(k.jsx)("div",{children:Object(k.jsx)(_.a,{title:"Deductions",handleClick:function(){ae(Object(m.a)(E)),$(Object(m.a)(E)),ue(!0)},children:Object(k.jsx)(V,{})})})})]})}),Object(k.jsx)(v.a,{className:t.divider}),Object(k.jsx)(P.a,{isOpen:ce,handleClose:Ne,title:"",showButton:!0,isFullscreen:!1,isFullwidth:!1,children:Object(k.jsx)(W,{setEarningsdata:q,earningsdata:U,oldEarningsdata:X,handleDialogClose:Ne})}),Object(k.jsx)(P.a,{isOpen:de,handleClose:Ie,title:"",showButton:!0,isFullscreen:!1,isFullwidth:!1,children:Object(k.jsx)(z,{setDeductionsdata:$,deductionsdata:Z,oldDeductionsdata:ne,handleDialogClose:Ie})})]})}))},G=Object(l.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(i.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(a.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(9),paddingBottom:e.spacing(4),border:"1px solid"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",border:"1px solid",width:"100%"},fixedHeight:{height:800}}}));t.default=function(e){e.title;var t=G(),n=Object(o.a)(t.paper,t.fixedHeight);return Object(k.jsxs)("div",{children:[Object(k.jsx)(c.a,{}),Object(k.jsx)("div",{className:t.appBarSpacer,children:Object(k.jsx)(s.a,{maxWidth:"lg",className:t.container,children:Object(k.jsx)(d.a,{container:!0,spacing:3,children:Object(k.jsx)(d.a,{item:!0,xs:12,children:Object(k.jsxs)(u.a,{className:n,children:[Object(k.jsx)(p.b,{to:"/batchpayslips",children:Object(k.jsx)("div",{children:Object(k.jsx)(b.a,{fontSize:"large",color:"primary"})})}),Object(k.jsx)("div",{children:Object(k.jsx)(q,{})})]})})})})})]})}}}]);
//# sourceMappingURL=15.c8c6737b.chunk.js.map